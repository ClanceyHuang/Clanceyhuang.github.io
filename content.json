{"meta":{"title":"Kirk","subtitle":"debug.cool","description":"debug","author":"ClanceyHuang","url":"http://debug.cool","root":"/"},"pages":[{"title":"About","date":"2021-05-09T16:20:22.483Z","updated":"2021-05-09T16:20:22.483Z","comments":false,"path":"about/index.html","permalink":"http://debug.cool/about/index.html","excerpt":"","text":"Hi, Iâ€™m Kirk! ğŸ‘‹ åå‘ç½‘ç»œå®‰å…¨å’Œæ•°æ®å¼€å‘ã€‚ ğŸ”­ æ™®æ™®é€šé€šçš„ä»£ç æ¬ç –å·¥ä¸€åï¼Œæ¯”å¼€å‘äººå‘˜å¤šæ‡‚ä¸€ç‚¹å®‰å…¨ï¼Œæ¯”ç½‘ç»œå®‰å…¨äººå‘˜å¤šæ‡‚ä¸€ç‚¹å¼€å‘ï¼Œé«˜ä¸æˆä½ä¸å°±ã€‚ ğŸŒ± å›½å†…æŸâ€œæœ«ç«¯â€é‚®ç”µå­¦æ ¡è®¡ç®—æœºä¸“ä¸šï¼Œç›®å‰åœ¨æŸLow Techå…¬å¸â€œæ··æ—¥å­â€ã€‚ âš¡ å–œæ¬¢å°åŠ¨ç‰©ï¼Œé¥®é£Ÿå£å‘³åè¾£å‘³ã€‚ ğŸ’¬ ç©ºé—²æ—¶é—´çˆ±ç¡è§‰ã€çœ‹ä¹¦ç­‰å†¬çœ ç±»å‹æ´»åŠ¨ã€‚ è‡ªç ”çš„æ¯”è¾ƒå¥½ç©çš„é¡¹ç›®ï¼š ğŸš— ä¸€å¥—æ”¯æŒphp-fpmå’ŒswooleåŒæ—¶è¿è¡Œæˆ–éšæ—¶åˆ‡æ¢çš„ Webå¼€å‘æ¡†æ¶ - Fine ğŸš• ä¸€å¥—åŸºäºæœ‰é™çŠ¶æ€æœºè¿›è¡Œè§£æè‡ªå®šä¹‰è¡¨è¾¾å¼è®¡ç®—å¼•æ“-DiyExpress ğŸš™ ä¸€å¥—é€šè¿‡è®­ç»ƒæ¨¡å‹ç ´è§£éªŒè¯ç çš„Pyè„šæœ¬é›† - AutoCrawï¼ˆå·²ç ´è§£æéªŒ4ä»£å°æ»‘å—ï¼‰ æ¬¢è¿ä¸€èµ·ç©è€ã€ä¸€èµ·æäº‹~~~ é‚®ç®±ï¼š ClanceyHuang#gmail.com ClanceyHuang#outlook.com"},{"title":"Links","date":"2021-05-07T07:30:39.996Z","updated":"2021-05-07T07:30:39.996Z","comments":true,"path":"links/index.html","permalink":"http://debug.cool/links/index.html","excerpt":"","text":""},{"title":"404 Not Foundï¼šè¯¥é¡µæ— æ³•æ˜¾ç¤º","date":"2021-05-07T07:30:39.997Z","updated":"2021-05-07T07:30:39.996Z","comments":false,"path":"/404.html","permalink":"http://debug.cool/404.html","excerpt":"","text":""},{"title":"Categories","date":"2021-05-07T07:30:39.997Z","updated":"2021-05-07T07:30:39.997Z","comments":false,"path":"categories/index.html","permalink":"http://debug.cool/categories/index.html","excerpt":"","text":""},{"title":"Tags","date":"2021-05-07T07:30:39.986Z","updated":"2021-05-07T07:30:39.986Z","comments":false,"path":"tags/index.html","permalink":"http://debug.cool/tags/index.html","excerpt":"","text":""},{"title":"Repositories","date":"2021-05-07T07:30:39.951Z","updated":"2021-05-07T07:30:39.951Z","comments":false,"path":"repository/index.html","permalink":"http://debug.cool/repository/index.html","excerpt":"","text":""}],"posts":[{"title":"2021HVVæ¼æ´å…¬å¸ƒ","slug":"hvv2021","date":"2021-04-23T07:44:00.000Z","updated":"2021-05-14T12:41:13.577Z","comments":true,"path":"2021/04/23/hvv2021/","link":"","permalink":"http://debug.cool/2021/04/23/hvv2021/","excerpt":"2021æŠ¤ç½‘15å¤©ï¼Œåˆæ­¥ç»Ÿè®¡å…¬å¸ƒäº†47ä¸ªæ¼æ´ï¼Œæ•´ç†å¦‚ä¸‹ã€‚","text":"2021æŠ¤ç½‘15å¤©ï¼Œåˆæ­¥ç»Ÿè®¡å…¬å¸ƒäº†47ä¸ªæ¼æ´ï¼Œæ•´ç†å¦‚ä¸‹ã€‚ 2021.04.08 å¯æ˜æ˜Ÿè¾°å¤©æ¸…æ±‰é©¬ USG é˜²ç«å¢™å­˜åœ¨é€»è¾‘ç¼ºé™·æ¼æ´ï¼ˆå†å²æ¼æ´ï¼‰ | CNVD-2021-17391 å¯æ˜æ˜Ÿè¾°å¤©æ¸…æ±‰é©¬ USG é˜²ç«å¢™å­˜åœ¨é€»è¾‘ç¼ºé™·æ¼æ´ï¼ˆå†å²æ¼æ´ï¼‰ | CNVD-2021-17391 [å¯æ˜æ˜Ÿè¾° å¤©æ¸…æ±‰é©¬ USG é˜²ç«å¢™ é€»è¾‘ç¼ºé™·æ¼æ´ CNVD-2021-12793 ] ç¦…é“é¡¹ç›®ç®¡ç†è½¯ä»¶ 11.6 | [ç¦…é“ 11.6 sqlæ³¨å…¥æ¼æ´] é‡‘å±±WPSï¼ˆå†å²æ¼æ´ CVE-2020-25291ï¼‰ | é€šè¿‡ç‚¹å‡»è§¦å‘ WPS å†…ç½®æµè§ˆå™¨RCE [é‡‘å±± WPS å­˜åœ¨è¿œç¨‹å †æŸåæ¼æ´] é‡‘å±± V8/V9 ç»ˆç«¯å®‰å…¨ç³»ç»Ÿ | [é‡‘å±± V8 -V9 ç»ˆç«¯å®‰å…¨ç³»ç»Ÿæ¼æ´åˆé›†] é‡‘å±± V8 ç»ˆç«¯å®‰å…¨ç³»ç»Ÿ | [é‡‘å±± V8 ç»ˆç«¯å®‰å…¨ç³»ç»Ÿ pdf maker.php å‘½ä»¤æ‰§è¡Œæ¼æ´] å¤©æ“ | [å¤©æ“è¶Šæƒè®¿é—®] è‡´è¿œOA | [è‡´è¿œOA ajax.do ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´] è‡´è¿œOA | [è‡´è¿œOA å‰å° getshell å¤ç°][è‡´è¿œOAä»»æ„æ–‡ä»¶ä¸Šä¼ ] é½æ²»å ¡å’æœº | å­˜åœ¨å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ŒPOCç–‘ä¼¼å·²æµå‡º æ·±ä¿¡æœEDRï¼ˆå†å²æ¼æ´ï¼‰ | [æ·±ä¿¡æœEDRè¿œç¨‹å‘½ä»¤æ‰§è¡Œ CNVD-2020-46552] æ·±ä¿¡æœVPNï¼ˆå†å²æ¼æ´ï¼‰ | [æ·±ä¿¡æœ SSL VPN å®¢æˆ·ç«¯è¿œç¨‹æ–‡ä»¶ä¸‹è½½] jackson | å­˜åœ¨ååºåˆ—åŒ–æ¼æ´ï¼ŒPOCç–‘ä¼¼å·²æµå‡º tomcat | å­˜åœ¨ååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ŒPOCç–‘ä¼¼å·²æµå‡º æ³›å¾®OA9 | [æ³›å¾®OA9å‰å°ä»»æ„æ–‡ä»¶ä¸Šä¼ ]) æ³›å¾®OA8 | [æ³›å¾®OA8å‰å°SQLæ³¨å…¥] CoreMail | [Coremailæ–‡ä»¶ä¸Šä¼ æ¼æ´POC - é’“é±¼] ç”¨å‹NC6.5 | [ç”¨å‹NCååºåˆ—åŒ–] [ç”¨å‹ NC ååºåˆ—åŒ–RCEæ¼æ´] dubbo | å­˜åœ¨ååºåˆ—åŒ–å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼ŒPOCç–‘ä¼¼å·²æµå‡º Weblogic | [æŸweblogicçš„T3ååºåˆ—åŒ–0dayåˆ†æ] [Weblogic T3 ååºåˆ—åŒ–è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´] å’Œä¿¡åˆ›å¤©äº‘æ¡Œé¢å…¨ç‰ˆæœ¬ | [å’Œä¿¡åˆ›å¤©äº‘æ¡Œé¢å‘½ä»¤æ‰§è¡Œ][å’Œä¿¡åˆ›å¤©äº‘æ¡Œé¢ç³»ç»Ÿ è¿œç¨‹å‘½ä»¤æ‰§è¡Œ RCEæ¼æ´] çº¢å¸†OA | å­˜åœ¨ä»»æ„æ–‡ä»¶å†™å…¥æ¼æ´ï¼ŒPOCç–‘ä¼¼å·²æµå‡º Exchange | [Microsoft Exchange Serverè¿œç¨‹æ‰§è¡Œä»£ç æ¼æ´] Shiro | å­˜åœ¨Ndayæ¼æ´ï¼ŒPOCç–‘ä¼¼å·²æµå‡º é‡‘è¶äº‘K3Cloudå…¨ç‰ˆæœ¬ | å­˜åœ¨å‘½ä»¤æ‰§è¡Œæ¼æ´ï¼Œï¼ŒPOCç–‘ä¼¼å·²æµå‡º ç”¨å‹U8Cloudç‰ˆæœ¬ | å­˜åœ¨å‘½ä»¤æ‰§è¡Œï¼ŒPOCç–‘ä¼¼å·²æµå‡º H3Cè®¡ç®—æœºç®¡ç†å¹³å°2016å¹´ç‰ˆæœ¬ | [H3C SecPathè¿ç»´å®¡è®¡ç³»ç»Ÿä»»æ„ç”¨æˆ·ç™»å½•æ¼æ´] 18å·è·å–è¯¦ç»†ä¿¡æ¯ å¸†è½¯V9 | [å¸†è½¯ V9getshell FineReport V9] [å¸†è½¯ V9 ä»»æ„æ–‡ä»¶è¦†ç›–æ–‡ä»¶ä¸Šä¼ ] å¤©çœ¼ | å­˜åœ¨0dayæ¼æ´ï¼ŒPOCç–‘ä¼¼å·²æµå‡º é»˜å®‰èœœç½ç®¡ç†å¹³å° | [é»˜å®‰èœœç½ç®¡ç†å¹³å°æœªæˆæƒé—®] Jellyfin&lt;10.7.1ç‰ˆæœ¬ï¼ˆå†å²æ¼æ´ï¼‰ | [Jellyfinæœªæˆæƒä»»æ„æ–‡ä»¶è¯»å– ç”¨å‹ERP-NC | å­˜åœ¨ç›®å½•éå†æ¼æ´ å¿«æ’CMS | [å¿«æ’CMS ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´] å¿«æ’CMS | [å¿«æ’CMS ä¿¡æ¯æ³„éœ²æ¼æ´] å¿«æ’CMS | [å¿«æ’CMS åå°XSSæ¼æ´] 2021.04.09 Apache Solr | [apache Solr å­˜åœ¨ä»»æ„æ–‡ä»¶è¯»å–] äº¿é‚®ç”µå­é‚®ä»¶ç³»ç»Ÿ | [äº¿é‚®ç”µå­é‚®ä»¶ç³»ç»Ÿ è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´] å¤©èä¿¡DLP | [å¤©èä¿¡dlp-æœªæˆæƒ+è¶Šæƒ] å¥‡å®‰ä¿¡VPN | [å¥‡å®‰ä¿¡VPNå‰å°å­˜åœ¨RCE] DzzOfficeâ‰¤2.02 | [DzzOfficeæœ€æ–°ç‰ˆRCE(éšæœºæ•°é—®é¢˜)] è“å‡ŒOA | [è“å‡Œoaä»»æ„æ–‡ä»¶å†™å…¥] è“å‡ŒOA | [è“å‡ŒOA EKP åå°SQLæ³¨å…¥æ¼æ´ CNVD-2021-01363][è“å‡ŒOA EKP åå°SQLæ³¨å…¥æ¼æ´ CNVD-2021-01363] è‡´è¿œOA | [è‡´è¿œOAè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´] æµªæ½®äº‘ClusterEngineV4.0 | [æµªæ½® ClusterEngineV4.0 ä»»æ„å‘½ä»¤æ‰§è¡Œ] OneBlogâ‰¤V2.2.1 | [OneBolgè¿œç¨‹å‘½ä»¤æ‰§è¡Œ][OneBlog å°äºv2.2.1 è¿œç¨‹å‘½ä»¤æ‰§è¡Œæ¼æ´] 2021.04.10 æµªæ½®äº‘ClusterEngineV4.0 | [æµªæ½®ClusterEngineV4.0 sysShell ä»»æ„å‘½ä»¤æ‰§è¡Œæ¼æ´] æµªæ½®äº‘ClusterEngineV4.0 | [æµªæ½®ClusterEngineV4.0 ä»»æ„ç”¨æˆ·ç™»å½•æ¼æ´] é½æ²»å ¡å’æœº | [é½æ²»å ¡å’æœºä»»æ„ç”¨æˆ·ç™»å½•æ¼æ´] å±±ç»ˆç«¯å®‰å…¨ç³»ç»Ÿ V8/V9 | [é‡‘å±±ç»ˆç«¯å®‰å…¨ç³»ç»Ÿ V8/V9å­˜åœ¨æ–‡ä»¶ä¸Šä¼ æ¼æ´] å¥‡å®‰ä¿¡NS-NGFW ç½‘åº·é˜²ç«å¢™ | [å¥‡å®‰ä¿¡ ç½‘åº·ä¸‹ä¸€ä»£é˜²ç«å¢™ RCE äº‘å°šåœ¨çº¿å®¢æœç³»ç»Ÿ | å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸Šä¼  æ³›å¾®OA8 e-mobile | [æ³›å¾®OA e-mobile4.0-6.6 SQLæ³¨å…¥æ¼æ´] æ³›å¾®OA8 e-mobile | [æ³›å¾®e-mobile 0day] 2021.04.11 FOFAæŒ‡çº¹ title=â€œæµåª’ä½“ç®¡ç†æœåŠ¡å™¨â€ | [HIKVISION æµåª’ä½“ç®¡ç†æœåŠ¡å™¨ åå°ä»»æ„æ–‡ä»¶è¯»å–æ¼æ´ CNVD-2021-14544] Fastjson 0day | ç–‘ä¼¼0dayï¼Œè§†é¢‘ç¡®è®¤å­˜åœ¨ Apache Solr | [Apache Solr ä»»æ„æ–‡ä»¶ä¸‹è½½/SSRF POC] 2021.04.12 Google Chromeâ‰¤89.0.4389.114 | [Chrome è¿œç¨‹ä»£ç æ‰§è¡Œ0Dayæ¼æ´] Nagios Network Analyzer | [Nagios Network Analyzer SQL æ³¨å…¥æ¼æ´- CVE-2021-28925] è“å‡ŒOA | [è“å‡ŒOAå¯†ç é‡ç½®æ¼æ´] ç‘æ· | [é”æ·RG-UACç»Ÿä¸€ä¸Šç½‘è¡Œä¸ºç®¡ç†å®¡è®¡ç³»ç»Ÿå­˜åœ¨è´¦å·å¯†ç ä¿¡æ¯æ³„éœ²][é”æ· RG-UAC ç»Ÿä¸€ä¸Šç½‘è¡Œä¸ºç®¡ç†å®¡è®¡ç³»ç»Ÿ è´¦æˆ·ç¡¬ç¼–ç æ¼æ´] 2021.04.13 IBOSæ•°æ®åº“æ¨¡å— | [IBOS æ•°æ®åº“æ¨¡å— ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´] PHP zerodium | [PHP zerodiumåé—¨æ¼æ´] è¿…é›· | [è¿…é›·11å­˜åœ¨äºŒè¿›åˆ¶æ¼æ´ - CNVD-2021-18274] Apache Solr | [Apache SolræœåŠ¡å™¨ç«¯è¯·æ±‚ä¼ªé€ æ¼æ´ - CVE-2021-27905] Apache Solr | [Apache Solræ•°æ®é›†è¯»å†™æ¼æ´ - CVE-2021-29943] Apache Solr | [Apache Solræ•æ„Ÿä¿¡æ¯æ³„æ¼æ¼æ´ - CVE-2021-29262] 2021.04.14 Apache OFBizååºåˆ—åŒ–æ¼æ´ | [Apache OFBiz RMIååºåˆ—åŒ–æ¼æ´ CVE-2021-26295] EMPå¹³å° | [EMPå¹³å°ä»»æ„æ–‡ä»¶ä¸Šä¼ æ¼æ´] JD-FreeFuckåå°å‘½ä»¤æ‰§è¡Œ | [JD-FreeFuck åå°å‘½ä»¤æ‰§è¡Œæ¼æ´] Microsoft Exchange | [Microsoft Exchange Serverè¿œç¨‹æ‰§è¡Œä»£ç æ¼æ´] å¤©èä¿¡ï¼ˆå†å²æ¼æ´ï¼‰ | [å¤©èä¿¡æ¥å…¥ç½‘å…³ç³»ç»Ÿå­˜åœ¨å¼±å£ä»¤ - CNVD-2021-08407 å¥‡å®‰ä¿¡å¤©æ“ç»ˆç«¯å®‰å…¨ç®¡ç†ç³»ç»Ÿ | å­˜åœ¨ä»»æ„æ–‡ä»¶ä¸Šä¼  Google Chrome V8å¼•æ“ | [Google ChromeV8å¼•æ“è¿œç¨‹ä»£ç æ‰§è¡Œ0dayæ¼æ´] 2021.04.15 é€šè¾¾OA | [é€šè¾¾OAå­˜åœ¨å‘½ä»¤æ‰§è¡Œæ¼æ´ - CNVD-2021-21890] Joomla | [Joomla XSSæ¼æ´] TongWeb | [tongwebæ–‡ä»¶ä¸Šä¼ æ¼æ´] 2021.04.16 Weblogic | [ Weblogic T3 ååºåˆ—åŒ–è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´] å¾®ä¿¡ | [é’è—¤æ•è·åœ¨é‡å¾®ä¿¡ 0day æ¼æ´ï¼ˆ chrome 0day åˆ©ç”¨ï¼‰][åˆ©ç”¨å¾®ä¿¡å†…ç½®æµè§ˆå™¨ Chrome æ¼æ´å®ç°è¿œæ§] æµªæ½® ERP | [æµªæ½® ERP ç³»ç»Ÿè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´] 2021.04.17 æ·±ä¿¡æœ | [æ·±ä¿¡æœå®‰å…¨æ„ŸçŸ¥å¹³å°å­˜åœ¨å­˜å‚¨å‹è·¨ç«™è„šæœ¬æ¼æ´ æ³›å¾® | [æ³›å¾®æŸç³»ç»Ÿç–‘ä¼¼å­˜åœ¨æ–‡ä»¶ä¸Šä¼ æ¼æ´] TP-COUPON | [ TP-COUPON å­˜åœ¨ SQL æ³¨å…¥æ¼æ´ - CNVD-2021-21889 ] 2021.04.18 å°é±¼æ˜“è¿è§†é¢‘ä¼šè®®ç³»ç»Ÿ | [å°é±¼æ˜“è¿è§†é¢‘ä¼šè®®ç³»ç»Ÿå­˜åœ¨ 0day ] H3C SecPath è¿ç»´å®¡è®¡ç³»ç»Ÿ | [ H3C SecPath è¿ç»´å®¡è®¡ç³»ç»Ÿä»»æ„ç”¨æˆ·ç™»å½•æ¼æ´] Coremail | [å†å²æ¼æ´ oremail é‚®ç®±ç³»ç»Ÿè·¯å¾„ç©¿è¶Šæ¼æ´] 2021.04.20 å¾®ä¿¡ | [å¾®ä¿¡æœ€æ–°ç‰ˆæœ¬ 3.2.11.151 Google å†…æ ¸ poc åˆ©ç”¨ä¸Šçº¿ cs æ–¹å¼]","categories":[{"name":"dev","slug":"dev","permalink":"http://debug.cool/categories/dev/"}],"tags":[]},{"title":"Python3çš„ä¸€ä¸ªæ²™ç®±é€ƒé€¸æŠ€å·§","slug":"sandboxEscapePy3","date":"2021-03-31T16:10:00.000Z","updated":"2021-05-13T08:25:37.113Z","comments":true,"path":"2021/04/01/sandboxEscapePy3/","link":"","permalink":"http://debug.cool/2021/04/01/sandboxEscapePy3/","excerpt":"Emil Lerner(twitter @emil_lerner) ä¸Šä¸ªæœˆå‘äº†ä¸ªæ¨ï¼Œå½“æ—¶çœ‹åˆ°äº†æ²¡æƒ³åˆ°å¾ˆå¥½çš„è§£å†³æ–¹æ³•ã€‚","text":"Emil Lerner(twitter @emil_lerner) ä¸Šä¸ªæœˆå‘äº†ä¸ªæ¨ï¼Œå½“æ—¶çœ‹åˆ°äº†æ²¡æƒ³åˆ°å¾ˆå¥½çš„è§£å†³æ–¹æ³•ã€‚ ä»–æå‡ºäº†è¿™æ ·ä¸€ä¸ªé—®é¢˜: 1234code = input()for c in &#x27;hui&quot;\\&#x27;(&#x27;: assert c not in codeexec(code, &#123;&#x27;__builtins__&#x27;: &#123;&#125;&#125;) 3æœˆ15å·çš„æ—¶å€™ Arthur Khashaev (twitter @Invizory)ç»™äº†ä¸ªè§£æ³•ï¼ŒæƒŠä¸ºå¤©äººï¼Œæ¥å’Œå¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚ 123456789101112b=[].__class__.__base__d=[].__doc__n=d.__doc__[31]__bu\u001dlt\u001dns__[n+n+d[13]+d[1:4]+d[139]+n+d[23]+d[3]+d[12]+d[17]*2+n+n]=lambda*_:b@b.__class__.__subclasses__class s:_@s[84].load_module@lambda _:d[32]+d[17]class o:_@o.system@lambda _:d[2]+d[139]class _:_ identifier è¿‡æ»¤ç»•è¿‡ è¿™æ®µä»£ç çš„ç¬¬ä¸€ä¸ªç¥å¥‡ä¹‹å¤„å°±åœ¨äº python3 çš„ interpreter ç«Ÿç„¶ä¼šåš unicode normalizeï¼Œè¿™ä¸ªç‰¹æ€§æ€» æ„Ÿè§‰ä»¥å‰ä»æ¥æ²¡çœ‹è¿‡ï¼Œç»è¿‡ä¸€å®šçš„è€ƒè¯æ‰¾åˆ°äº†å®æ®ï¼Œæ–‡æ¡£ä¸­å†™åˆ°: Python 3.0 introduces additional characters from outside the ASCII range (see PEP 3131). For these characters, the classification uses the version of the Unicode Character Database as included in the unicodedata module. ä» python 3.0 å¼•å…¥çš„å¯¹ name çš„å¤„ç†ï¼Œä» PEP 3131 ä¸­å¯çŸ¥: The following changes will need to be made to the parser: If a non-ASCII character is found in the UTF-8 representation of the source code, a forward scan is made to find the first ASCII non-identifier character (e.g. a space or punctuation character) The entire UTF-8 string is passed to a function to normalize the string to NFKC, and then verify that it follows the identifier syntax. No such callout is made for pure-ASCII identifiers, which continue to be parsed the way they are today. The Unicode database must start including the Other_ID_{Start|Continue} property. If this specification is implemented for 2.x, reflective libraries (such as pydoc) must be verified to continue to work when Unicode strings appear in dict slots as keys. å…·ä½“æ¥è¯´å°±æ˜¯å¦‚æœ id åç§°ä½¿ç”¨äº†é ASCII å­—ç¬¦ï¼Œåˆ™ä¼šå°†æ•´ä¸ª name ä¼ ç»™ unicodedb å»åš NFKC normalizeï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å­—ç¬¦ä¼šè¢«è‡ªåŠ¨çš„æ›¿æ¢ï¼Œä»è€Œæ­£å¸¸è§£æã€‚ å› æ­¤ Python 3 èµ·é’ˆå¯¹ identifier çš„è¿‡æ»¤éƒ½å¯ä»¥ä½¿ç”¨è¯¥æ–¹æ³•ç»•è¿‡ã€‚ å‡½æ•°è°ƒç”¨ç»•è¿‡ æœ¬é¢˜ç¬¬äºŒä¸ªéš¾ç‚¹åœ¨äºï¼Œä¸å…è®¸ä½¿ç”¨å·¦æ‹¬å·ï¼Œå› æ­¤æ— æ³•åšç›´æ¥çš„å‡½æ•°è°ƒç”¨ã€‚æœ‰åŒå­¦å°±è¦è¯´äº†ï¼Œå¯ä»¥é€šè¿‡ä¿® æ”¹ add ç­‰é»˜è®¤è¡Œä¸ºæ¥åšé—´æ¥çš„å‡½æ•°è°ƒç”¨ï¼Œä¸è¿‡æˆ‘æ²¡æœ‰æ‰¾åˆ°å†…ç½®çš„å¯ä»¥ç›´æ¥ä¿®æ”¹ add å±æ€§çš„ å¯¹è±¡ï¼Œè‹¥æœ‰å‘ç°æœ›å‘ŠçŸ¥ã€‚ Arthur ä½¿ç”¨çš„æ–¹æ³•æ¯”è¾ƒå·§å¦™ï¼Œé€šè¿‡ä¿®æ”¹ build_class ä»è€Œä¿®æ”¹äº†å£°æ˜ class æ—¶çš„é»˜è®¤è¡Œä¸ºï¼Œ 1__bu\u001dlt\u001dns__[n+n+d[13]+d[1:4]+d[139]+n+d[23]+d[3]+d[12]+d[17]*2+n+n]=lambda*_:b è¿™ä¸€è¡Œå°†ä¿®æ”¹åˆ›å»º class æ—¶çš„é»˜è®¤è¡Œä¸ºï¼Œä½¿å¾—æ¯ä¸ª class å£°æ˜éƒ½ä¼šè¿”å› object type: 1__builtins__[&#x27;__build_class__&#x27;] = lambda*_:b è€Œè¿™é‡Œ: 12@b.__class__.__subclasses__ class s:_ åœ¨åˆ›å»º class çš„æ—¶å€™ç›¸å½“äºè®© 12s = b(func, name, /, *bases, [metaclass], **kwds) # å³ s = objects = b.__class__.__subclasses__(s) # å³ s = b.__class__.__subclasses__(object) ä»è€Œé€šè¿‡ class s è·å¾—äº†objectçš„å­ç±»åˆ—è¡¨ åç»­åŸç†ç±»ä¼¼ä¸å†èµ˜è¿°ã€‚è¿™ä¸ªå½¢åŠ¿æœ‰äº›ç±»ä¼¼äº PHP ä¸­çš„å›è°ƒå‹åâ»”ï¼Œå¯¹äº function å…¶å®ä¹Ÿæœ‰ç±»ä¼¼çš„å½¢ åŠ¿å¯ä»¥è¾¾åˆ°ä¸€æ ·çš„æ•ˆæœ: 123@b.__class__.__subclasses__ @cdef d(): pass å› æ­¤å€¼å¾—è®¨è®ºçš„é—®é¢˜è½¬åŒ–ä¸ºäº†: python ä¸­çš„ç±»ä¼¼å›è°ƒçš„è¡Œä¸ºéƒ½æœ‰å“ªäº›?","categories":[{"name":"sec","slug":"sec","permalink":"http://debug.cool/categories/sec/"}],"tags":[]},{"title":"Windows10ä¸‹WSLå¼€å‘ç¯å¢ƒæ­å»º","slug":"tipsWSL","date":"2021-01-20T14:44:00.000Z","updated":"2021-05-07T14:38:46.500Z","comments":true,"path":"2021/01/20/tipsWSL/","link":"","permalink":"http://debug.cool/2021/01/20/tipsWSL/","excerpt":"å·¥ä½œç¯å¢ƒçš„ä¸€æ¶å°å¼æœºæ˜¯Windows10ç³»ç»Ÿï¼ŒWindowsç³»ç»Ÿå¯¹å¼€å‘è€…æ¥è¯´å¹¶ä¸æ˜¯å¾ˆå‹å¥½ï¼ˆ.netåŠWindowså†…æ ¸å¼€å‘è€…é™¤å¤–ï¼Œæ¯”å¦‚ä¸€äº›æ‰©å±•åŒ…ï¼Œä¾‹å¦‚PHPçš„swooleï¼Œåœ¨Windowsä¸Šç°åœ¨æ²¡æœ‰ç›´æ¥å®‰è£…çš„è§£å†³æ–¹æ¡ˆï¼‰ã€‚","text":"å·¥ä½œç¯å¢ƒçš„ä¸€æ¶å°å¼æœºæ˜¯Windows10ç³»ç»Ÿï¼ŒWindowsç³»ç»Ÿå¯¹å¼€å‘è€…æ¥è¯´å¹¶ä¸æ˜¯å¾ˆå‹å¥½ï¼ˆ.netåŠWindowså†…æ ¸å¼€å‘è€…é™¤å¤–ï¼Œæ¯”å¦‚ä¸€äº›æ‰©å±•åŒ…ï¼Œä¾‹å¦‚PHPçš„swooleï¼Œåœ¨Windowsä¸Šç°åœ¨æ²¡æœ‰ç›´æ¥å®‰è£…çš„è§£å†³æ–¹æ¡ˆï¼‰ã€‚ åˆšå¼€å§‹ä¸€æ®µæ—¶é—´(WSLæ²¡æœ‰å‡ºæ¥é‚£ä¼šï¼Œä¹Ÿä¸æƒ³ç”¨è™šæ‹Ÿæœºå’ŒDocker)æŠŠå°å¼æœºæ”¹æˆLinuxç³»ç»Ÿï¼Œä½†æ˜¯å‘¢ï¼Œå„ç§åŠå…¬è½¯ä»¶åœ¨Linuxå¹³å°å°±å¾ˆç³Ÿå¿ƒäº†ï¼Œæ¯”å¦‚å¾®ä¿¡ã€QQ è¿™äº›è½¯ä»¶ï¼Œåœ¨Linuxæ²¡æœ‰å®˜æ–¹ç‰ˆæœ¬ï¼Œé€šè¿‡é»‘ç§‘æŠ€è¿›è¡Œç§»æ¤çš„ç‰ˆæœ¬ä¼šå‡ºç°å„ç§æ•…éšœï¼Œæ¯”å¦‚å‘é€æ–‡æ¡£éƒ½å¾—åšç£ç›˜ç©ºé—´å…±äº«ï¼Œç®€ç›´è®©äººå´©æºƒã€‚ å¦‚æœæ˜¯çº¯ç²¹åªè´Ÿè´£å†™ä»£ç çš„å·¥ä½œåœºæ™¯å€’æ— æ‰€è°“äº†ï¼Œä½†æ˜¯éœ€è¦å’Œå®¢æˆ·ã€åŒäº‹è¿›è¡Œæ²Ÿé€šï¼Œæ¶‰åŠåˆ°è§†é¢‘ã€éŸ³é¢‘ã€æ–‡ä»¶ä¼ è¾“ï¼Œç®€ç›´ç‚¸æ¯›ã€‚ã€‚ã€‚ èƒŒæ™¯ æŸå¤©è£…å¤‡å‡çº§å¼ºåŒ–äº†ä¸‹ï¼Œå†…å­˜æœ‰16Gï¼Œè¯•ç€å®‰è£…äº†Windowsçš„WSLï¼Œè¿™æ˜¯å¾®è½¯è‡ªç ”çš„æ¶æ„ï¼Œä¸ºäº†å…¼å®¹Linuxå†…æ ¸ã€‚ç®€å•æ¥è®²å°±æ˜¯Windowsç³»ç»Ÿå†…ç½®äº†ä¸€å¥—Linuxå†…æ ¸ï¼Œç›´æ¥åšäº†ç³»ç»Ÿé—´çš„æ˜ å°„ã€‚ å‡†å¤‡ ææ–™ Windows10 wsl Ubuntu18.appx WSL ç¯å¢ƒåˆå§‹åŒ– æ‰“å¼€Windowsè‡ªå¸¦çš„power shellç»ˆç«¯ï¼Œæ‰§è¡ŒEnable-WindowsOptionalFeature -Online -FeatureName Microsoft-Windows-Subsystem-Linuxå‘½ä»¤ï¼Œå°±åœ¨Windowsä¸Šå®‰è£…å¥½äº†wslç¯å¢ƒã€‚ æ¥ç€ä¸‹è½½ä¸€ä»½Ubuntu18.04é•œåƒï¼ŒåŒæ ·æ˜¯åœ¨power shellç»ˆç«¯æ‰§è¡Œå‘½ä»¤Invoke-WebRequest -Uri https://aka.ms/wsl-ubuntu-1804 -OutFile Ubuntu.appx -UseBasicParsingï¼Œå½“å‰ç›®å½•è·¯å¾„ä¸‹å°±ä¼šå‡ºç°ä¸€ä¸ªUbuntuçš„appxè½¯ä»¶ï¼Œç‚¹å‡»å®‰è£…å³å¯ã€‚ Ubuntu é…ç½® ç‚¹å‡»å®‰è£…Ubuntu.appxåï¼Œç³»ç»Ÿä¼šå¼¹å‡ºä¸€ä¸ªé»‘è‰²çª—å£ï¼Œæç¤ºä½ è¾“å…¥unixç³»ç»Ÿçš„ç”¨æˆ·ååŠå¯†ç ï¼Œæ­£å¸¸é…ç½®å³å¯ã€‚ ä¿®æ”¹é•œåƒæº æˆ‘ä»¬éœ€è¦æŠŠLinuxç³»ç»Ÿçš„è½¯ä»¶é•œåƒåœ°å€æ”¹æˆå›½å†…çš„é•œåƒåœ°å€ï¼Œå¦åˆ™å®‰è£…è½¯ä»¶åŒ…ä¼šå¡åˆ°ä½ æ€€ç–‘äººç”Ÿï¼Œæˆ‘ä»¬å…ˆåˆ°ç½‘ä¸Šæœç´¢ä¸€ä¸‹Ubuntu18å›½å†…é•œåƒæºï¼ˆè¿™é‡Œé€‰ç”¨äº†é˜¿é‡Œçš„é•œåƒæºï¼‰ï¼Œæºé“¾æ¥å¦‚ä¸‹ï¼š 1234567891011# alibaba source listdeb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse å¾—åˆ°éœ€è¦çš„æºé“¾æ¥åï¼Œå†åˆ°Ubuntuç³»ç»Ÿé‡Œæ›´æ”¹æºæ–‡ä»¶å³å¯ï¼Œå‘½ä»¤æ“ä½œå¦‚ä¸‹ï¼š 1234567# å…ˆå¤‡ä»½åŸæ–‡ä»¶sudo cp /etc/apt/source.list /etc/apt/source.list-back# å†æ›´æ”¹åŸæ–‡ä»¶sudo vim /etc/apt/source.list# å°†ä¸Šé¢çš„æºé“¾æ¥æ‹·è´è¿›æ¥ï¼Œå†ä¿å­˜é€€å‡º# æ›´æ–°ç³»ç»Ÿçš„æºåŒ…ç®¡ç†sudo apt-get update &amp;&amp; sudo apt-get upgrade -y è¿™æ ·ï¼Œæˆ‘ä»¬å°±é…ç½®å¥½äº†å›½å†…é•œåƒæºã€‚ éƒ¨ç½² nginx webå¼€å‘ï¼Œä¸€èˆ¬webä»£ç†æœåŠ¡å™¨é€‰æ‹©apacheæˆ–è€…nginxï¼Œè¿™é‡Œè®²nginxçš„éƒ¨ç½²ï¼Œç›¸åº”çš„æ“ä½œå‘½ä»¤å¦‚ä¸‹ï¼š 123456# å®‰è£…nginxï¼Œç­‰å¾…ä¸€æ®µæ—¶é—´å³å¯ã€‚sudo apt-get install nginx# åˆ›å»ºæˆ‘ä»¬çš„vhostæ–‡ä»¶å¤¹mkdir ~/vhost# æ›´æ”¹nginxé…ç½®sudo vim /etc/nginx/nginx.conf åœ¨ include /etc/nginx/site-avaliable ä¸‹å¼•å…¥æˆ‘ä»¬çš„ vhost æ–‡ä»¶å¤¹ï¼š 1include /home/kirk/vhost/*.conf; æœ¬åœ° hosts é…ç½®ä¸‹å¼€å‘åŸŸå 123sudo vim /etc/hosts# å¢åŠ ä¸€æ¡æŒ‡å‘è®°å½•127.0.0.1 api.kirk.com ç¼–å†™ vhost æ–‡ä»¶,å¦‚ vim ~/vhost/Kirk.conf 12345678910111213141516171819202122232425262728# API è§£æserver &#123; listen 80; server_name api.kirk.com; # è¿™é‡Œçš„é¡¹ç›®åœ°å€æ˜¯å®¿ä¸»æœºçš„é¡¹ç›®åœ°å€ï¼Œå› ä¸ºåœ¨Windowså†…ç½®çš„Linuxç³»ç»Ÿä¸­ï¼Œè¯»å–å®¿ä¸»æœºWindowsæ–‡ä»¶çš„æ–¹å¼æ˜¯ä½¿ç”¨æŒ‚è½½çš„æ¨¡å¼ï¼Œ # æŠŠWindowsç³»ç»Ÿç›˜å½“æˆæŒ‚åœ¨ç›˜è¿›è¡Œå¤„ç†ï¼Œä¾‹å¦‚/mnt/dè¡¨ç¤ºWindowsçš„Dç›˜ï¼Œæˆ‘ä»¬åœ¨Dç›˜github/kirkæ–‡ä»¶å¤¹ä¸‹å†™äº†ä¸€ä¸ªphpæ–‡ä»¶ï¼Œé‡Œé¢æ‰“å°ä¸€ä¸ªphpinfo(); root &quot;/mnt/d/github/kirk&quot;; location / &#123; index index.php index.html error/index.html; if (!-e $request_filename) &#123; rewrite ^(.*)$ /index.php?s=/$1 last; break; &#125; autoindex off; &#125; location ~ \\.php(.*)$ &#123; # è®°ä½è¿™é‡Œfastcgiç›‘å¬çš„æ˜¯9004ç«¯å£ï¼Œåé¢é…ç½®php-fpmçš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œå› ä¸ºfastcgiè¦å’Œphp-fpmç«¯å£ä¿æŒç»Ÿä¸€ fastcgi_pass 127.0.0.1:9004; fastcgi_index index.php; fastcgi_split_path_info ^((?U).+\\.php)(/?.+)$; fastcgi_param SCRIPT_FILENAME $document_root$fastcgi_script_name; fastcgi_param PATH_INFO $fastcgi_path_info; fastcgi_param PATH_TRANSLATED $document_root$fastcgi_path_info; include fastcgi_params; &#125;&#125; ä¿å­˜å®Œconfæ–‡ä»¶åï¼Œå†æ‰§è¡Œsudo service nginx reloadè¿›è¡Œé‡è½½nginxçš„é…ç½®ã€‚ å®‰è£… php è¿™é‡Œé€‰ç”¨äº†php74ç‰ˆæœ¬ï¼Œå…·ä½“å‘½ä»¤å¦‚ä¸‹ï¼š 12345678# å…ˆå®‰è£…ä¸€ä¸ªè½¯ä»¶ä¸­å¿ƒç»„ä»¶sudo apt-get install software-properties-common# å†æ·»åŠ ä¸€ä¸ªphpçš„ç¬¬ä¸‰æ–¹æºï¼ˆå› ä¸ºå®˜æ–¹æºçš„phpç‰ˆæœ¬ä¸å¤§é€‚ç”¨ï¼Œä¸€ä¸ªæ˜¯ç‰ˆæœ¬å°‘ï¼Œå¦ä¸€ä¸ªæ˜¯æ‰©å±•åŒ…æ¯”è¾ƒå°‘ï¼‰sudo add-apt-repository ppa:ondrej/php# å†åˆ·æ–°ä¸€ä¸‹åŒ…ç®¡ç†å™¨sudo apt-get update# å®‰è£…å¯¹åº”ç‰ˆæœ¬çš„phpåŠæ‰©å±•åŒ…ï¼Œæ‰©å±•åŒ…è‡ªè¡ŒæŒ‰éœ€æ·»åŠ sudo apt-get install php7.4 php7.4-fpm php7.4-mysql php7.4-gd php7.4-mbstring php7.4-redis å¤„ç†php-fpmï¼Œæ“ä½œå¦‚ä¸‹ï¼š 123456# ä¿®æ”¹php-fpmç›‘å¬çš„ç«¯å£ï¼Œä¸nginxçš„fastcgiä¿æŒä¸€è‡´sudo vim /etc/php/74/fpm/pool.d/www.conf# æ‰¾åˆ°listen = /run/php/php7.4-fpm.sock ,å¹¶æ”¹æˆä¸‹é¢çš„ç›‘å¬é…ç½®listen = 127.0.0.1:9004# ä¿®æ”¹ä¿å­˜æˆåŠŸåï¼Œé‡å¯php-fpmå³å¯sudo service php7.4-fpm restart è¿™æ ·æ‰“å¼€Windowsçš„æµè§ˆå™¨ï¼Œè®¿é—®æˆ‘ä»¬åˆšåˆšé…ç½®çš„ç«™ç‚¹http://api.kirk.comï¼Œå‡ºç°phpç‰ˆæœ¬ä¿¡æ¯å³è¡¨ç¤ºé…ç½®æˆåŠŸã€‚ ç„¶åï¼Œçœ‹äº†ä¸‹æ€§èƒ½æŸè€—ï¼ŒWindowsåŸºæœ¬çš„åº”ç”¨åŠ ä¸Šwslå…±æ¶ˆè€—3Gå†…å­˜ï¼Œè¿˜æ˜¯æ¯”é›†æˆè½¯ä»¶PHPstudyèŠ‚çœäº†ä¸€ä¸¢ä¸¢å†…å­˜ï¼Œæœ€ä¸»è¦çš„æ˜¯ä»¥å‰Windowsä¸èƒ½å®‰è£…çš„æ‰©å±•ç°åœ¨å¯ä»¥éšæ„å®‰è£…äº†~ å†è¯•ç€æ‰“å¼€å¾®ä¿¡ã€ä¼ä¸šå¾®ä¿¡ã€å¼€å‘è½¯ä»¶ IDEï¼Œå¥½å®¶ä¼™ï¼Œç›´æ¥è¾¾åˆ°8Gå†…å­˜ï¼Œå¹³æ—¶åŠå¤©æ²¡æœ‰å›å¤ä½ ä»¬ä¿¡æ¯ä¸æ˜¯æ•…æ„ä¸å›ï¼Œæ˜¯ç”µè„‘å¡æ­»äº†åœ¨ç­‰å¾…ã€‚ å®‰è£… python ç¯å¢ƒ å•å•åªæœ‰ä¸€ä¸ªphpæ€ä¹ˆç©æ•°æ®å‘¢ï¼Œéœ€è¦éƒ¨ç½²ä¸‹pythonï¼ŒUbuntuè‡ªå¸¦äº†python3ï¼Œä½†æ˜¯æˆ‘ä»¬éœ€è¦æŒ‰ç…§ä¸åŒé¡¹ç›®åšç¯å¢ƒéš”ç¦»ï¼Œæ‰€ä»¥éœ€è¦ç‰¹æ®Šå¤„ç†ä¸‹éš”ç¦»è½¯ä»¶çš„é…ç½®ï¼š 1234567891011121314151617181920212223242526# å…ˆçœ‹çœ‹Ubuntuæœ‰æ²¡æœ‰è‡ªå¸¦python3ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤python3# å¦‚æœè¿›å…¥äº†python3æ“ä½œç•Œé¢ï¼Œè¡¨ç¤ºç³»ç»Ÿå·²å®‰è£…ï¼Œåä¹‹éœ€è¦æˆ‘ä»¬è‡ªå·±å®‰è£….# å®‰è£…å‘½ä»¤sudo apt-get install python3# éªŒè¯æ˜¯å¦å®‰è£…pip åŒ…ç®¡ç†å™¨pip3 -V# å¦‚æœæ²¡æœ‰å‡ºç°pip3çš„ç‰ˆæœ¬ä¿¡æ¯ï¼Œä»£è¡¨ç³»ç»Ÿæ²¡æœ‰å®‰è£…ï¼Œéœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å®‰è£…sudo apt-get install pip3# å®‰è£…å¥½äº†ä¹‹åï¼Œå¼€å§‹å®‰è£…pythonè™šæ‹Ÿç¯å¢ƒsudo pip3 install virtualenvsudo pip3 install virtualenvwrapper# é…ç½®åŒ…å¼•å¯¼sudo vim ~/.bashrc# åœ¨æœ€ååŠ ä¸Šè¿™å‡ æ¡å‘½ä»¤ï¼Œåˆ†åˆ«è¡¨ç¤º1.è™šæ‹Ÿç¯å¢ƒçš„å·¥ä½œç›®å½•ã€‚2.è™šæ‹ŸåŒ…ç”¨python3è¿›è¡Œé©±åŠ¨ã€‚3.åŠ è½½è™šæ‹ŸåŒ…æ‰§è¡Œè„šæœ¬ã€‚export WORKON_HOME=$HOME/.virtualenvsexport VIRTUALENVWRAPPER_PYTHON=/usr/bin/python3source ~/.local/bin/virtualenvwrapper.sh# ä¿å­˜é€€å‡ºåsource ~/.bashrc# è¿™æ ·pythonè™šæ‹Ÿç¯å¢ƒç®¡ç†åŒ…å°±é…ç½®å¥½äº†ï¼Œæˆ‘ä»¬å¯ä»¥ç”¨å¦‚ä¸‹å‘½ä»¤åˆ›å»ºå¯¹åº”çš„è™šæ‹Ÿç¯å¢ƒmkvirtualenv -p python3 Kirk# é€€å‡ºpythonè™šæ‹Ÿç¯å¢ƒdeactive# åˆ é™¤å¯¹åº”è™šæ‹Ÿç¯å¢ƒrmvirtualenv Kirk è¿™æ ·é€šè¿‡virtualenvwrapperè¿›è¡Œç®¡ç†pythonçš„è™šæ‹Ÿç¯å¢ƒï¼Œä»è€Œå®ç°ä¸åŒçš„é¡¹ç›®ä½¿ç”¨ä¸åŒçš„pythonåŒ…ç®¡ç†ã€‚ å…¶ä»–çš„ç¯å¢ƒé…ç½®ä¼šé™†ç»­æ›´æ–°ï¼Œto be continueâ€¦","categories":[{"name":"tips","slug":"tips","permalink":"http://debug.cool/categories/tips/"}],"tags":[]},{"title":"DiyExpress - è‡ªå®šä¹‰è¡¨è¾¾å¼è®¡ç®—å¼•æ“","slug":"devDiyExpress","date":"2020-12-08T16:00:00.000Z","updated":"2021-05-07T14:39:55.196Z","comments":true,"path":"2020/12/09/devDiyExpress/","link":"","permalink":"http://debug.cool/2020/12/09/devDiyExpress/","excerpt":"æˆ‘ä»¬åœ¨æ•°æ®åˆ†æçš„ä¸šåŠ¡ä¸Šï¼Œç»å¸¸ä¼šæœ‰ä¸€äº›æ¯”è¾ƒè„‘æ´å¤§å¼€å´åˆå¾ˆå®ç”¨çš„éœ€æ±‚ã€‚ æ¯”å¦‚æœ‰ä¸ªåœºæ™¯ï¼Œå½“æˆ‘ä»¬å°†æ•°æ®åˆ†æçš„â€è‡ªä¸»æƒâ€œäº¤ç»™ç”¨æˆ·ã€‚","text":"æˆ‘ä»¬åœ¨æ•°æ®åˆ†æçš„ä¸šåŠ¡ä¸Šï¼Œç»å¸¸ä¼šæœ‰ä¸€äº›æ¯”è¾ƒè„‘æ´å¤§å¼€å´åˆå¾ˆå®ç”¨çš„éœ€æ±‚ã€‚ æ¯”å¦‚æœ‰ä¸ªåœºæ™¯ï¼Œå½“æˆ‘ä»¬å°†æ•°æ®åˆ†æçš„â€è‡ªä¸»æƒâ€œäº¤ç»™ç”¨æˆ·ã€‚ ç”±ç”¨æˆ·æ¥å†³å®šè‡ªå·±éœ€è¦è®¡ç®—åˆ†æä»€ä¹ˆç»´åº¦çš„æ•°æ®ï¼Œè¿™ä¸ªéœ€æ±‚ç¡®å®æ˜¯ä¸€ä¸ªç—›ç‚¹ï¼Œèƒ½è§£å†³è¿™ä¸ªéœ€æ±‚ï¼Œä¸å°±æ˜¯ä¸ºç”¨æˆ·åˆ›é€ äº†ä»·å€¼ä¹ˆã€‚ å› æ­¤ï¼ŒèŠ±äº†ç‚¹æ—¶é—´å†™äº†ä¸€å¥—è‡ªå®šä¹‰è¡¨è¾¾å¼è®¡ç®—å¼•æ“ã€‚ å·²çŸ¥ç”¨æˆ·æ˜¯æœ‰ä¸€å®šExcelå…¬å¼åŸºç¡€çš„ï¼Œéœ€è¦æä¾›ä¸€ä¸ªäº¤äº’ç•Œé¢è®©ä»–è¾“å…¥ä»–å®šä¹‰çš„ç±»ä¼¼Excelå…¬å¼çš„ä¸€æ®µç®€å•å…¬å¼ï¼Œå…¶ä¸­çš„å„ä¸ªå‚æ•°æ˜¯è‡ªå®šä¹‰è¡¨å•ä¸­å„ä¸ªå­—æ®µæ‰€å¡«å……çš„æ•°æ®ã€‚å¦‚ä¸‹ï¼š 1&#123;&#123;é”€å”®è¿”ç°&#125;&#125;=if ( &#123;&#123;æ•°é‡&#125;&#125; &gt;= 100 AND (&#123;&#123;äº§å“ç±»å‹&#125;&#125; == &#x27;äº§å“A&#x27; OR &#123;&#123;äº§å“ç±»å‹&#125;&#125; == &#x27;äº§å“B&#x27;), &#123;&#123;æˆå•é‡‘é¢&#125;&#125; * 0.7, &#123;&#123;æˆå•é‡‘é¢&#125;&#125;*0.5) + 100 åŒèŠ±æ‹¬å·é‡Œé¢çš„æ˜¯æŒ‡å®šçš„å­—æ®µï¼ˆç”¨æ¥ä»£è¡¨è¯¥å­—æ®µçš„å–å€¼ dataï¼‰ï¼Œå•å¼•å·æˆ–è€…åŒå¼•å·æ˜¯æŒ‡å®šçš„å–å€¼ã€‚ æˆ‘ä»¬çš„ç›®æ ‡æ˜¯ç¨‹åºæ ¹æ®ç”¨æˆ·å®šä¹‰çš„å…¬å¼è®¡ç®—å¯¹åº”çš„æ•°æ®ï¼Œé‚£ä¹ˆæ ¸å¿ƒç‚¹åœ¨äºå¦‚ä½•è¯†åˆ«ç”¨æˆ·å®šä¹‰çš„å…¬å¼ã€‚ ä¾æ—§æ˜¯è¢«â€œè‡ªå®šä¹‰â€ç»™å‘äº†ï¼Œéœ€è¦è¯†åˆ«ç”¨æˆ·å®šä¹‰çš„å…¬å¼åªèƒ½ä¸Šä¸€ä¸ªè¯æ³•åˆ†æå™¨äº†ï¼Œæ ¹æ®å¤§ä¸‰å­¦çš„ç¼–è¯‘åŸç†ï¼Œå¾’æ‰‹æ’¸ä¸ªçŠ¶æ€æœºã€‚ã€‚ è€ƒè™‘åˆ°èƒ½ç”¨è„šæœ¬è¯­è¨€å°±ç”¨è„šæœ¬è¯­è¨€ï¼ŒæŠ€æœ¯é€‰å‹ç”¨çš„PHP,æºç æ”¾åœ¨ github ä¸Šï¼ŒDiyExpressã€‚ è´®å¤‡çŸ¥è¯†ç‚¹ AST èŠ‚ç‚¹æ ‘ AST (Abstract Syntax Tree(æŠ½è±¡è¯­æ³•æ ‘)) æ˜¯æºä»£ç è¯­æ³•ç»“æ„çš„ä¸€ç§æŠ½è±¡è¡¨ç¤ºã€‚å®ƒä»¥æ ‘çŠ¶çš„å½¢å¼è¡¨ç°ç¼–ç¨‹è¯­è¨€çš„è¯­æ³•ç»“æ„ã€‚å®ƒç”±ä¸€å †èŠ‚ç‚¹ï¼ˆNodeï¼‰ç»„æˆï¼Œæ¯ä¸ªèŠ‚ç‚¹éƒ½è¡¨ç¤ºæºä»£ç ä¸­çš„ä¸€ç§ç»“æ„ã€‚ä¸åŒç»“æ„ç”¨ç±»å‹æ¥åŒºåˆ†ï¼Œå¸¸è§çš„ç±»å‹æœ‰ï¼š Identifier(æ ‡è¯†ç¬¦)ï¼ŒBinaryExpression(äºŒå…ƒè¡¨è¾¾å¼)ï¼ŒVariableDeclaration(å˜é‡å®šä¹‰)ï¼ŒFunctionDeclaration(å‡½æ•°å®šä¹‰)ç­‰ã€‚ AST æ˜¯ç¼–è¯‘å™¨çœ‹çš„ã€‚ç¼–è¯‘å™¨ä¼šå°†æºç è½¬åŒ–æˆ ASTã€‚å¦‚ä¸‹æºç : 123456var a = 42;var b = 5;function addA(d) &#123; return a + d;&#125;var c = addA(2) + b; ä¼šæ¢è½¬åŒ–æˆè¿™æ ·çš„ AST: AST çš„ä½¿ç”¨åœºæ™¯ï¼Ÿ TypeScriptã€babelã€webpackã€vue-cliç­‰éƒ½æ˜¯ä¾èµ–ASTè¿›è¡Œå¼€å‘çš„ã€‚ é€šè¿‡ASTï¼Œå¯ä»¥å°†ä»£ç è½¬åŒ–åï¼Œå†è¾“å‡ºã€‚æ¯”å¦‚ï¼š ä»£ç å‹ç¼©ã€‚åˆ é™¤æ²¡ç”¨çš„ç©ºæ ¼ï¼Œæœªä½¿ç”¨çš„è¯­å¥ï¼Œå˜é‡åæ›¿æ¢ç­‰ã€‚ ä»£ç é«˜äº®ã€‚ å°† ES6 ä»£ç è½¬æ¢æˆ ES5 ä»£ç ã€‚ ç»™ CSS ä¸­çš„æŸäº›å±æ€§åŠ æµè§ˆå™¨å‰ç¼€-webkit-ã€‚ å°† CSS ä¸­çš„pxè½¬åŒ–æˆremã€‚ ç”Ÿæˆä»£ç ã€‚æœ€è¿‘ç”¨äº†ANT DESIGN PROã€‚ ANT DESIGN PRO ä¸­çš„ umi å¯ä»¥åœ¨ç”Ÿæˆé¡µé¢çš„ä»£ç å’Œè·¯ç”±æ—¶ï¼Œä¿®æ”¹è·¯ç”±é…ç½®çš„jsã€‚umi è¿™ç§æ–¹å¼ï¼Œç”¨æˆ·ä½“éªŒå¾ˆå¥½ã€‚å› æ­¤ï¼Œæˆ‘å‡†å¤‡ç”¨è¿™ç§æ–¹å¼æ¥æ”¹é€ æˆ‘ä¹‹å‰åšçš„ä»£ç ç”Ÿæˆå·¥å…·ã€‚ä¿®æ”¹è·¯ç”±é…ç½®éœ€è¦é€šè¿‡ AST æ¥è½¬æ¢ä»£ç ã€‚ éœ€è¦å­¦ä¹  AST çš„å“ªäº›çŸ¥è¯†ï¼Ÿ äº†è§£ AST å¸¸è§èŠ‚ç‚¹çš„ç»“æ„ äº†è§£ AST å¸¸è§èŠ‚ç‚¹çš„ç»“æ„æ¨èé€šè¯»ä¸‹AST node è§„èŒƒã€‚ æºç è§£æ å°†æºç è½¬åŒ–ä¸ºASTã€‚è¯¥æ­¥éª¤åˆ†ä¸ºè¯æ³•åˆ†æï¼ˆLexical Analysisï¼‰å’Œ è¯­æ³•åˆ†æï¼ˆSyntactic Analysisï¼‰ã€‚ è§£æ JavaScript å¯ä»¥ç”¨@babel/parser(ä»¥å‰å« Babylon)ã€‚ è½¬æ¢ åœ¨éå†ASTæ—¶ï¼Œå¯¹æŒ‡å®šçš„ASTèŠ‚ç‚¹åšæ–°å¢ï¼Œä¿®æ”¹æˆ–åˆ é™¤æ“ä½œã€‚ è½¬æ¢å¯ä»¥ç”¨@babel/traverseã€‚ åˆ›å»ºå’ŒéªŒè¯èŠ‚ç‚¹å¯ä»¥ç”¨@babel/typesã€‚åˆ›å»ºASTèŠ‚ç‚¹ä»£ç ç¤ºä¾‹è§è¿™é‡Œã€‚ ç”Ÿæˆç›®æ ‡ä»£ç  å°†ä¸Šä¸€æ­¥è½¬æ¢è¿‡çš„ASTï¼Œè½¬åŒ–ä¸ºç›®æ ‡ä»£ç ï¼Œå¹¶ç”Ÿæˆæºç æ˜ å°„ï¼ˆsource mapsï¼‰ã€‚ ç”Ÿæˆç›®æ ‡ä»£ç å¯ä»¥ç”¨@babel/generator To be continueâ€¦","categories":[{"name":"dev","slug":"dev","permalink":"http://debug.cool/categories/dev/"}],"tags":[]},{"title":"Window10ä¸‹åŒç³»ç»Ÿgrubä¿®å¤","slug":"tipsDoubleSystem","date":"2020-03-15T15:10:00.000Z","updated":"2021-05-07T07:30:39.985Z","comments":true,"path":"2020/03/15/tipsDoubleSystem/","link":"","permalink":"http://debug.cool/2020/03/15/tipsDoubleSystem/","excerpt":"èµ·å› æ˜¯æˆ‘çš„ç¬”è®°æœ¬window10åœ¨æŸæ¬¡æ›´æ–°å‡çº§æ—¶ï¼Œå°†ä¹‹å‰è®¾ç½®å¥½çš„åŒç³»ç»Ÿå¼•å¯¼ç ´åäº†ï¼Œå¯¼è‡´è¿›å…¥Linuxç³»ç»Ÿæ—¶æç¤ºUnknown filesystemã€‚","text":"èµ·å› æ˜¯æˆ‘çš„ç¬”è®°æœ¬window10åœ¨æŸæ¬¡æ›´æ–°å‡çº§æ—¶ï¼Œå°†ä¹‹å‰è®¾ç½®å¥½çš„åŒç³»ç»Ÿå¼•å¯¼ç ´åäº†ï¼Œå¯¼è‡´è¿›å…¥Linuxç³»ç»Ÿæ—¶æç¤ºUnknown filesystemã€‚ é¦–å…ˆèƒ½ç¡®å®šçš„æ˜¯Linuxçš„å¼•å¯¼è¯»å–å‡ºäº†é—®é¢˜ï¼Œæ‰è¿›å…¥åˆ°äº†grub rescueæ¨¡å¼ã€‚å¦‚æœè®°å¾—è‡ªå·±çš„Linuxå¼•å¯¼å®‰è£…åœ¨å“ªä¸ªåŒºå—å¯ä»¥ç›´æ¥é‡æ–°è¯»å–å¼•å¯¼ï¼ˆè¿™ä¸ªå¾—çœ‹ä½ å®‰è£…åŒç³»ç»Ÿçš„æ—¶å€™ï¼ŒæŠŠLinuxçš„å¼•å¯¼è£…åœ¨å“ªä¸ªåˆ†åŒºï¼‰ï¼Œå¦‚æœä¸è®°å¾—ï¼Œå°±æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤è¾“å‡ºgptåˆ†åŒº 1ls è¿™æ ·ä¼šæ˜¾ç¤ºå‡ºä½ æ‰€æœ‰çš„åˆ†åŒºï¼Œå†ä¸€ä¸ªä¸€ä¸ªè¯•è¯•ä¸‹é¢çš„å‘½ä»¤ï¼ˆæˆ‘çš„å¼•å¯¼å®‰è£…åœ¨gpt7åŒºå—ä¸Šï¼‰ 1ls (hd0,gpt7)\\boot\\grub å…¶ä»–ä¸æ˜¯å¼•å¯¼æ‰€åœ¨çš„åˆ†åŒºéƒ½æ˜¯æç¤ºerror: unknown filesystemã€‚æ‰¾åˆ°äº†æ‰€åœ¨çš„åˆ†åŒºä¼šæç¤ºè¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶ç›®å½•ã€‚ å‡å®šä½ ä»¬ä¹Ÿæ˜¯(hd0,gpt7)åˆ†åŒºï¼Œä¾æ¬¡æ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š 1234set root=(hd0,gpt7),set prefix=(hd0,gpt7)/boot/grubinsmod normal,normal æ‰§è¡Œå®Œæ¯•ä¼šè¿›å…¥Linuxå¯åŠ¨çš„å›¾å½¢ç•Œé¢ã€‚ è¿›å…¥Linuxç³»ç»Ÿåï¼Œæ‰“å¼€ç»ˆç«¯æ‰§è¡Œä»¥ä¸‹å‘½ä»¤é‡æ–°å®‰è£…grubå¼•å¯¼ï¼š 12sudo update-grubsudo grub-install /dev/sda å†é‡å¯ï¼Œå°±èƒ½æ¢å¤åˆ°æ­£å¸¸Linuxçš„å¯åŠ¨å¼•å¯¼äº†ã€‚","categories":[{"name":"tips","slug":"tips","permalink":"http://debug.cool/categories/tips/"}],"tags":[]},{"title":"è‡ªå®šä¹‰è¡¨å•è®¾è®¡åŠå®ç°æ–¹æ¡ˆ","slug":"devDiyForm","date":"2020-02-03T06:30:00.000Z","updated":"2021-05-07T14:41:01.612Z","comments":true,"path":"2020/02/03/devDiyForm/","link":"","permalink":"http://debug.cool/2020/02/03/devDiyForm/","excerpt":"å¦‚ä½•è®¾è®¡ä¸€æ¬¾é«˜åº¦è‡ªå®šä¹‰çš„è¡¨å•ç³»ç»Ÿï¼Ÿ è‡ªå®šä¹‰æ„å‘³ç€è¡¨å•æ•°é‡ä¸ç¡®å®šï¼Œæ¯ä¸ªè¡¨å•å­—æ®µæ•°é‡ä¸ç¡®å®šï¼Œæ¯ä¸ªå­—æ®µç±»å‹ä¸ç¡®å®šï¼Œå­˜å‚¨é‡ä¸ç¡®å®šï¼Œç­‰ç­‰ä¸€åˆ‡éƒ½æ˜¯æœªçŸ¥çš„ã€‚","text":"å¦‚ä½•è®¾è®¡ä¸€æ¬¾é«˜åº¦è‡ªå®šä¹‰çš„è¡¨å•ç³»ç»Ÿï¼Ÿ è‡ªå®šä¹‰æ„å‘³ç€è¡¨å•æ•°é‡ä¸ç¡®å®šï¼Œæ¯ä¸ªè¡¨å•å­—æ®µæ•°é‡ä¸ç¡®å®šï¼Œæ¯ä¸ªå­—æ®µç±»å‹ä¸ç¡®å®šï¼Œå­˜å‚¨é‡ä¸ç¡®å®šï¼Œç­‰ç­‰ä¸€åˆ‡éƒ½æ˜¯æœªçŸ¥çš„ã€‚ ä»¥åŠä¹‹åå¦‚ä½•å»ºç«‹ç´¢å¼•ï¼Œå¦‚ä½•æœç´¢å®šä½æŒ‡å®šçš„æ•°æ®ï¼Ÿè¿™äº›é—®é¢˜éƒ½å°†åœ¨ä¸‹é¢çš„æ–¹æ¡ˆä¸­è¿›è¡Œè§£ç­”ã€‚ èƒŒæ™¯ ä¸ºäº†å®ç°æŸä¸ªæ¯”è¾ƒè„‘æ´å¤§å¼€çš„éœ€æ±‚ï¼Œå»ºç«‹è‡ªå®šä¹‰è¡¨å•ï¼Œè€Œä¸”ï¼Œè¿˜é™å®šäº†å‰ç½®æ¡ä»¶â€”æŠ€æœ¯é€‰å‹ä¸è®¸å¤æ‚ï¼Œæ•°æ®å­˜å‚¨åªèƒ½åŸºäºmysql, Soâ€¦ æ‰€è°“çš„â€œè‡ªå®šä¹‰â€ï¼ˆè¡¨è®¾è®¡ï¼‰ æˆ‘ä»¬ä¼šå®šä¹‰è¿™ä¹ˆå‡ å¼ è¡¨ï¼Œç”¨æ¥å®ç°è‡ªå®šä¹‰æ¨¡æ¿çš„å¤§è‡´æ¡†æ¶ã€‚ 12345diy_field_pool å­—æ®µæ± ï¼ˆæˆ‘ä»¬å®šä¹‰å¥½çš„å­—æ®µç±»å‹ï¼‰diy_form è¡¨å•è¡¨ï¼ˆè®°å½•ç”¨æˆ·è‡ªå®šä¹‰çš„è¡¨å•ï¼‰diy_form_field è¡¨å•å­—æ®µè¡¨ï¼ˆè®°å½•æŸå¼ è¡¨å•ä¸­æœ‰å“ªäº›å­—æ®µï¼‰diy_form_entity è¡¨å•å®ä¾‹è¡¨ï¼ˆè®°å½•æŸå¼ è¡¨å•ä¸­çš„æŸæ¡æ•°æ®å®ä¾‹ï¼‰diy_form_data è¡¨å•æ•°æ®è¡¨ï¼ˆè®°å½•æŸå¼ è¡¨å•åœ¨æŸæ¡å®ä¾‹ä¸‹ï¼Œå“ªäº›å­—æ®µå¯¹åº”çš„æ•°æ®ï¼‰ ç³»ç»Ÿåˆå§‹åŒ–å­—æ®µæ±  æˆ‘ä»¬æä¾›ä¸€æ‰¹é¢„å®šä¹‰çš„å­—æ®µç±»å‹ï¼Œåˆå§‹åŒ–æ•°æ®åˆ°diy_field_poolè¡¨ä¸­ï¼Œç”¨æˆ·ä¹Ÿèƒ½è‡ªå·±å®šä¹‰è‡ªå·±çš„å­—æ®µæ± ã€‚ ç”¨æˆ·åˆ›å»ºè‡ªå®šä¹‰è¡¨å• ç”¨æˆ·é€šè¿‡é€‰ç”¨å­—æ®µæ± ï¼ˆdiy_field_poolè¡¨ï¼‰ä¸­æä¾›çš„å­—æ®µï¼Œåˆ›å»ºä¸€å¼ è‡ªå®šä¹‰è¡¨å•ï¼Œè¡¨å•çš„å±æ€§ä¿¡æ¯è®°å½•åœ¨diy_formè¡¨ä¸­ï¼Œè¡¨å•åŒ…å«çš„å­—æ®µï¼ˆä»å­—æ®µæ± ä¸­é€‰å¥½çš„å­—æ®µï¼‰è®°å½•åœ¨diy_form_fieldè¡¨ä¸­ã€‚è¿™æ ·ç”¨æˆ·å°±åˆ›å»ºäº†ä¸€å¼ è‡ªå®šä¹‰è¡¨å•ã€‚ ç”¨æˆ·å¡«å†™è¡¨å• ç”¨æˆ·ä½¿ç”¨åˆ›å»ºå¥½çš„è¡¨å•å¡«å†™æ•°æ®ï¼Œæ¯æ–°å¢ä¸€æ¡æ•°æ®ï¼Œåœ¨diy_form_entityè¡¨å°±ä¼šæ–°å¢ä¸€æ¡è®°å½•ï¼Œè¯¥è¡¨å•ä¸­æœ‰å‡ ä¸ªfieldï¼Œå°±ä¼šåŒæ—¶åœ¨diy_form_dataè¡¨ä¸­æ–°å¢å‡ æ¡ data æ•°æ®ã€‚æ•°æ®ç»“æ„å…³ç³»å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š 123456789101112131415diy_form ------ diy_enity| ||---diy_field |---diy_data| ||---diy_field |---diy_data| ||---diy_field |---diy_data| ||---diy_field |---diy_data| ||---diy_field |---diy_data| ||---diy_field |---diy_data| ||... å¦‚ä½•è¿›è¡Œæ•°æ®æœç´¢ æ•°æ®å­˜å‚¨ç»“æ„ä¸­ï¼Œæœ€ç»ˆä¿å­˜æ•°æ®çš„åœ°æ–¹å…¶å®æ˜¯dataè¡¨ï¼Œä½†æ˜¯ï¼Œdataè¡¨çš„è¾…åŠ©å­—æ®µæœ‰formè¡¨idï¼Œfieldè¡¨idï¼Œentityè¡¨idï¼Œåªæœ‰ä¸€ä¸ªcontentå­—æ®µæ˜¯è®°å½•çœŸå®ä¿¡æ¯çš„ï¼Œé‚£ä¹ˆï¼Œå¦‚ä½•æ­å»ºç´¢å¼•ä½“ç³»å‘¢ï¼Ÿ é‡‡ç”¨ Sphinx æ„å»ºSphinxçš„sqlè¯­å¥æ—¶ï¼Œå°†dataè¡¨çš„idä½œä¸ºæ–‡æ¡£idã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172# å…¬å…±çš„è‡ªå®šä¹‰æ¨¡æ¿çš„æ•°æ®æºsource diyCommonSource&#123; type = mysql sql_db = diy sql_host = 127.0.0.1 sql_port = 3306 sql_user = root sql_pass = root sql_query_pre = SET NAMES utf8 sql_query = \\ select \\ dfd.id, \\ dfd.entity_id,dfd.content,dfd.createat,dfd.updateat, \\ dff.id as field_id,dff.sys_id,dff.field, \\ df.id as form_id \\ from diy_form_data as dfd \\ inner join diy_form_field as dff on dff.form_id=dfd.form_id and dff.is_delete=0 \\ inner join diy_form as df on df.id=dff.form_id and df.is_delete=0 \\ where dfd.is_delete=0&#125;# å…¬å…±çš„è‡ªå®šä¹‰æ¨¡æ¿çš„ç´¢å¼•index diyCommonIndex&#123; source = diyCommonSource path = /var/local/diy/sphinx/data/diyCommonIndex docinfo = extern #charset_type = zh_cn.utf-8 charset_type = utf-8 min_word_len = 1 ngram_len = 1 ngram_chars = U+3000..U+2FA1F&#125;# èŒƒå›´ï¼šæ–°é—»æ¨¡æ¿ï¼ˆå‡å®šform_typeä¸º1ï¼‰source news:diyCommonSource&#123; sql_query = \\ select \\ dfd.id, \\ dfd.entity_id,dfd.content,dfd.createat,dfd.updateat, \\ dff.id as field_id,dff.sys_id,dff.field, \\ df.id as form_id \\ from pre_diy_form_data as dfd \\ inner join pre_diy_form_field as dff \\ and dff.form_id=dfd.form_id \\ and dff.sys_id&gt;0 and dff.is_delete=0 \\ inner join pre_diy_form as df \\ and df.id=dff.form_id \\ and df.is_delete=0 \\ and df.form_type=1 \\ where dfd.is_delete=0 # ä½¿ç”¨sql_attrè®¾ç½®çš„å­—æ®µ(æœç´¢æ¡ä»¶)ï¼Œåªèƒ½ä½œä¸ºå±æ€§ï¼Œä½¿ç”¨SphinxClient::SetFilter()è¿›è¡Œè¿‡æ»¤ï¼› # æœªè¢«è®¾ç½®çš„å­—æ®µï¼Œè‡ªåŠ¨ä½œä¸ºå…¨æ–‡æ£€ç´¢çš„å­—æ®µï¼Œä½¿ç”¨SphinxClient::Query(&quot;æœç´¢å­—ç¬¦ä¸²&quot;)è¿›è¡Œå…¨æ–‡æœç´¢ # sql_queryç¬¬ä¸€åˆ—idéœ€ä¸ºæ•´æ•°ï¼Œä¸”è¢«ç³»ç»Ÿä½¿ç”¨ï¼Œæ— éœ€å†è®¾ç½®sql_attr_uint sql_attr_uint = form_id sql_attr_uint = field_id sql_attr_uint = field sql_attr_uint = entity_id sql_attr_timestamp = createat sql_attr_timestamp = updateat&#125;# æ„é€ å•†å“æ¨¡æ¿çš„æ•°æ®ç´¢å¼•index news:diyCommonIndex&#123; source = news path = /var/local/diy/sphinx/data/news&#125; å…¶ä¸­ï¼Œå¦‚æœéœ€è¦æŒ‡å®šæŸ¥æ‰¾æŸäº›å­—æ®µçš„æ•°æ®ï¼Œé‚£ä¹ˆï¼Œä»¥ä¸Šé¢çš„æ•°æ®æºå†é‡æ–°å®šä¹‰æ•°æ®æºï¼Œsql è¯­å¥è¿›ä¸€æ­¥æŒ‡å®š field è¡¨çš„æŸä¸ªæ ‡å¿—å­—æ®µå³å¯ã€‚","categories":[{"name":"dev","slug":"dev","permalink":"http://debug.cool/categories/dev/"}],"tags":[]},{"title":"éªŒè¯ç è¯†åˆ«","slug":"devCrack","date":"2019-05-10T07:44:00.000Z","updated":"2021-05-07T07:30:39.982Z","comments":true,"path":"2019/05/10/devCrack/","link":"","permalink":"http://debug.cool/2019/05/10/devCrack/","excerpt":"é€šè¿‡è®­ç»ƒå·ç§¯æ¨¡å‹ï¼Œè®©ç¨‹åºè‡ªåŠ¨è¯†åˆ«éªŒè¯ç ã€‚","text":"é€šè¿‡è®­ç»ƒå·ç§¯æ¨¡å‹ï¼Œè®©ç¨‹åºè‡ªåŠ¨è¯†åˆ«éªŒè¯ç ã€‚ èƒŒæ™¯ è¿è¥äººå‘˜å®¡æ ¸æŸäº›ç”¨æˆ·æäº¤çš„èµ„è´¨è¯ä¹¦çš„æ—¶å€™ï¼Œéœ€è¦åˆ°è§„å®šçš„å…¬ç¤ºç½‘ç«™ä¸Šå»æŸ¥è¯¢è¯ä¹¦ï¼Œå¤§è‡´æ“ä½œæ˜¯è¿™äº›ï¼š åˆ°å…¬ç¤ºç½‘ç«™å¡«å†™å¯¹åº”ä¿¡æ¯ï¼ˆè¯ä¹¦ç¼–å·ç­‰ï¼‰ å¡«å†™éªŒè¯ç ï¼ˆæ¯æ¬¡æŸ¥è¯¢éƒ½ä¼šæœ‰æ ¡éªŒç æˆ–è€…çŸ­ä¿¡éªŒè¯ç­‰ç­‰ï¼‰ æŸ¥çœ‹æŸ¥è¯¢ç»“æœå¹¶æ¯”å¯¹è¯ä¹¦ è¿™ä¸€å¥—æµç¨‹ä¸‹æ¥ï¼Œæ— ç–‘æ˜¯åŠ å¤§äº†å®¡æ ¸å‘˜çš„å·¥ä½œé‡ï¼Œè€Œä¸”æ¯å¤©å®¡æ ¸çš„ä¸æ­¢ä¸€å¼ è¯ä¹¦ã€‚ä¸€ä¸ªæ¯”è¾ƒè¿«åˆ‡çš„éœ€æ±‚å°±è¯ç”Ÿäº†ï¼Œæ ¹æ®ä¸åŒè¯ä¹¦ç§ç±»ï¼Œåˆ†åˆ«å»è‡ªåŠ¨è·å–å…¬ç¤ºç½‘ç«™ä¸Šè¯¥è¯ä¹¦çš„ä¿¡æ¯ã€‚ å‡å®šä»¥æ•™å¸ˆèµ„è´¨è¯ä¹¦ä¸ºä¾‹ï¼Œè¯¥å…¬ç¤ºç«™ç‚¹æŸ¥è¯¢ä¿¡æ¯æ—¶ï¼Œéœ€è¦è¾“å…¥è¯ä¹¦ç¼–å·ï¼Œå›¾ç‰‡éªŒè¯ç ï¼Œå³å¯è¿”å›è¯¥è¯ä¹¦æ‰€å¯¹åº”çš„ä¿¡æ¯ï¼Œè¿è¥äººå‘˜æ¯”å¯¹ç”¨æˆ·ä¸Šä¼ çš„è¯ä¹¦å’Œç«™ç‚¹å…¬ç¤ºçš„è¯ä¹¦å³å¯ã€‚ æ–¹æ¡ˆä¸€ ç°åœ¨æ–¹æ¡ˆä¸€æ˜¯åœ¨æˆ‘ä»¬è‡ªå·±çš„å®¡æ ¸åå°ï¼Œå°†æ‰€æœ‰çš„æ•°æ®ï¼ˆæŸ¥è¯¢æ—¶éœ€è¦çš„è¯ä¹¦ç¼–å·ã€å§“åç­‰ç­‰ï¼‰éƒ½æå–å‡ºæ¥ï¼Œå°è£…æˆä¸€ä¸ª post è¯·æ±‚æ•°æ®ï¼Œå¹¶å°†å…¬ç¤ºç½‘ç«™çš„éªŒè¯ç è·å–è¿‡æ¥ï¼Œåœ¨å®¡æ ¸åå°åªç•™ä¸€ä¸ªéªŒè¯ç çš„è¾“å…¥æ¡†ç»™å®¡æ ¸äººå‘˜ï¼Œè¾“å…¥æ­£ç¡®çš„éªŒè¯ç ï¼Œè¿½åŠ åˆ° post è¯·æ±‚ä¸­ï¼Œå³å¯è¿›è¡ŒæŸ¥è¯¢ï¼ˆè¯¥è¿‡ç¨‹ä¸­ä¼šè¯äº¤äº’éªŒè¯çš„ç ´è§£æ€è·¯è¯·è‡ªè¡Œæ‘¸ç´¢ï¼‰ï¼Œå°†è¿”å›çš„æ•°æ®ç»“æœè¿›è¡Œåˆ‡å‰²å¤„ç†ï¼Œä»¥æ¯”è¾ƒå¥½çš„äº¤äº’æ–¹å¼å‘ˆç°ç»™è¿è¥äººå‘˜ã€‚è¿è¥äººå‘˜å‰©ä¸‹çš„å·¥ä½œåªè¦ check ä¸€ä¸‹ä¿¡æ¯å³å¯ã€‚ psï¼šæ–¹æ¡ˆä¸€çš„èƒŒåå…¶å®è¿˜è¿›è¡Œäº†å¦ä¸€æ­¥æ“ä½œï¼Œåªè¦æŸ¥è¯¢æˆåŠŸï¼Œå°±å°†è¿™å¼ éªŒè¯ç å›¾ç‰‡ä¿å­˜åˆ°æœ¬åœ°æœåŠ¡å™¨ï¼Œè¿è¥äººå‘˜è¾“å…¥çš„éªŒè¯ç ä½œä¸ºå›¾ç‰‡åï¼ˆè¿™ä¸€æ­¥æ˜¯å…³é”®ï¼Œå› ä¸ºéœ€è¦å¤§é‡çš„è®­ç»ƒæ ·æœ¬è¿›è¡Œæ¨¡å‹è®­ç»ƒï¼Œä¸ºæ–¹æ¡ˆäºŒåšé“ºå«ï¼‰ã€‚ æ–¹æ¡ˆäºŒ ç­‰ä¸€æ®µæ—¶é—´åï¼Œå°†æ–¹æ¡ˆä¸€ä¿å­˜ä¸‹æ¥çš„è¿™æ‰¹å›¾ç‰‡æ•°æ®ä½œä¸ºè®­ç»ƒæ ·æœ¬ï¼Œå»è®­ç»ƒæ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯æ–¹æ¡ˆäºŒï¼Œå½“æ¨¡å‹çš„å‡†ç¡®ç‡è¾¾åˆ°äº† 0.9 ä»¥ä¸Šï¼Œå°±å¯ä»¥å®é™…æ‹¿è¿‡æ¥ä½¿ç”¨äº†ã€‚ï¼ˆå¯èƒ½ä¼šè¯´ä¸ºä»€ä¹ˆä¸è‡ªåŠ¨ç”Ÿæˆç›¸ä¼¼çš„éªŒè¯ç æ¥è¿›è¡Œè®­ç»ƒï¼Œè¿™ä¹Ÿæ˜¯ä¸€ä¸ªæ€è·¯ï¼Œä½†å‡†ç¡®ç‡æ²¡æœ‰æ‹¿ç›®æ ‡æ ·æœ¬ä½œä¸ºè®­ç»ƒæ ·æœ¬æ¥çš„é«˜ï¼Œå› ä¸ºæˆ‘ä»¬æ˜¯ä¸çŸ¥é“å¯¹æ–¹éªŒè¯ç çš„ç”Ÿæˆè§„åˆ™çš„ï¼Œåªèƒ½ä»¿å‡ºä¸€ä¸ªå¤§æ¦‚ç›¸ä¼¼çš„éªŒè¯ç ã€‚ï¼‰ æ–¹æ¡ˆäºŒéƒ¨ç½²ä¸Šçº¿çš„æ—¶å€™ï¼Œåªè¦ç”¨æˆ·æäº¤äº†ç›¸å…³çš„è¯ä¹¦ä¿¡æ¯ï¼Œæˆ‘ä»¬çš„ç³»ç»Ÿå°±è‡ªåŠ¨å»å…¬ç¤ºç½‘ç«™ä¸ŠæŸ¥è¯¢æ•°æ®å¹¶å°†ç»“æœä¿å­˜åˆ°æ•°æ®åº“ï¼Œè¿™æ ·è¿è¥äººå‘˜åªè¦åœ¨å®¡æ ¸åå°æ ¸å¯¹æŸ¥è¯¢ç»“æœå³å¯ï¼Œä¹Ÿä¸ç”¨å†è¾“å…¥éªŒè¯ç äº†ã€‚ ä¸ºäº†æ›´å¥½çš„å…¼å®¹ï¼Œä¹‹å‰æ–¹æ¡ˆä¸€é¢„ç•™çš„æ‰‹åŠ¨å¡«å†™éªŒè¯ç åŠŸèƒ½ä¹Ÿä¸ä¼šåˆ å‡æ‰ï¼Œé˜²æ­¢å‡ºç°ç³»ç»Ÿæ— æ³•è‡ªåŠ¨è¯†åˆ«éªŒè¯ç ã€è·å–ä¸åˆ°æŸ¥è¯¢æ•°æ®çš„æƒ…å†µã€‚è¿™æ ·å¦‚æœç³»ç»Ÿè‡ªåŠ¨æŸ¥è¯¢åˆ°äº†æ•°æ®è¿è¥äººå‘˜å°±èƒ½ç›´æ¥å®¡æ ¸ï¼Œæ²¡æœ‰æŸ¥è¯¢åˆ°æ•°æ®ï¼Œè¿è¥äººå‘˜è¿˜èƒ½æ‰‹åŠ¨æŸ¥ä¸€éè¿›è¡Œç¡®è®¤ï¼ŒåŒæ—¶è¿˜æ”¶é›†äº†éªŒè¯ç çš„è®­ç»ƒæ ·æœ¬ã€‚ æ€»ç»“ æ–¹æ¡ˆäºŒæ˜¯åœ¨æ–¹æ¡ˆä¸€ä½¿ç”¨ä¸€æ®µæ—¶é—´åæ‰èƒ½è¿›è¡Œçš„ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦å¤§é‡çš„è®­ç»ƒæ ·æœ¬ï¼Œå¦‚æœç‰¹æ„é€šè¿‡äººå·¥å»è·å–æ•°æ®ï¼ˆéªŒè¯ç å›¾ç‰‡ï¼‰å¹¶æ‰“æ ‡ç­¾ï¼ˆæ¯å¼ å›¾ç‰‡æ‰€ä»£è¡¨çš„éªŒè¯ç ï¼‰ï¼Œæ— ç–‘æ˜¯ä¼šæµªè´¹å¾ˆå¤§çš„äººåŠ›èµ„æºã€‚ è¿™æ ·åœ¨æ–¹æ¡ˆä¸€é˜¶æ®µï¼Œå®¡æ ¸äººå‘˜è¿˜æ˜¯è¿›è¡Œå¸¸è§„çš„å®¡æ ¸æ“ä½œï¼Œå°±é¡ºä¾¿æ”¶é›†äº†å¯¹åº”çš„è®­ç»ƒæ•°æ®ã€‚ç­‰åˆ°æ‰§è¡Œæ¡ˆæ¡ˆäºŒï¼Œå°±å°†å®¡æ ¸å‘˜å½»åº•è§£æ”¾å‡ºæ¥ï¼Œåœ¨éœ€æ±‚ï¼ˆå®¡æ ¸åŠŸèƒ½ã€ä¸Šçº¿æ—¶é—´ï¼‰ã€æˆæœ¬ï¼ˆæ—¶é—´ã€äººåŠ›ï¼‰ã€æŠ€æœ¯å®ç°ï¼ˆæ ·æœ¬è·å–ï¼‰ä¸Šç›®å‰åº”è¯¥æ˜¯æœ€ä¼˜è§£äº†ã€‚ è¡¥å…… å…¶å®åŒæ—¶è¿˜æ˜¯åšäº†é«˜ä»¿ç›®æ ‡ç«™ç‚¹çš„éªŒè¯ç ï¼Œäº‰å–åšåˆ°å¤§è‡´ç›¸åŒã€‚ç„¶åtensorflowè®­ç»ƒåçš„è¯†åˆ«ç‡è¾¾åˆ°0.9å·¦å³ä¼°è®¡å°±å·®ä¸å¤šäº†ã€‚ æºç ","categories":[{"name":"dev","slug":"dev","permalink":"http://debug.cool/categories/dev/"}],"tags":[]},{"title":"Pythonå°è£…Kafkaå®¢æˆ·ç«¯","slug":"devKafka","date":"2019-04-20T12:44:00.000Z","updated":"2021-05-07T07:30:39.984Z","comments":true,"path":"2019/04/20/devKafka/","link":"","permalink":"http://debug.cool/2019/04/20/devKafka/","excerpt":"ä¸šåŠ¡ä¸Šå¤„ç†Kafkaä¸»è¦å°±æ‰£ç€â€œç”Ÿäº§è€…â€å’Œâ€œæ¶ˆè´¹è€…â€è¿™ä¸ªç‚¹å°±è¡Œï¼Œä¸‹é¢è®²çš„æ˜¯åœ¨Pythonä¸­å°è£…ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„Kafkaå®¢æˆ·ç«¯ã€‚","text":"ä¸šåŠ¡ä¸Šå¤„ç†Kafkaä¸»è¦å°±æ‰£ç€â€œç”Ÿäº§è€…â€å’Œâ€œæ¶ˆè´¹è€…â€è¿™ä¸ªç‚¹å°±è¡Œï¼Œä¸‹é¢è®²çš„æ˜¯åœ¨Pythonä¸­å°è£…ä¸€ä¸ªæ¯”è¾ƒå¥½ç”¨çš„Kafkaå®¢æˆ·ç«¯ã€‚ no bb, show code.ç›´æ¥ä¸Šä»£ç ã€‚ 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120#!/usr/bin/env python# encoding: utf-8import sysfrom pykafka import KafkaClientreload(sys)sys.setdefaultencoding(&#x27;utf8&#x27;)class KafkaTaskException(Exception): &quot;&quot;&quot; åœ¨è¿™é‡Œè‡ªå®šä¹‰KafkaTaskç±»çš„å¼‚å¸¸ &quot;&quot;&quot; passclass ParameterError(KafkaTaskException): &quot;&quot;&quot; å‚æ•°å¼‚å¸¸é”™è¯¯ _ParameterError_Key: å½“ key ç±»å‹é”™è¯¯çš„æ—¶çš„æŠ›é”™. _ParameterError_Topic: å½“ topic ç±»å‹é”™è¯¯çš„æ—¶çš„æŠ›é”™. _ParameterError_Consumer: å½“åˆå§‹åŒ–init_consumer ä½¿ç”¨äº†é”™è¯¯çš„å‚æ•°æ—¶æŠ›é”™. &quot;&quot;&quot; _ParameterError_Key = &quot;ParameterError- type(s) for &#x27;Key&#x27;: must be bytes&quot; _ParameterError_Topic = &quot;ParameterError- type(s) for &#x27;topic&#x27;: must be bytes&quot; _ParameterError_pykafka_Consumer = &quot;ParameterError- type(s) for &#x27;topic&#x27;: must be bytes; &quot; \\ &quot;type(s) for &#x27;group_id&#x27;: must be str; &#x27;offset_type&#x27; &quot; \\ &quot;must be &#x27;LATEST&#x27; or &#x27;EARLIEST&#x27;&quot; _ParameterError_kafka_Consumer = &quot;ParameterError- type(s) for &#x27;topic&#x27;: must be str; &quot; \\ &quot;type(s) for &#x27;group_id&#x27;: must be str; &#x27;offset_type&#x27; &quot; \\ &quot;must be &#x27;LATEST&#x27; or &#x27;EARLIEST&#x27;&quot; passclass KafkaTask(object): &quot;&quot;&quot; å°è£…ä¸€ä¸ªpykafkaçš„å®¢æˆ·ç«¯æ–¹æ³• &quot;&quot;&quot; def __init__(self, server): &quot;&quot;&quot; :param server: strç±»å‹ &quot;&quot;&quot; self.server = server self.client = KafkaClient(hosts=server) def init_producer(self, topic): &quot;&quot;&quot; åˆå§‹åŒ–Kafkaç”Ÿäº§è€… :param topic:Type --&gt; bytes `Produce msg what topic You want`. :raises ParameterError: å½“topicä¸æ˜¯bytesç±»å‹æ—¶æŠ›é”™. :return: &quot;&quot;&quot; if not isinstance(topic, bytes): raise ParameterError(ParameterError._ParameterError_Topic) topic = self.client.topics[topic] self.producer = topic.get_producer(sync=True) def init_consumer_pykafka(self, topic, group_id, offset_type): &quot;&quot;&quot; Init Kafka Consumer by pykafka :param topic:Type --&gt; bytes `Consumer msg what topic You want`. :param group_id: Type --&gt; str `Consumer msg what group_id You want,You can receive duplicate data using different group_id in same topic`. :param offset_type:Type --&gt; str `LATEST can receive the latest data,EARLIEST can receive earliest data in topic` :raises ParameterError: When use error Parameter to init init_consumer. :return: &quot;&quot;&quot; if not isinstance(topic, bytes) or not isinstance(group_id, str) or not isinstance(offset_type, str) or offset_type not in [&quot;LATEST&quot;, &quot;EARLIEST&quot;]: raise ParameterError(ParameterError._ParameterError_pykafka_Consumer) from pykafka.simpleconsumer import OffsetType _OffsetType = &#123;&quot;LATEST&quot;: OffsetType.LATEST, &quot;EARLIEST&quot;: OffsetType.EARLIEST&#125; topic = self.client.topics[topic] self.consumer = topic.get_simple_consumer(auto_commit_enable=True, auto_commit_interval_ms=1, consumer_id=group_id, auto_offset_reset=_OffsetType[offset_type], reset_offset_on_start=True) def init_consumer_kafka(self, topic, group_id, offset_type): &quot;&quot;&quot; Init Kafka Consumer by kafka-python :param topic: Type --&gt; str `Consumer msg what topic You want`. :param group_id: Type --&gt; str `Consumer msg what group_id You want,You can receive duplicate data using different group_id in same topic`. :param offset_type: Type --&gt; str `LATEST can receive the latest data,EARLIEST can receive earliest data in topic` :raises ParameterError: When use error Parameter to init init_consumer. :return: &quot;&quot;&quot; from kafka import KafkaConsumer if not isinstance(topic, str) or not isinstance(group_id, str) \\ or not isinstance(offset_type, str) or offset_type not in [&quot;LATEST&quot;, &quot;EARLIEST&quot;]: raise ParameterError(ParameterError._ParameterError_kafka_Consumer) self.consumer = KafkaConsumer(bootstrap_servers=self.server, auto_offset_reset=offset_type, group_id=group_id, ) self.consumer.subscribe(topics=topic.split(&#x27;,&#x27;)) def pull(self): &quot;&quot;&quot; Get info from Kafka Consumer by kafka-python Poll Parameters: timeout_ms: Type --&gt; int `Interval between each piece of data`. max_records: Type --&gt; int `The amount of data per batch of data` :return: &quot;&quot;&quot; return self.consumer.poll(timeout_ms=0, max_records=1) def send_message(self, msg, key): &quot;&quot;&quot; Send MSG by this func :param msg: Type --&gt; bytes or str `Message to broker`. :param key: Type --&gt; bytes `Producer msg what key You want,You can see the key when you receiving data`. :raises ParameterError: when error type for key. :return: &quot;&quot;&quot; if not isinstance(key, bytes): raise ParameterError(ParameterError._ParameterError_Key) produce_msg = msg.encode() if isinstance(msg, str) else msg self.producer.produce(produce_msg, partition_key=key)","categories":[{"name":"dev","slug":"dev","permalink":"http://debug.cool/categories/dev/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"http://debug.cool/tags/Kafka/"}]},{"title":"ä»»åŠ¡åˆ†é…ç®—æ³•","slug":"devTaskAssign","date":"2019-01-26T16:00:00.000Z","updated":"2021-05-07T07:30:39.981Z","comments":true,"path":"2019/01/27/devTaskAssign/","link":"","permalink":"http://debug.cool/2019/01/27/devTaskAssign/","excerpt":"åœ¨å¼€å‘ä¸€å¥—å†…éƒ¨çš„å®¡æ ¸å¹³å°çš„æ—¶å€™ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œæ‰€æœ‰çš„ä»»åŠ¡éœ€è¦å¹³å‡çš„å‰æä¸‹éšæœºåˆ†é…ç»™å®¡æ ¸å‘˜ã€‚ç„¶åæœ‰å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰çš„å®¡æ ¸å‘˜æ•ˆç‡æ…¢ï¼Œæœ‰çš„å®¡æ ¸å‘˜æ•ˆç‡é«˜ï¼Œè¿™æ ·åˆ†é…ä»»åŠ¡çš„æ—¶å€™å°±éœ€è¦è€ƒè™‘å®¡æ ¸å‘˜å½“å‰æ‰‹ä¸Šå‰©ä½™çš„å®¡æ ¸ä»»åŠ¡(ä¹Ÿæœ‰è¿è¥éƒ¨çš„ç»©æ•ˆè€ƒæ ¸åŸå› )ã€‚","text":"åœ¨å¼€å‘ä¸€å¥—å†…éƒ¨çš„å®¡æ ¸å¹³å°çš„æ—¶å€™ï¼Œæœ‰è¿™ä¹ˆä¸€ä¸ªéœ€æ±‚ï¼Œæ‰€æœ‰çš„ä»»åŠ¡éœ€è¦å¹³å‡çš„å‰æä¸‹éšæœºåˆ†é…ç»™å®¡æ ¸å‘˜ã€‚ç„¶åæœ‰å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼Œæœ‰çš„å®¡æ ¸å‘˜æ•ˆç‡æ…¢ï¼Œæœ‰çš„å®¡æ ¸å‘˜æ•ˆç‡é«˜ï¼Œè¿™æ ·åˆ†é…ä»»åŠ¡çš„æ—¶å€™å°±éœ€è¦è€ƒè™‘å®¡æ ¸å‘˜å½“å‰æ‰‹ä¸Šå‰©ä½™çš„å®¡æ ¸ä»»åŠ¡(ä¹Ÿæœ‰è¿è¥éƒ¨çš„ç»©æ•ˆè€ƒæ ¸åŸå› )ã€‚ psï¼šéœ€æ±‚å˜äº†ï¼Œæ‰€æœ‰çš„éƒ½å¹³å‡åˆ†äº†ï¼Œå› ä¸ºè¿è¥äººå‘˜ä¸éœ€è¦æ ¹æ®å®¡æ ¸é‡è¿›è¡Œç»©æ•ˆè€ƒæ ¸äº†ï¼Œå¤šåŠ³å¤šå¾—å˜æˆå¤§é”…é¥­äº†ã€‚ä¹Ÿç™½è®¾è®¡äº†è¿™å¥—ç®—æ³•ï¼Œæ— æ‰€è°“äº†ï¼Œå°±å½“å‘¨æœ«åˆ·äº†ä¼šæ•°ç‹¬æ¸¸æˆå§ï¼Œåæ­£é—²ç€ä¹Ÿæ˜¯é—²ç€ã€‚ å‡è®¾ç°åœ¨æœ‰ n ä¸ªä»»åŠ¡éœ€è¦åˆ†é…ç»™ m ä¸ªå®¡æ ¸å‘˜å»å®Œæˆï¼Œä½†æ˜¯æ¯ä¸ªå®¡æ ¸å‘˜æ‰‹å¤´ä¸Šè¿˜æœ‰æœªå®Œæˆçš„ä»»åŠ¡ï¼Œä¸”æœªå®Œæˆçš„ä»»åŠ¡æ•°ä¸åŒã€‚é‚£ä¹ˆå¦‚ä½•å‡åŒ€çš„æŠŠè¿™äº›ä»»åŠ¡åˆ†é…ç»™å„ä¸ªå®¡æ ¸å‘˜ï¼Ÿè¿™é‡Œæˆ‘æƒ³å‡ºäº†ä¸€ç§åŸºäºå¹³å‡æ€æƒ³çš„ä»»åŠ¡åˆ†é…ç®—æ³•ã€‚ è¯¥ç®—æ³•çš„ä¸»è¦æ€æƒ³æ˜¯ï¼šé¦–å…ˆæ‰¾å‡ºæ‰€æœ‰çš„å®¡æ ¸å‘˜ä¸­æ‰‹å¤´æœªå®Œæˆä»»åŠ¡æ•°é‡æœ€å¤§çš„å®¡æ ¸å‘˜ï¼Œç„¶åå…¶ä»–å®¡æ ¸å‘˜ä»¥è¯¥å®¡æ ¸å‘˜çš„æœªå®Œæˆä»»åŠ¡æ•°ä¸ºå‚è€ƒæ•°ï¼Œè®¡ç®—è‡ªå·±å¯å®¹çº³çš„ä»»åŠ¡æ•°ï¼Œæœ€åæ‰€æœ‰å®¡æ ¸å‘˜å¯å®¹çº³çš„ä»»åŠ¡æ•°ä¹‹å’Œå³ä¸ºæ€»çš„å¯å®¹çº³ä»»åŠ¡æ•°ã€‚ è¿™é‡Œå­˜åœ¨ä¸¤ç§æƒ…å†µï¼Œç¬¬ä¸€ç§æ˜¯ï¼šæ€»çš„å¯å®¹çº³ä»»åŠ¡æ•°å°äºæˆ–ç­‰äº n ä¸ªå¾…åˆ†é…çš„ä»»åŠ¡æ•°ï¼Œæ­¤æ—¶æ‰€æœ‰çš„å®¡æ ¸å‘˜ä»¥æœ€å¤§æœªå®Œæˆä»»åŠ¡æ•° max_task ä¸ºå‚è€ƒæ•°ï¼Œæ¥æ”¶å¾…åˆ†é…çš„ä»»åŠ¡ã€‚å¦‚æœåˆšå¥½åˆ†é…å®Œï¼Œé‚£ä¹ˆç®—æ³•ç»“æŸï¼›å¦‚æœè¿˜æœ‰å‰©ä½™ä»»åŠ¡æœªåˆ†é…ï¼Œé‚£ä¹ˆå°†å‰©ä¸‹çš„ä»»åŠ¡æŠ½å– m ä¸ªä»»åŠ¡åˆ†é…ç»™æ¯ä¸€ä½å®¡æ ¸å‘˜ï¼Œä»¥æ­¤ç±»æ¨ï¼Œç›´åˆ°å‰©ä¸‹çš„æœªåˆ†é…ä»»åŠ¡æ•°å°äº m ä½ç½®ï¼Œç„¶åå°†è¿™å°äº m çš„ä»»åŠ¡éšæœºåˆ†é…ç›¸åº”æ•°é‡çš„å®¡æ ¸å‘˜ã€‚ ç¬¬äºŒç§æƒ…å†µæ˜¯ï¼šæ€»çš„å¯å®¹çº³ä»»åŠ¡æ•°å¤§äº n ä¸ªå¾…åˆ†é…çš„ä»»åŠ¡æ•°ï¼Œæ­¤æ—¶é™ä½ä¸€ä¸ªå•ä½çš„å‚è€ƒæ•°(max_task-1)ï¼Œç„¶åå¾ªç¯è®¡ç®—å¯å®¹çº³çš„ä»»åŠ¡æ•°ï¼ŒçŸ¥é“é€€å‡ºå¾ªç¯ï¼ˆå¾ªç¯ç»ˆæ­¢æ¡ä»¶ä¸ºï¼šava_task - task_num &lt;= lower_List.size(),lower_List.size()è¡¨ç¤ºçš„æ˜¯ä½äºå½“å‰å‚è€ƒæ•°çš„å®¡æ ¸å‘˜æ•°ï¼‰ã€‚ æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†é€šè¿‡ä¸€ä¸ªç®€å•çš„ä¾‹å­æ¥è¯´æ˜ç®—æ³•çš„æµç¨‹ï¼Œç”±äºç¬¬ä¸€ç§æƒ…å†µæ¯”è¾ƒç®€å•ï¼Œå› æ­¤ï¼Œè¯¥ä¾‹å­æ˜¯åŸºäºç¬¬äºŒç§æƒ…å†µçš„ï¼Œå¦‚å›¾ 1 æ‰€ç¤º. å‡è®¾æœ‰ 20 ä¸ªä»»åŠ¡éœ€è¦åˆ†é…ç»™ 8 ä¸ªå®¡æ ¸å‘˜(å¯¹åº” 8 ä¸ªæ¡å½¢å›¾ï¼Œè“è‰²æ¡å½¢å›¾å¯¹åº”çš„æ•°å­—ä»£è¡¨è¯¥å®¡æ ¸å‘˜æ‰‹å¤´æœªå®Œæˆçš„ä»»åŠ¡æ•°)ã€‚ é¦–å…ˆæ‰¾å‡ºè€…å…«ä¸ªå®¡æ ¸å‘˜æ”¶ä¸­æœªå®Œæˆä»»åŠ¡ä¹¦çš„æœ€å¤§å€¼ max_task=7ï¼Œç„¶åä¸ªå®¡æ ¸å‘˜å·² max_task ä¸ºå‚è€ƒæ•°è®¡ç®—å„è‡ªå¯å®¹çº³çš„ä»»åŠ¡æ•°(ç»¿è‰²æ¡å½¢å›¾å¯¹åº”çš„æ•°å­—)ï¼Œæ€»çš„å¯å®¹çº³ä»»åŠ¡æ•°ä¸ºæ‰€æœ‰å®¡æ ¸å‘˜å¯å®¹çº³çš„ä»»åŠ¡æ•°ä¹‹å’Œï¼ŒåŠ ava_task=6+3+4+2+5+0+5+6,æœ‰å›¾ 1 å¯çŸ¥ï¼Œlower_List.size()=7,ç”± 31-20&gt;7ï¼Œå› æ­¤ï¼Œå¯é™ä½ä¸€ä¸ªå•ä½çš„å‚æ•°æ•°ï¼Œå³ max_task=max_task-1=6ï¼Œå¦‚å›¾ 2 æ‰€ç¤ºã€‚ é‚£ä¹ˆï¼Œava_task=5+2+3+1+4+0+4+5=24ï¼Œlower_List.size()=7ï¼Œç”±äº 24-20&lt;7ï¼Œå› æ­¤å¾ªç¯ç»ˆæ­¢ã€‚ ç”±äºå¯å®¹çº³çš„ä»»åŠ¡æ•°ä»ç„¶å¤§äºå¾…åˆ†é…çš„ä»»åŠ¡æ•°ï¼Œå› æ­¤éœ€è¦å†é™ä½ä¸€ä¸ªå•ä½çš„å‚è€ƒæ•°(ä¸€å®šè¦è€ƒè™‘è¿™ç§æƒ…å†µ)ï¼Œmax_task=max_task-1=5ï¼Œæ­¤æ—¶ ava_task=4+1+2+0+3+0+3+4=17ï¼Œlower_List.size()=6ï¼Œå‰©ä½™å¾…åˆ†é…ä»»åŠ¡æ•°ä¸º 20-17=3ï¼Œç„¶åå°†è¿™ 3 ä¸ªä»»åŠ¡éšæœºåˆ†é…ç»™ä½äºå½“å‰å‚è€ƒæ•°çš„ 6 ä¸ªå®¡æ ¸å‘˜ä¸­çš„ 3 ä¸ªï¼Œæ¯ä¸ªå®¡æ ¸å‘˜åˆ†é…ä¸€ä¸ªã€‚ å½“ç„¶ç®—æ³•ä¸­è¿˜è€ƒè™‘äº†å¾ˆå¤šç§æƒ…å†µï¼Œå…·ä½“è¯·å‚è§å¦‚ä¸‹ä»£ç ã€‚ç”±äºä»»åŠ¡ä¸€èˆ¬æŒ‰å®¡æ ¸å‘˜ ID æ¥åˆ†é…ï¼Œä¸” ID ä¸€èˆ¬ä¸ºå­—ç¬¦ä¸²ã€‚ä¸ºäº†å­˜å‚¨æ–¹ä¾¿ï¼Œæˆ‘å®šä¹‰äº†ä¸€ä¸ªäºŒç»´å­—ç¬¦ä¸²ç±»å‹çš„æ•°ç»„ rev_task[i][j]æ¥å­˜å‚¨æ•°æ®ï¼Œi è¡¨ç¤ºç¬¬ i ä¸ªå®¡æ ¸å‘˜ï¼Œrev_task[i][0]å­˜æ”¾çš„æ˜¯ç¬¬ i ä¸ªå®¡æ ¸å‘˜çš„ IDï¼Œrev_task[i][1]å­˜æ”¾çš„æ˜¯ç¬¬ i ä¸ªå®¡æ ¸å‘˜å½“å‰æœªå®Œæˆçš„ä»»åŠ¡æ•°ï¼Œrev_task[i][2]å­˜æ”¾çš„æ˜¯ç¬¬ i ä¸ªå®¡æ ¸å‘˜åº”å½“è¢«åˆ†é…çš„ä»»åŠ¡æ•°ã€‚ ç®—æ³•å·¥å…·ç±»-AlgorithmUtils.java 123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119package com.audit.allocationAlgorithm;import java.util.ArrayList;import java.util.Date;import java.util.List;import java.util.Random;public class AlgorithmUtils &#123; public static void taskAllocation(int task_num, int rev_num, String[][] rev_task) &#123; Random rd = new Random(); List&lt;Integer&gt; rdList = new ArrayList&lt;&gt;(); int temp; //è·å¾—å®¡æ ¸äººå‘˜ä¸­çš„æœ€å¤§æœªå®Œæˆä»»åŠ¡æ•° int max_task = Integer.parseInt(rev_task[0][1]); for(int i = 1; i &lt; rev_num; i++)&#123; if(max_task &lt; Integer.parseInt(rev_task[i][1])) max_task = Integer.parseInt(rev_task[i][1]); &#125; //ä»¥æœ€å¤§å¾…å®¡æ ¸ä»»åŠ¡æ•°ä¸ºå‚è€ƒæ•°ï¼Œåˆ¤æ–­ç¬¬ä¸€è½®å¯å®¹çº³çš„ä»»åŠ¡æ•° int ava_task = 0; List&lt;Integer&gt; lower_List = new ArrayList&lt;&gt;(); for(int i=0;i&lt;rev_num;i++)&#123; if((max_task-Integer.parseInt(rev_task[i][1])) &gt; 0)&#123; ava_task += (max_task-Integer.parseInt(rev_task[i][1])); lower_List.add(i); &#125; &#125; int task_rest; int task_avg; //ç¬¬ä¸€ç§æƒ…å†µï¼šç¬¬ä¸€è½®å¯å®¹çº³çš„ä»»åŠ¡æ•°å°äºå¾…åˆ†é…çš„ä»»åŠ¡æ•° if(ava_task - task_num &lt;= 0) &#123; for(int i = 0; i &lt; rev_num; i++) &#123; rev_task[i][2] = String.valueOf(max_task-Integer.parseInt(rev_task[i][1])); &#125; task_rest = task_num-ava_task; task_avg = task_rest/rev_num; if(task_rest != 0) &#123; while(task_avg &gt; 0) &#123; for(int i = 0; i &lt; rev_num; i++) &#123; rev_task[i][2] = String.valueOf(Integer.parseInt(rev_task[i][2])+task_avg); &#125; task_rest -= rev_num*task_avg; task_avg = task_rest/rev_num; &#125; rdList.removeAll(rdList); while(rdList.size() &lt; (task_rest+1))&#123; temp = rd.nextInt(rev_num); if(!rdList.contains(temp))&#123; rdList.add(temp); &#125; &#125; for(int i = 0; i &lt; task_rest; i++) &#123; rev_task[rdList.get(i)][2] = String.valueOf(Integer.parseInt(rev_task[rdList.get(i)][2])+1); &#125; &#125; &#125;else &#123;//ç¬¬äºŒç§æƒ…å†µï¼šç¬¬ä¸€è½®å¯å®¹çº³çš„ä»»åŠ¡æ•°å¤§äºå¾…åˆ†é…çš„ä»»åŠ¡æ•°ï¼Œæ­¤æ—¶é™ä½ä¸€ä¸ªå•ä½çš„å‚è€ƒæ•°(max_task-1)ï¼Œç„¶åå¾ªç¯è®¡ç®—å¯å®¹çº³çš„ä»»åŠ¡æ•°ï¼Œç›´åˆ°é€€å‡ºå¾ªç¯ while(ava_task - task_num &gt; lower_List.size()) &#123; max_task--; ava_task = 0; lower_List.removeAll(lower_List); for(int i=0;i&lt;rev_num;i++)&#123; rev_task[i][2] = &quot;0&quot;; if((max_task-Integer.parseInt(rev_task[i][1])) &gt; 0)&#123; rev_task[i][2] = String.valueOf(max_task-Integer.parseInt(rev_task[i][1])); ava_task += Integer.parseInt(rev_task[i][2]); lower_List.add(i); &#125; &#125; &#125; if(ava_task - task_num &gt; 0) &#123;//å¦‚æœå¯å®¹çº³çš„ä»»åŠ¡æ•°å¤§äºå¾…åˆ†é…çš„ä»»åŠ¡æ•°ï¼Œé‚£ä¹ˆéœ€è¦å†å†é™ä½ä¸€ä¸ªå•ä½çš„å‚è€ƒæ•° max_task--; ava_task = 0; lower_List.removeAll(lower_List); for(int i=0;i&lt;rev_num;i++)&#123; if((max_task-Integer.parseInt(rev_task[i][1])) &gt;= 0)&#123; rev_task[i][2] = String.valueOf(max_task-Integer.parseInt(rev_task[i][1])); ava_task += Integer.parseInt(rev_task[i][2]); lower_List.add(i); &#125; &#125; task_rest = task_num - ava_task; rdList.removeAll(rdList); while(rdList.size() &lt; (task_rest+1))&#123; temp = rd.nextInt(rev_num); if((!rdList.contains(temp))&amp;&amp;(lower_List.contains(temp)))&#123; rdList.add(temp); &#125; &#125; for(int i = 0; i &lt; task_rest; i++) &#123; rev_task[rdList.get(i)][2] = String.valueOf(Integer.parseInt(rev_task[rdList.get(i)][2])+1); &#125; &#125;else &#123; task_rest = task_num-ava_task; if(task_rest != 0) &#123; rdList.removeAll(rdList); while(rdList.size() &lt; (task_rest+1))&#123; temp = rd.nextInt(rev_num); if((!rdList.contains(temp))&amp;&amp;(lower_List.contains(temp)))&#123; rdList.add(temp); &#125; &#125; for(int i = 0; i &lt; task_rest; i++) &#123; rev_task[rdList.get(i)][2] = String.valueOf(Integer.parseInt(rev_task[rdList.get(i)][2])+1); &#125; &#125; &#125; &#125; //è®°å½•è¢«åˆ†é…çš„ä»»åŠ¡æ•° for(int i=0;i&lt;rev_num;i++)&#123; rev_task[i][1] = String.valueOf(Integer.parseInt(rev_task[i][1])+Integer.parseInt(rev_task[i][2])); &#125; &#125;&#125; ç®—æ³•æµ‹è¯•ç±»-TestAlgorithm.java 12345678910111213141516171819202122232425262728293031323334353637383940414243444546package com.audit.allocationAlgorithm;import java.util.ArrayList;import java.util.List;import java.util.Random;import java.util.Scanner;public class TestAlgorithm &#123; public static void main(String[] args) &#123; Scanner sc=new Scanner(System.in); System.out.println(&quot;è¯·è¾“å…¥ä»»åŠ¡æ•°ï¼š&quot;); int task_num = sc.nextInt(); System.out.println(&quot;è¯·è¾“å…¥å®¡æ ¸äººå‘˜çš„å½“å‰æœªå®Œæˆä»»åŠ¡æ•°ç»„ï¼Œæ•´æ•°æ•°å­—è¾“å…¥æ—¶ç”¨è‹±æ–‡é€—å·éš”å¼€ï¼š&quot;); String inputString=sc.next().toString(); String stringArray[]=inputString.split(&quot;,&quot;); int rev_num = stringArray.length;//å®¡æ ¸äººå‘˜æ€»æ•° String[][] rev_task =new String[rev_num][3]; Random rd = new Random(); List&lt;Integer&gt; rdList = new ArrayList&lt;&gt;(); rdList.removeAll(rdList); int temp; while(rdList.size() &lt; (rev_num+1))&#123; temp = rd.nextInt(100); if(!rdList.contains(temp))&#123; rdList.add(temp); &#125; &#125; System.out.println(&quot;ç®—æ³•å‰çš„ä»»åŠ¡åˆ†é…ï¼š&quot;); for(int i=0;i&lt;rev_num;i++)&#123; rev_task[i][0] = String.valueOf(rdList.get(i) + 1); rev_task[i][1]= stringArray[i]; rev_task[i][2] = &quot;0&quot;; System.out.print(rev_task[i][0]+&quot;,&quot;+rev_task[i][1]+&quot; &quot;); &#125; System.out.println(); AlgorithmUtils.taskAllocation(task_num, rev_num, rev_task);//è°ƒç”¨ç®—æ³•å·¥å…·ç±» System.out.println(&quot;ç®—æ³•åçš„ä»»åŠ¡åˆ†é…ï¼š&quot;); for(int i=0;i&lt;rev_num;i++)&#123; System.out.print(rev_task[i][0]+&quot;,&quot;+rev_task[i][1]+&quot; &quot;); &#125; &#125;&#125; è¿è¡Œç»“æœï¼š è¯·è¾“å…¥ä»»åŠ¡æ•°ï¼š 20 è¯·è¾“å…¥å®¡æ ¸äººå‘˜çš„å½“å‰æœªå®Œæˆä»»åŠ¡æ•°ç»„ï¼Œæ•´æ•°æ•°å­—è¾“å…¥æ—¶ç”¨è‹±æ–‡é€—å·éš”å¼€ï¼š 1,4,3,5,2,7,2,1 ç®—æ³•å‰çš„ä»»åŠ¡åˆ†é…ï¼š 72,1 63,4 73,3 49,5 74,2 43,7 100,2 20,1 ç®—æ³•åçš„ä»»åŠ¡åˆ†é…ï¼š 72,5 63,5 73,5 49,6 74,5 43,7 100,6 20,6 ç”±è¿è¡Œç»“æœå¯çŸ¥ï¼Œ20 ä¸ªä»»åŠ¡å‡è¡¡çš„åˆ†é…ç»™äº†æ¯ä¸ªå®¡æ ¸äººå‘˜ï¼Œè¾¾åˆ°äº†å¹³å‡åˆ†é…çš„ç›®çš„ï¼","categories":[{"name":"dev","slug":"dev","permalink":"http://debug.cool/categories/dev/"}],"tags":[]},{"title":"Pythonå¯è§†åŒ–ç»˜å›¾","slug":"tipsPythonMatplotlib","date":"2019-01-24T16:00:00.000Z","updated":"2021-05-07T07:30:39.981Z","comments":true,"path":"2019/01/25/tipsPythonMatplotlib/","link":"","permalink":"http://debug.cool/2019/01/25/tipsPythonMatplotlib/","excerpt":"Matplotlibæ˜¯ä¸€ä¸ªPythonçš„ç»˜å›¾åº“ï¼Œç²—ç•¥ç†è§£ä¸ºpyé›†æˆMATLABçš„åŠŸèƒ½åŒ…ã€‚ä»¥å‰å­¦æ•°å­¦å»ºæ¨¡çš„æ—¶å€™å¾ˆè®¨åŒMATLABï¼Œæƒ…æ„¿ç”¨Cæ¥å†™ç®—æ³•éƒ½ä¸æƒ³å­¦MATLABï¼Œç°åœ¨æ²¡å¾—æ³•ï¼Œå·¥ä½œéœ€è¦åˆ†æä¸€äº›æ•°æ®ï¼Œè¿˜å¥½Pythonæœ‰è¿™äº›ç›¸å…³çš„åº“ï¼Œè¦ä¸ç„¶çœŸçš„è¦å»ç ”ç©¶ä¸‹MATLABäº†ã€‚","text":"Matplotlibæ˜¯ä¸€ä¸ªPythonçš„ç»˜å›¾åº“ï¼Œç²—ç•¥ç†è§£ä¸ºpyé›†æˆMATLABçš„åŠŸèƒ½åŒ…ã€‚ä»¥å‰å­¦æ•°å­¦å»ºæ¨¡çš„æ—¶å€™å¾ˆè®¨åŒMATLABï¼Œæƒ…æ„¿ç”¨Cæ¥å†™ç®—æ³•éƒ½ä¸æƒ³å­¦MATLABï¼Œç°åœ¨æ²¡å¾—æ³•ï¼Œå·¥ä½œéœ€è¦åˆ†æä¸€äº›æ•°æ®ï¼Œè¿˜å¥½Pythonæœ‰è¿™äº›ç›¸å…³çš„åº“ï¼Œè¦ä¸ç„¶çœŸçš„è¦å»ç ”ç©¶ä¸‹MATLABäº†ã€‚ ç®€å•å›¾å½¢ç»˜åˆ¶ æ ¹æ®åæ ‡ç‚¹ç»˜åˆ¶ï¼š 1234567891011import numpy as npimport matplotlib.pyplot as pltx = np.array([1,2,3,4,5,6,7,8])y = np.array([3,5,7,6,2,6,10,15])plt.plot(x,y,&#x27;r&#x27;)# æŠ˜çº¿ 1 x 2 y 3 colorplt.plot(x,y,&#x27;g&#x27;,lw=10)# 4 line w# æŠ˜çº¿ é¥¼çŠ¶ æŸ±çŠ¶x = np.array([1,2,3,4,5,6,7,8])y = np.array([13,25,17,36,21,16,10,15])plt.bar(x,y,0.2,alpha=1,color=&#x27;b&#x27;)# 5 color 4 é€æ˜åº¦ 3 0.9plt.show() ä¼ å…¥å‚æ•°æ˜¯ numpy æ•°ç»„æ—¶çš„æ•ˆæœï¼š 12345678910111213import numpy as npimport matplotlib.pyplot as pltfor i in range(0,15): # 1 æŸ±çŠ¶å›¾ dateOne = np.zeros([2]) dateOne[0] = i; dateOne[1] = i; y = np.zeros([2]) y[0] = 10 y[1] = 20 plt.plot(dateOne,y,&#x27;r&#x27;,lw=8)plt.show() æ ¹æ®å‡½æ•°å›¾åƒç»˜åˆ¶ï¼š 12345678910111213141516import matplotlib.pyplot as pltimport numpy as np# ä»-1-----1ä¹‹é—´ç­‰é—´éš”é‡‡66ä¸ªæ•°.ä¹Ÿå°±æ˜¯è¯´æ‰€ç”»å‡ºæ¥çš„å›¾å½¢æ˜¯66ä¸ªç‚¹è¿æ¥å¾—æ¥çš„# æ³¨æ„ï¼šå¦‚æœç‚¹æ•°è¿‡å°çš„è¯ä¼šå¯¼è‡´ç”»å‡ºæ¥äºŒæ¬¡å‡½æ•°å›¾åƒä¸å¹³æ»‘x = np.linspace(-1, 1,66)# ç»˜åˆ¶y=2x+1å‡½æ•°çš„å›¾åƒy = 2 * x + 1plt.plot(x, y)plt.show()# ç»˜åˆ¶x^2å‡½æ•°çš„å›¾åƒy = x**2plt.plot(x, y)plt.show() figure çš„ç®€å•ä½¿ç”¨ 12345678910111213141516171819202122232425import matplotlib.pyplot as pltimport numpy as npx = np.linspace(-1, 1, 50)# figure 1y1 = 2 * x + 1plt.figure()plt.plot(x, y1)# figure 2y2 = x**2plt.figure()plt.plot(x, y2)# figure 3ï¼ŒæŒ‡å®šfigureçš„ç¼–å·å¹¶æŒ‡å®šfigureçš„å¤§å°, æŒ‡å®šçº¿çš„é¢œè‰², å®½åº¦å’Œç±»å‹#ä¸€ä¸ªåæ ‡è½´ä¸Šç”»äº†ä¸¤ä¸ªå›¾å½¢y2 = x**2plt.figure(num = 5, figsize = (4, 4))plt.plot(x, y1)plt.plot(x, y2, color = &#x27;red&#x27;, linewidth = 1.0, linestyle = &#x27;--&#x27;)plt.show() ä¸€å…±ä¼šç”»å‡ºä¸‰å¼ å›¾ï¼Œå‰ä¸¤å¼ å’Œä¸Šé¢çš„ç®€å•æ¡ˆä¾‹ç”»å‡ºæ¥çš„ä¸¤å¼ ä¸€æ ·ã€‚ è®¾ç½®åæ ‡è½´ 12345678910111213141516171819202122232425import matplotlib.pyplot as pltimport numpy as np# ç»˜åˆ¶æ™®é€šå›¾åƒx = np.linspace(-1, 1, 50)y1 = 2 * x + 1y2 = x**2plt.figure()plt.plot(x, y1)plt.plot(x, y2, color = &#x27;red&#x27;, linewidth = 1.0, linestyle = &#x27;--&#x27;)# è®¾ç½®åæ ‡è½´çš„å–å€¼èŒƒå›´plt.xlim((-1, 1))plt.ylim((0, 3))# è®¾ç½®åæ ‡è½´çš„lable#æ ‡ç­¾é‡Œé¢å¿…é¡»æ·»åŠ å­—ä½“å˜é‡ï¼šfontproperties=&#x27;SimHei&#x27;,fontsize=14ã€‚ä¸ç„¶å¯èƒ½ä¼šä¹±ç plt.xlabel(u&#x27;è¿™æ˜¯xè½´&#x27;,fontproperties=&#x27;SimHei&#x27;,fontsize=14)plt.ylabel(u&#x27;è¿™æ˜¯yè½´&#x27;,fontproperties=&#x27;SimHei&#x27;,fontsize=14)# è®¾ç½®xåæ ‡è½´åˆ»åº¦, ä¹‹å‰ä¸º0.25, ä¿®æ”¹åä¸º0.5#ä¹Ÿå°±æ˜¯åœ¨åæ ‡è½´ä¸Šå–5ä¸ªç‚¹ï¼Œxè½´çš„èŒƒå›´ä¸º-1åˆ°1æ‰€ä»¥å–5ä¸ªç‚¹ä¹‹ååˆ»åº¦å°±å˜ä¸º0.5äº†plt.xticks(np.linspace(-1, 1, 5))plt.show() ä¸Šé¢ä»£ç çš„åŸºç¡€ä¸ŠåŠ ä¸Šä¸‹é¢ä»£ç ï¼ˆç›´æ¥åŠ è½½æœ€åä¸€å¥ä»£ç å‰é¢å³å¯ï¼‰ï¼š 123456789101112# è·å–å½“å‰çš„åæ ‡è½´, gca = get current axisax = plt.gca()# è®¾ç½®å³è¾¹æ¡†å’Œä¸Šè¾¹æ¡†ax.spines[&#x27;right&#x27;].set_color(&#x27;none&#x27;)ax.spines[&#x27;top&#x27;].set_color(&#x27;none&#x27;)# è®¾ç½®xåæ ‡è½´ä¸ºä¸‹è¾¹æ¡†ax.xaxis.set_ticks_position(&#x27;bottom&#x27;)# è®¾ç½®yåæ ‡è½´ä¸ºå·¦è¾¹æ¡†ax.yaxis.set_ticks_position(&#x27;left&#x27;)# è®¾ç½®xè½´, yå‘¨åœ¨(0, 0)çš„ä½ç½®ax.spines[&#x27;bottom&#x27;].set_position((&#x27;data&#x27;, 0))ax.spines[&#x27;left&#x27;].set_position((&#x27;data&#x27;, 0)) å¦‚æœåœ¨ä¸Šé¢ä»£ç çš„æœ€åä¸€å¥ä¹‹å‰åŠ ä¸Šä¸‹é¢çš„ä»£ç ï¼š 1234# è®¾ç½®åæ ‡è½´labelçš„å¤§å°ï¼ŒèƒŒæ™¯è‰²ç­‰ä¿¡æ¯for label in ax.get_xticklabels() + ax.get_yticklabels(): label.set_fontsize(12) label.set_bbox(dict(facecolor = &#x27;green&#x27;, edgecolor = &#x27;None&#x27;, alpha = 0.7)) è®¾ç½® legend å›¾ä¾‹ 123456789101112131415161718192021222324252627282930313233343536373839404142&quot;&quot;&quot;è®¾ç½®åæ ‡è½´&quot;&quot;&quot;import matplotlib.pyplot as pltimport numpy as np# ç»˜åˆ¶æ™®é€šå›¾åƒx = np.linspace(-1, 1, 50)y1 = 2 * x + 1y2 = x**2plt.figure()plt.plot(x, y1)plt.plot(x, y2, color = &#x27;red&#x27;, linewidth = 1.0, linestyle = &#x27;--&#x27;)# è®¾ç½®åæ ‡è½´çš„å–å€¼èŒƒå›´plt.xlim((-1, 1))plt.ylim((0, 3))# è®¾ç½®åæ ‡è½´çš„lable#æ ‡ç­¾é‡Œé¢å¿…é¡»æ·»åŠ å­—ä½“å˜é‡ï¼šfontproperties=&#x27;SimHei&#x27;,fontsize=14ã€‚ä¸ç„¶å¯èƒ½ä¼šä¹±ç plt.xlabel(u&#x27;è¿™æ˜¯xè½´&#x27;,fontproperties=&#x27;SimHei&#x27;,fontsize=14)plt.ylabel(u&#x27;è¿™æ˜¯yè½´&#x27;,fontproperties=&#x27;SimHei&#x27;,fontsize=14)# è®¾ç½®xåæ ‡è½´åˆ»åº¦, ä¹‹å‰ä¸º0.25, ä¿®æ”¹åä¸º0.5#ä¹Ÿå°±æ˜¯åœ¨åæ ‡è½´ä¸Šå–5ä¸ªç‚¹ï¼Œxè½´çš„èŒƒå›´ä¸º-1åˆ°1æ‰€ä»¥å–5ä¸ªç‚¹ä¹‹ååˆ»åº¦å°±å˜ä¸º0.5äº†plt.xticks(np.linspace(-1, 1, 5))# è·å–å½“å‰çš„åæ ‡è½´, gca = get current axisax = plt.gca()# è®¾ç½®å³è¾¹æ¡†å’Œä¸Šè¾¹æ¡†ax.spines[&#x27;right&#x27;].set_color(&#x27;none&#x27;)ax.spines[&#x27;top&#x27;].set_color(&#x27;none&#x27;)# è®¾ç½®xåæ ‡è½´ä¸ºä¸‹è¾¹æ¡†ax.xaxis.set_ticks_position(&#x27;bottom&#x27;)# è®¾ç½®yåæ ‡è½´ä¸ºå·¦è¾¹æ¡†ax.yaxis.set_ticks_position(&#x27;left&#x27;)# è®¾ç½®xè½´, yå‘¨åœ¨(0, 0)çš„ä½ç½®ax.spines[&#x27;bottom&#x27;].set_position((&#x27;data&#x27;, 0))ax.spines[&#x27;left&#x27;].set_position((&#x27;data&#x27;, 0))plt.show() æ·»åŠ æ³¨è§£å’Œç»˜åˆ¶ç‚¹ä»¥åŠåœ¨å›¾å½¢ä¸Šç»˜åˆ¶çº¿æˆ–ç‚¹ 1234567891011121314151617181920212223242526272829303132333435363738394041&quot;&quot;&quot;æ·»åŠ æ³¨è§£å’Œç»˜åˆ¶ç‚¹ä»¥åŠåœ¨å›¾å½¢ä¸Šç»˜åˆ¶çº¿æˆ–ç‚¹&quot;&quot;&quot;import matplotlib.pyplot as pltimport numpy as np# ç»˜åˆ¶æ™®é€šå›¾åƒx = np.linspace(-3, 3, 50)y = 2 * x + 1plt.figure()plt.plot(x, y)# å°†ä¸Šã€å³è¾¹æ¡†å»æ‰ax = plt.gca()ax.spines[&#x27;right&#x27;].set_color(&#x27;none&#x27;)ax.spines[&#x27;top&#x27;].set_color(&#x27;none&#x27;)# è®¾ç½®xè½´çš„ä½ç½®åŠæ•°æ®åœ¨åæ ‡è½´ä¸Šçš„ä½ç½®ax.xaxis.set_ticks_position(&#x27;bottom&#x27;)ax.spines[&#x27;bottom&#x27;].set_position((&#x27;data&#x27;, 0))# è®¾ç½®yè½´çš„ä½ç½®åŠæ•°æ®åœ¨åæ ‡è½´ä¸Šçš„ä½ç½®ax.yaxis.set_ticks_position(&#x27;left&#x27;)ax.spines[&#x27;left&#x27;].set_position((&#x27;data&#x27;, 0))# å®šä¹‰(x0, y0)ç‚¹x0 = 1y0 = 2 * x0 + 1# ç»˜åˆ¶(x0, y0)ç‚¹plt.scatter(x0, y0, s = 50, color = &#x27;blue&#x27;)# ç»˜åˆ¶è™šçº¿plt.plot([x0, x0], [y0, 0], &#x27;k--&#x27;, lw = 2.5)# ç»˜åˆ¶æ³¨è§£ä¸€plt.annotate(r&#x27;$2 * x + 1 = %s$&#x27; % y0, xy = (x0, y0), xycoords = &#x27;data&#x27;, xytext = (+30, -30), \\ textcoords = &#x27;offset points&#x27;, fontsize = 16, arrowprops = dict(arrowstyle = &#x27;-&gt;&#x27;, connectionstyle = &#x27;arc3, rad = .2&#x27;))# ç»˜åˆ¶æ³¨è§£äºŒplt.text(-3, 3, r&#x27;$Test\\ text. \\mu \\sigma_i, \\alpha_i$&#x27;, fontdict = &#123;&#x27;size&#x27;: 16, &#x27;color&#x27;: &#x27;red&#x27;&#125;)plt.show() ç»˜åˆ¶æ•£ç‚¹å›¾ 1234567891011121314151617181920212223242526&quot;&quot;&quot;ç»˜åˆ¶æ•£ç‚¹å›¾&quot;&quot;&quot;import numpy as npimport matplotlib.pyplot as plt# æ•°æ®ä¸ªæ•°n = 1024# å‡å€¼ä¸º0, æ–¹å·®ä¸º1çš„éšæœºæ•°x = np.random.normal(0, 1, n)y = np.random.normal(0, 1, n)# è®¡ç®—é¢œè‰²å€¼color = np.arctan2(y, x)# ç»˜åˆ¶æ•£ç‚¹å›¾plt.scatter(x, y, s = 75, c = color, alpha = 0.5)# è®¾ç½®åæ ‡è½´èŒƒå›´plt.xlim((-1.5, 1.5))plt.ylim((-1.5, 1.5))# ä¸æ˜¾ç¤ºåæ ‡è½´çš„å€¼plt.xticks(())plt.yticks(())plt.show() ç»˜åˆ¶æŸ±çŠ¶å›¾ 1234567891011121314151617181920212223242526272829303132333435&quot;&quot;&quot;ç»˜åˆ¶æŸ±çŠ¶å›¾&quot;&quot;&quot;import matplotlib.pyplot as pltimport numpy as np# æ•°æ®æ•°ç›®n = 10x = np.arange(n)# ç”Ÿæˆæ•°æ®, å‡åŒ€åˆ†å¸ƒ(0.5, 1.0)ä¹‹é—´y1 = (1 - x / float(n)) * np.random.uniform(0.5, 1.0, n)y2 = (1 - x / float(n)) * np.random.uniform(0.5, 1.0, n)# ç»˜åˆ¶æŸ±çŠ¶å›¾, å‘ä¸Šplt.bar(x, y1, facecolor = &#x27;blue&#x27;, edgecolor = &#x27;white&#x27;)# ç»˜åˆ¶æŸ±çŠ¶å›¾, å‘ä¸‹plt.bar(x, -y2, facecolor = &#x27;green&#x27;, edgecolor = &#x27;white&#x27;)temp = zip(x, y2)# åœ¨æŸ±çŠ¶å›¾ä¸Šæ˜¾ç¤ºå…·ä½“æ•°å€¼, haæ°´å¹³å¯¹é½, vaå‚ç›´å¯¹é½for x, y in zip(x, y1): plt.text(x + 0.05, y + 0.1, &#x27;%.2f&#x27; % y, ha = &#x27;center&#x27;, va = &#x27;bottom&#x27;)for x, y in temp: plt.text(x + 0.05, -y - 0.1, &#x27;%.2f&#x27; % y, ha = &#x27;center&#x27;, va = &#x27;bottom&#x27;)# è®¾ç½®åæ ‡è½´èŒƒå›´plt.xlim(-1, n)plt.ylim(-1.5, 1.5)# å»é™¤åæ ‡è½´plt.xticks(())plt.yticks(())plt.show() ç»˜åˆ¶ç™»é«˜çº¿å›¾ 12345678910111213141516171819202122232425262728293031&quot;&quot;&quot;ç»˜åˆ¶ç™»é«˜çº¿å›¾&quot;&quot;&quot;import matplotlib.pyplot as pltimport numpy as np# å®šä¹‰ç­‰é«˜çº¿é«˜åº¦å‡½æ•°def f(x, y): return (1 - x / 2 + x ** 5 + y ** 3) * np.exp(- x ** 2 - y ** 2)# æ•°æ®æ•°ç›®n = 256# å®šä¹‰x, yx = np.linspace(-3, 3, n)y = np.linspace(-3, 3, n)# ç”Ÿæˆç½‘æ ¼æ•°æ®X, Y = np.meshgrid(x, y)# å¡«å……ç­‰é«˜çº¿çš„é¢œè‰², 8æ˜¯ç­‰é«˜çº¿åˆ†ä¸ºå‡ éƒ¨åˆ†plt.contourf(X, Y, f(X, Y), 8, alpha = 0.75, cmap = plt.cm.hot)# ç»˜åˆ¶ç­‰é«˜çº¿C = plt.contour(X, Y, f(X, Y), 8, colors = &#x27;black&#x27;, linewidth = 0.5)# ç»˜åˆ¶ç­‰é«˜çº¿æ•°æ®plt.clabel(C, inline = True, fontsize = 10)# å»é™¤åæ ‡è½´plt.xticks(())plt.yticks(())plt.show() ç»˜åˆ¶ Image 12345678910111213141516&quot;&quot;&quot;ç»˜åˆ¶Image&quot;&quot;&quot;import matplotlib.pyplot as pltimport numpy as np# å®šä¹‰å›¾åƒæ•°æ®a = np.linspace(0, 1, 9).reshape(3, 3)# æ˜¾ç¤ºå›¾åƒæ•°æ®plt.imshow(a, interpolation = &#x27;nearest&#x27;, cmap = &#x27;bone&#x27;, origin = &#x27;lower&#x27;)# æ·»åŠ é¢œè‰²æ¡plt.colorbar()# å»æ‰åæ ‡è½´plt.xticks(())plt.yticks(())plt.show() ç»˜åˆ¶ 3D å›¾å½¢ 1234567891011121314151617181920212223242526272829303132333435&quot;&quot;&quot;ç»˜åˆ¶3då›¾å½¢&quot;&quot;&quot;import matplotlib.pyplot as pltimport numpy as npfrom mpl_toolkits.mplot3d import Axes3D# å®šä¹‰figurefig = plt.figure()# å°†figureå˜ä¸º3dax = Axes3D(fig)# æ•°æ®æ•°ç›®n = 256# å®šä¹‰x, yx = np.arange(-4, 4, 0.25)y = np.arange(-4, 4, 0.25)# ç”Ÿæˆç½‘æ ¼æ•°æ®X, Y = np.meshgrid(x, y)# è®¡ç®—æ¯ä¸ªç‚¹å¯¹çš„é•¿åº¦R = np.sqrt(X ** 2 + Y ** 2)# è®¡ç®—Zè½´çš„é«˜åº¦Z = np.sin(R)# ç»˜åˆ¶3Dæ›²é¢ax.plot_surface(X, Y, Z, rstride = 1, cstride = 1, cmap = plt.get_cmap(&#x27;rainbow&#x27;))# ç»˜åˆ¶ä»3Dæ›²é¢åˆ°åº•éƒ¨çš„æŠ•å½±ax.contour(X, Y, Z, zdim = &#x27;z&#x27;, offset = -2, cmap = &#x27;rainbow&#x27;)# è®¾ç½®zè½´çš„ç»´åº¦ax.set_zlim(-2, 2)plt.show() subplot ç»˜åˆ¶å¤šå›¾ 123456789101112131415161718192021&quot;&quot;&quot;subplotç»˜åˆ¶å¤šå›¾&quot;&quot;&quot;import matplotlib.pyplot as pltplt.figure()# ç»˜åˆ¶ç¬¬ä¸€ä¸ªå›¾plt.subplot(2, 2, 1)plt.plot([0, 1], [0, 1])# ç»˜åˆ¶ç¬¬äºŒä¸ªå›¾plt.subplot(2, 2, 2)plt.plot([0, 1], [0, 1])# ç»˜åˆ¶ç¬¬ä¸‰ä¸ªå›¾plt.subplot(2, 2, 3)plt.plot([0, 1], [0, 1])# ç»˜åˆ¶ç¬¬å››ä¸ªå›¾plt.subplot(2, 2, 4)plt.plot([0, 1], [0, 1])plt.show() 123456789101112131415161718192021&quot;&quot;&quot;subplotç»˜åˆ¶å¤šå›¾&quot;&quot;&quot;import matplotlib.pyplot as pltplt.figure()# ç»˜åˆ¶ç¬¬ä¸€ä¸ªå›¾plt.subplot(2, 1, 1)plt.plot([0, 1], [0, 1])# ç»˜åˆ¶ç¬¬äºŒä¸ªå›¾plt.subplot(2, 3, 4)plt.plot([0, 1], [0, 1])# ç»˜åˆ¶ç¬¬ä¸‰ä¸ªå›¾plt.subplot(2, 3, 5)plt.plot([0, 1], [0, 1])# ç»˜åˆ¶ç¬¬å››ä¸ªå›¾plt.subplot(2, 3, 6)plt.plot([0, 1], [0, 1])plt.show() figure ç»˜åˆ¶å¤šå›¾ 12345678910111213141516171819202122232425&quot;&quot;&quot;figureç»˜åˆ¶å¤šå›¾&quot;&quot;&quot;import matplotlib.pyplot as plt# å®šä¹‰figureplt.figure()# figureåˆ†æˆ3è¡Œ3åˆ—, å–å¾—ç¬¬ä¸€ä¸ªå­å›¾çš„å¥æŸ„, ç¬¬ä¸€ä¸ªå­å›¾è·¨åº¦ä¸º1è¡Œ3åˆ—, èµ·ç‚¹æ˜¯è¡¨æ ¼(0, 0)ax1 = plt.subplot2grid((3, 3), (0, 0), colspan = 3, rowspan = 1)ax1.plot([0, 1], [0, 1])ax1.set_title(&#x27;Test&#x27;)# figureåˆ†æˆ3è¡Œ3åˆ—, å–å¾—ç¬¬äºŒä¸ªå­å›¾çš„å¥æŸ„, ç¬¬äºŒä¸ªå­å›¾è·¨åº¦ä¸º1è¡Œ3åˆ—, èµ·ç‚¹æ˜¯è¡¨æ ¼(1, 0)ax2 = plt.subplot2grid((3, 3), (1, 0), colspan = 2, rowspan = 1)ax2.plot([0, 1], [0, 1])# figureåˆ†æˆ3è¡Œ3åˆ—, å–å¾—ç¬¬ä¸‰ä¸ªå­å›¾çš„å¥æŸ„, ç¬¬ä¸‰ä¸ªå­å›¾è·¨åº¦ä¸º1è¡Œ1åˆ—, èµ·ç‚¹æ˜¯è¡¨æ ¼(1, 2)ax3 = plt.subplot2grid((3, 3), (1, 2), colspan = 1, rowspan = 1)ax3.plot([0, 1], [0, 1])# figureåˆ†æˆ3è¡Œ3åˆ—, å–å¾—ç¬¬å››ä¸ªå­å›¾çš„å¥æŸ„, ç¬¬å››ä¸ªå­å›¾è·¨åº¦ä¸º1è¡Œ3åˆ—, èµ·ç‚¹æ˜¯è¡¨æ ¼(2, 0)ax4 = plt.subplot2grid((3, 3), (2, 0), colspan = 3, rowspan = 1)ax4.plot([0, 1], [0, 1])plt.show() æˆ– 123456789101112131415161718192021222324252627&quot;&quot;&quot;figureç»˜åˆ¶å¤šå›¾&quot;&quot;&quot;import matplotlib.pyplot as pltimport matplotlib.gridspec as gridspec# å®šä¹‰figureplt.figure()# åˆ†éš”figuregs = gridspec.GridSpec(3, 3)ax1 = plt.subplot(gs[0, :])ax2 = plt.subplot(gs[1, 0:2])ax3 = plt.subplot(gs[1, 2])ax4 = plt.subplot(gs[2, :])# ç»˜åˆ¶å›¾åƒax1.plot([0, 1], [0, 1])ax1.set_title(&#x27;Test&#x27;)ax2.plot([0, 1], [0, 1])ax3.plot([0, 1], [0, 1])ax4.plot([0, 1], [0, 1])plt.show() figure å›¾çš„åµŒå¥— 1234567891011121314151617181920212223242526272829303132333435363738394041424344&quot;&quot;&quot;figureå›¾çš„åµŒå¥—&quot;&quot;&quot;import matplotlib.pyplot as plt# å®šä¹‰figurefig = plt.figure()# å®šä¹‰æ•°æ®x = [1, 2, 3, 4, 5, 6, 7]y = [1, 3, 4, 2, 5, 8, 6]# figureçš„ç™¾åˆ†æ¯”, ä»figure 10%çš„ä½ç½®å¼€å§‹ç»˜åˆ¶, å®½é«˜æ˜¯figureçš„80%left, bottom, width, height = 0.1, 0.1, 0.8, 0.8# è·å¾—ç»˜åˆ¶çš„å¥æŸ„ax1 = fig.add_axes([left, bottom, width, height])# ç»˜åˆ¶ç‚¹(x,y)ax1.plot(x, y, &#x27;r&#x27;)ax1.set_xlabel(&#x27;x&#x27;)ax1.set_ylabel(&#x27;y&#x27;)ax1.set_title(&#x27;test&#x27;)# åµŒå¥—æ–¹æ³•ä¸€# figureçš„ç™¾åˆ†æ¯”, ä»figure 10%çš„ä½ç½®å¼€å§‹ç»˜åˆ¶, å®½é«˜æ˜¯figureçš„80%left, bottom, width, height = 0.2, 0.6, 0.25, 0.25# è·å¾—ç»˜åˆ¶çš„å¥æŸ„ax2 = fig.add_axes([left, bottom, width, height])# ç»˜åˆ¶ç‚¹(x,y)ax2.plot(x, y, &#x27;r&#x27;)ax2.set_xlabel(&#x27;x&#x27;)ax2.set_ylabel(&#x27;y&#x27;)ax2.set_title(&#x27;part1&#x27;)# åµŒå¥—æ–¹æ³•äºŒplt.axes([bottom, left, width, height])plt.plot(x, y, &#x27;r&#x27;)plt.xlabel(&#x27;x&#x27;)plt.ylabel(&#x27;y&#x27;)plt.title(&#x27;part2&#x27;)plt.show() ä¸»æ¬¡åæ ‡è½´ 12345678910111213141516171819202122232425&quot;&quot;&quot;ä¸»æ¬¡åæ ‡è½´&quot;&quot;&quot;import numpy as npimport matplotlib.pyplot as plt# å®šä¹‰æ•°æ®x = np.arange(0, 10, 0.1)y1 = 0.05 * x ** 2y2 = -1 * y1# å®šä¹‰figurefig, ax1 = plt.subplots()# å¾—åˆ°ax1çš„å¯¹ç§°è½´ax2ax2 = ax1.twinx()# ç»˜åˆ¶å›¾åƒax1.plot(x, y1, &#x27;g-&#x27;)ax2.plot(x, y2, &#x27;b--&#x27;)# è®¾ç½®labelax1.set_xlabel(&#x27;X data&#x27;)ax1.set_xlabel(&#x27;Y1&#x27;, color = &#x27;g&#x27;)ax2.set_xlabel(&#x27;Y2&#x27;, color = &#x27;b&#x27;)plt.show() åˆ›å»ºåŠ¨ç”» 1234567891011121314151617181920212223242526272829303132333435&quot;&quot;&quot;åŠ¨ç”»&quot;&quot;&quot;import numpy as npimport matplotlib.pyplot as pltfrom matplotlib import animation# å®šä¹‰figurefig, ax = plt.subplots()# å®šä¹‰æ•°æ®x = np.arange(0, 2 * np.pi, 0.01)# line, è¡¨ç¤ºåªå–è¿”å›å€¼ä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ line, = ax.plot(x, np.sin(x))# å®šä¹‰åŠ¨ç”»çš„æ›´æ–°def update(i): line.set_ydata(np.sin(x + i/10)) return line,# å®šä¹‰åŠ¨ç”»çš„åˆå§‹å€¼def init(): line.set_ydata(np.sin(x)) return line,# åˆ›å»ºåŠ¨ç”»ani = animation.FuncAnimation(fig = fig, func = update, init_func = init, interval = 10, blit = False, frames = 200)# å±•ç¤ºåŠ¨ç”»plt.show()# åŠ¨ç”»ä¿å­˜#æˆ‘è¿™é‡Œæ˜¯ä¿å­˜ä¸ºhtmlæ–‡ä»¶äº†ï¼Œæ‰“å¼€å³å¯å®Œç¾è¿è¡Œani.save(&#x27;sin.html&#x27;, writer = &#x27;imagemagick&#x27;, fps = 30, dpi = 100)","categories":[{"name":"tips","slug":"tips","permalink":"http://debug.cool/categories/tips/"}],"tags":[{"name":"Matplotlib","slug":"Matplotlib","permalink":"http://debug.cool/tags/Matplotlib/"}]},{"title":"é€†å‘ç¬”è®°æ¢³ç†","slug":"noteReverseEnfineering","date":"2018-10-09T23:33:25.000Z","updated":"2021-05-07T07:30:39.984Z","comments":true,"path":"2018/10/10/noteReverseEnfineering/","link":"","permalink":"http://debug.cool/2018/10/10/noteReverseEnfineering/","excerpt":"å…ˆæŠŠå¤§çº²åˆ—å‡ºæ¥ï¼Œæœ‰ç©ºå°±æ…¢æ…¢æ›´æ–°å®Œå–„ã€‚","text":"å…ˆæŠŠå¤§çº²åˆ—å‡ºæ¥ï¼Œæœ‰ç©ºå°±æ…¢æ…¢æ›´æ–°å®Œå–„ã€‚ x86 ä¸ x64 x86æ˜¯åŸºäºintel 8086å¤„ç†å™¨çš„å°ç«¯ï¼ˆlittle-endianï¼‰ä½“ç³»ç»“æ„ï¼ˆIA-32çš„32ä½å®ç°ï¼‰ï¼Œä»–åœ¨ä¸¤ç§æ“ä½œæ¨¡å¼ä¸‹æ‰§è¡Œ å®æ¨¡å¼ï¼šå¤„ç†æœºåˆšåˆšä¸Šç”µååªæ”¯æŒ 16 ä½æŒ‡ä»¤é›†çš„çŠ¶æ€ã€‚ ä¿æŠ¤æ¨¡å¼ï¼šå¤„ç†æœºæ”¯æŒè™šæ‹Ÿå†…å­˜ã€åˆ†é¡µåŠå…¶ä»–åŠŸèƒ½çš„çŠ¶æ€ã€‚ è¯¥ä½“ç³»çš„64ä½æ‰©å±•ç§°ä¸ºx64æˆ–x86-64ï¼Œx86é€šè¿‡ä¸€ç§ç§°ä¸ºç¯çº§åˆ«(ring level)çš„æŠ½è±¡æ¥æ”¯æŒç‰¹æƒéš”ç¦»(privilege separation)ã€‚ å¯„å­˜å™¨ç»„ä¸æ•°æ®ç±»å‹ è¿è¡Œäºä¿æŠ¤æ¨¡å¼ä¸‹çš„x86ä½“ç³»ç»“æ„æœ‰ 8 ä¸ª32ä½é€šç”¨å¯„å­˜å™¨(General Purpose Registers, GPR):EAXã€EBXã€ECXã€EDXã€EDIã€ESIã€EBPã€ESPã€‚è¿™äº›å¯„å­˜å™¨è¿˜èƒ½è¿›ä¸€æ­¥åˆ†åŒ–æˆ8ä½å’Œ16ä½å¯„å­˜å™¨ã€‚æŒ‡ä»¤æŒ‡é’ˆå­˜å‚¨åœ¨EIPå¯„å­˜å™¨ä¸­ã€‚ 12345678910111213141531 23 15 7 0| EAX || | | AX || | |AH |AL |31 23 15 7 0 31 23 15 7 0| EBP | | ESP || | BP | | | SP |31 23 15 7 0 31 23 15 7 0| ESI | | EDI || | SI | | | DI |31 23 15 7 0 31 23 15 7 0| EIP | | EFLAGS | å¯„å­˜å™¨ ç”¨é€” ECX å¾ªç¯è®¡æ•° ESI å­—ç¬¦ä¸²/å†…å­˜æ“ä½œçš„æº EDI å­—ç¬¦ä¸²/å†…å­˜æ“ä½œä¸­çš„ç›®æ ‡ EBP å¸§åŸºæŒ‡é’ˆ ESP æ ˆæŒ‡é’ˆ å¸¸ç”¨çš„æ•°æ®ç±»å‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š å­—èŠ‚(Byte): 8 ä½ï¼Œæ¯”å¦‚ ALã€BLã€CLã€‚ å­—(Word): 16 ä½ï¼Œæ¯”å¦‚ AXã€BXã€CXã€‚ åŒå­—(Double Word): 32 ä½ï¼Œæ¯”å¦‚ EAXã€EBXã€ECXã€‚ å››å­—(Quad Word): 64 ä½ï¼Œè™½ç„¶ x86 å¹¶ä¸æ”¯æŒ 64 ä½ GPRï¼Œä½†æ˜¯åœ¨æŸäº›åœºæ™¯ä¸‹å¯ä»¥æŠŠä¸¤ä¸ªå¯„å­˜å™¨(é€šå¸¸æ˜¯ EDA:EAX)çš„å†…å®¹åˆå¹¶èµ·æ¥å½“ä½œ 64 ä½çš„å€¼ã€‚æ¯”å¦‚ RDTSC æŒ‡ä»¤ä¼šæŠŠä¸€ä¸ª 64 ä½å€¼å†™å…¥ EDX:EAX å¯„å­˜å™¨ã€‚ 32ä½å¯„å­˜å™¨EFLAGSç”¨äºå­˜å‚¨è¿ç®—çŠ¶æ€ä»¥åŠå…¶ä»–è¿è¡ŒçŠ¶æ€ï¼ˆæ¯”å¦‚é™·é˜±æ ‡å¿—ä½ï¼‰ã€‚ é™¤äº†é€šç”¨å¯„å­˜å™¨ã€EIPå’ŒEFLAGSï¼Œè¿˜æœ‰ä¸€äº›å¯„å­˜å™¨ç”¨äºæ§åˆ¶é‡è¦çš„åº•å±‚ç³»ç»Ÿæœºåˆ¶ï¼Œæ¯”å¦‚è™šæ‹Ÿå†…å­˜ã€ç»ˆç«¯å’Œè°ƒè¯•ç­‰ã€‚ä¾‹å¦‚ï¼šCR0å¯„å­˜å™¨æ§åˆ¶åˆ†é¡µæœºåˆ¶çš„å¼€å…³ï¼ŒCR2å¯„å­˜å™¨ä¸­ä¿å­˜ç€å¯¼è‡´ç¼ºé¡µå¼‚å¸¸å‘ç”Ÿçš„çº¿æ€§åœ°å€ï¼ŒCR3æ˜¯åˆ†é¡µæ•°æ®ç»“æ„çš„åŸºåœ°å€ï¼ŒCR4æ§åˆ¶ç¡¬ä»¶è™šæ‹ŸåŒ–è®¾ç½®ã€‚DR0ï½DR7å¯„å­˜å™¨ç”¨äºè®¾ç½®å†…å­˜æ–­ç‚¹ã€‚ï¼ˆæ³¨æ„ï¼Œè™½ç„¶è°ƒè¯•å¯„å­˜å™¨æœ‰ 8 ä¸ªï¼Œä½†ç³»ç»Ÿåªæ”¯æŒ 4 ä¸ªå†…å­˜æ–­ç‚¹DR0ï½DR3ï¼Œå…¶ä½™å¯„å­˜å™¨ç”¨äºä¿å­˜çŠ¶æ€ï¼‰ æŒ‡ä»¤é›† x86æŒ‡ä»¤é›†ä¸ºå¯„å­˜å™¨å’Œå†…å­˜ä¹‹é—´çš„æ•°æ®ç§»åŠ¨æä¾›äº†å¾ˆå¤§çš„çµæ´»æ€§ã€‚æ•°æ®ç§»åŠ¨å¯ä»¥åˆ†ä¸º 5 ç§æ–¹å¼ï¼š ç«‹å³æ•°åˆ°å¯„å­˜å™¨ å¯„å­˜å™¨åˆ°å¯„å­˜å™¨ ç«‹å³æ•°åˆ°å†…å­˜ å¯„å­˜å™¨åˆ°å†…å­˜ï¼Œæˆ–åå‘ å†…å­˜åˆ°å†…å­˜ å‰å››ç§æ˜¯æ‰€æœ‰ç°ä»£ä½“ç³»ç»“æ„éƒ½æ”¯æŒçš„ï¼Œè€Œæœ€åä¸€ç§æ˜¯x86ç‹¬æœ‰çš„ã€‚åƒ ARM è¿™æ ·çš„ç»å…¸RISCä½“ç³»ç»“æ„åªæ”¯æŒé€šè¿‡åŠ è½½/å­˜å‚¨æŒ‡ä»¤ï¼ˆLDR/STRï¼‰ä»å†…å­˜è¯»å‡ºæˆ–åå‘å†…å­˜å†™å…¥æ•°æ®ã€‚æ¯”å¦‚é€’å¢å†…å­˜ä¸­æ•°æ®å€¼éœ€è¦æ‰§è¡Œ 3 æ¡æŒ‡ä»¤ï¼š æŠŠæ•°æ®ä»å†…å­˜è¯»å…¥åˆ°å¯„å­˜å™¨ä¸­ï¼ˆLDRï¼‰ å¯„å­˜å™¨åŠ  1ï¼ˆADDï¼‰ æŠŠå¯„å­˜å™¨å€¼å†™å›å†…å­˜ï¼ˆSTRï¼‰ è€Œå¯¹å·²x86æ¥è¯´ï¼Œå› ä¸ºå¯ä»¥ç›´æ¥è®¿é—®å†…å­˜ï¼Œè¿™æ ·çš„æ“ä½œåªéœ€è¦ä¸€æ¡æŒ‡ä»¤ï¼ˆINCæˆ–ADDï¼‰ã€‚MOVSæŒ‡ä»¤å¯ä»¥åŒæ—¶è¯»å†™å†…å­˜ã€‚ ARMï¼š 1234561B 68 LDR R3, [R3]; è¯»å…¥åœ°å€R3å¤„çš„å€¼å¹¶ä¿å­˜åœ¨R2ä¸­5A 1C ADDS R2, R3, #1; åŠ 11A 60 STR R2, [R3]; æŠŠæ›´æ–°åçš„å€¼å†™å›åœ°å€R3å¤„ x86ï¼š 12FF 00 inc dword ptr [eax]; ç›´æ¥é€’å¢åœ°å€EAXå¤„çš„å€¼ x86çš„å¦ä¸€ä¸ªé‡è¦ç‰¹æ€§æ˜¯ä½¿ç”¨äº†å˜é•¿æŒ‡ä»¤â€”â€”æŒ‡ä»¤çš„é•¿åº¦ä»1åˆ°15å­—èŠ‚ä¸ç­‰ã€‚è€Œåœ¨ARMä¸Šï¼ŒæŒ‡ä»¤é•¿åº¦åªèƒ½æ˜¯2å­—èŠ‚æˆ–4å­—èŠ‚ã€‚ è¯­æ³• æ ¹æ®æ±‡ç¼–å™¨/åæ±‡ç¼–å™¨çš„ä¸åŒï¼Œx86 æ±‡ç¼–ä»£ç æœ‰ä¸¤ç§è®°æ³•ï¼šIntelå’ŒAT&amp;Tã€‚ Intel(Windows ä¸Šçš„è®°æ³•)ï¼š 123mov ecx, AABBCCDDhmov ecx, [eax]mov ecx, eax AT&amp;T(unix ä¸Šçš„ GCC è®°æ³•): 123movl $0xAABBCCDD, %ecxmovl (%eax), %ecxmovl %eax, %ecx AT&amp;T è®°æ³•åœ¨å¯„å­˜å™¨å‰åŠ å‰ç¼€%ï¼Œç«‹å³æ•°å‰åŠ $ã€‚Intel è®°æ³•ä¸åŠ å‰ç¼€ã€‚ AT&amp;T è®°æ³•åŠ å…¥äº†æŒ‡ç¤ºæŒ‡ä»¤å®½åº¦çš„åç¼€ï¼Œæ¯”å¦‚ MOVL(é•¿æ•´å‹)ã€MOVB(å­—èŠ‚)ç­‰ã€‚Intel è®°æ³•æ²¡æœ‰è¿™ç§æ ‡è®°ã€‚ AT&amp;T è®°æ³•æŠŠæºæ“ä½œæ•°æ”¾åœ¨ç›®æ ‡æ“ä½œæ•°ä¹‹å‰ã€‚Intel è®°æ³•ä¸ä¹‹ç›¸åã€‚ æ•°æ®ç§»åŠ¨ æŒ‡ä»¤ç”¨äºæ“ä½œæ¥è‡ªå¯„å­˜å™¨æˆ–ä¸»å†…å­˜ä¸­çš„æ•°æ®ã€‚ æ ˆæ“ä½œä¸å‡½æ•°è°ƒç”¨ C è¯­è¨€çš„å±€éƒ¨å˜é‡å°±å­˜å‚¨åœ¨å‡½æ•°çš„æ ˆç©ºé—´ä¸­ã€‚æ“ä½œç³»ç»Ÿä»ring3åˆ‡æ¢åˆ°ring0æ—¶ï¼Œè¦æŠŠçŠ¶æ€ä¿¡æ¯ä¿å­˜åœ¨æ ˆä¸Šã€‚å…·ä½“æ¥è®²ï¼Œx86ä¸Šçš„æ ˆæ˜¯ESPæŒ‡å‘çš„ä¸€æ®µè¿ç»­å†…å­˜åŒºåŸŸï¼Œä»–å‘ä¸‹å¢é•¿ã€‚å‹æ ˆï¼ˆpushæŒ‡ä»¤ï¼‰é€’å‡ESPçš„å€¼ï¼Œç„¶åæŠŠæ•°æ®å†™å…¥ ESP æŒ‡å‘çš„ä½ç½®ï¼›å‡ºæ ˆï¼ˆpopæŒ‡ä»¤ï¼‰è¯»å‡ºESPæŒ‡å‘ä½ç½®çš„æ•°æ®å¹¶é€’å¢ESPã€‚é»˜è®¤çš„è‡ªåŠ¨é€’å¢/é€’å‡å€¼ä¸º 4ï¼Œä½†æ˜¯é€šè¿‡å‰ç¼€è¿™ä¸ªå€¼ä¹Ÿå¯ä»¥æ›¿æ¢ä¸º 1 æˆ– 2ã€‚å®é™…ä¸Šï¼Œè¿™ä¸ªå€¼å‡ ä¹æ€»æ˜¯ 4ï¼Œå› ä¸º OS è¦æ±‚æ ˆåŒå­—å¯¹é½ã€‚ å‡å®šESPæœ€åˆæŒ‡å‘0xb20000ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„ä»£ç ï¼š 12345678910111213; èµ·å§‹å€¼ESP=0xb20000B8 AA AA AA AA MOV EAX,0AAAAAAAAhBB BB BB BB BB MOV EBX,0BBBBBBBBhB9 CC CC CC CC MOV ECX,0CCCCCCCChBA DD DD DD DD MOV EDX,0DDDDDDDDh50 PUSH EAX; åœ°å€0xb1fffcå€¼å°†ä¼šæ˜¯0xAAAAAAAAï¼ŒESPå°†ä¼šæ˜¯0xb1fffc ï¼ˆ=0xb20000-4ï¼‰53 PUSH EBX; åœ°å€0xb1fff8çš„å€¼å°†ä¼šæ˜¯0xBBBBBBBBï¼ŒESPå°†ä¼šæ˜¯0xb1fff8 ï¼ˆ=0xb1fffc-4ï¼‰5E POP ESI; ESIå€¼å°†ä¼šæ˜¯0xBBBBBBBBï¼ŒESPå°†ä¼šæ˜¯0xb1fffc ï¼ˆ=0xb1fff8+4ï¼‰5F POP EDI; EDIå€¼å°†ä¼šæ˜¯0xAAAAAAAAï¼ŒESPå°†ä¼šæ˜¯0xb20000 ï¼ˆ=0xb1fffc+4ï¼‰ å…¶ä»–ä¸€äº›æŒ‡ä»¤ä¹Ÿå¯ä»¥ç›´æ¥ä¿®æ”¹ESPï¼Œæ¯”å¦‚ADDå’ŒSUB é«˜çº§è¯­è¨€ä¸­æœ‰å‡½æ•°çš„æ¦‚å¿µï¼Œå‡½æ•°å¯ä»¥è¢«è°ƒç”¨ä¹Ÿå¯ä»¥è¿”å›ï¼Œè€Œå¤„ç†å™¨æœ¬èº«å¹¶æ²¡æœ‰æä¾›è¿™æ ·çš„æŠ½è±¡ã€‚åœ¨æœ€åº•å±‚ï¼Œå¤„ç†å™¨åªæ“ä½œå…·ä½“å¯¹è±¡ï¼Œæ¯”å¦‚å¯„å­˜å™¨æˆ–å†…å­˜ä¸­çš„æ•°æ®ã€‚åœ¨æœºå™¨è¯­è¨€è¿™ä¸€å±‚çº§é€šè¿‡æ ˆæ•°æ®ç»“æ„æ¥å®ç°å‡½æ•°ã€‚ C ä»£ç ï¼š 12345int__cdecl addme(short a, short b)&#123; rerurn a+b;&#125; æ±‡ç¼–ä»£ç ï¼š 12345678910004113A0 55 push ebp004113A1 8B EC mov ebp, esp...004113BE 0F BF 45 08 movsx eax, word ptr [ebp+8]004113C2 0F BF 4D 0C movsx ecx, word ptr [ebp+0ch]...004113CB 8B E5 mov esp, ebp004113CD 5D pop ebp004113CE C3 retn; retn æŒ‡ä»¤å°±æ˜¯æŠŠå­˜å‚¨åœ¨æ ˆé¡¶çš„åœ°å€å‡ºæ ˆåˆ°EIPï¼Œç„¶åæŠŠæ§åˆ¶ä¼ é€’ç»™ä»–ï¼ˆå®Œå…¨ä¸POP EIPç±»ä¼¼ï¼Œä½†æ˜¯x86ä¸Šå¹¶æ²¡æœ‰è¿™æ ·çš„æŒ‡ä»¤åºåˆ—ï¼‰ é€šè¿‡ä¸‹é¢çš„ä»£ç è°ƒç”¨å‡½æ•°ï¼š C ä»£ç  1sum = addme(x,y); æ±‡ç¼–ä»£ç  12345004129F3 50 push eax...004129F8 51 push ecx004129F9 E8 F1 E7 FF FF call addme004129FE 83 C4 08 add esp, 8 å…ˆäº†è§£ä¸€ä¸‹è°ƒç”¨æƒ¯ä¾‹ï¼Œè°ƒç”¨æƒ¯ä¾‹è§„å®šäº†åœ¨æœºå™¨å±‚é¢å¦‚ä½•è¿›è¡Œå‡½æ•°è°ƒç”¨ã€‚å¯¹äºç‰¹å®šçš„ç³»ç»Ÿæ¥è¯´ä»–æ˜¯ç”±åº”ç”¨ç¨‹åºäºŒè¿›åˆ¶æ¥å£(Application Binary Interface, ABI)æ‰€å®šä¹‰çš„ã€‚ è°ƒç”¨æƒ¯ä¾‹ CDECL STDCALL FASTCALL å‚æ•° ä»å³å‘å·¦å‹æ ˆã€‚è°ƒç”¨æ–¹è´Ÿè´£åœ¨è°ƒç”¨åæ¸…ç†æ ˆ ä¸ CDECL ç›¸åŒï¼Œé™¤äº†è¢«è°ƒç”¨æ–¹è´Ÿè´£æ¸…ç†æ ˆ å‰ä¸¤ä¸ªå‚æ•°é€šè¿‡ ECX å’Œ EDX ä¼ é€’ã€‚å…¶ä½™å‹æ ˆ è¿”å›å€¼ ä¿å­˜åœ¨ EAX ä¸­ ä¿å­˜åœ¨ EAX ä¸­ ä¿å­˜åœ¨ EAX ä¸­ éæ˜“å¤±å¯„å­˜å™¨ EBPã€ESPã€EBXã€ESIã€EDI EBPã€ESPã€EBXã€ESIã€EDI EBPã€ESPã€EBXã€ESIã€EDI ç°åœ¨æˆ‘ä»¬å›åˆ°å‰é¢çš„ä»£ç ç‰‡æ®µæ¥è®¨è®ºå‡½æ•°addmeæ˜¯å¦‚ä½•è¢«è°ƒç”¨çš„ã€‚ åœ¨ç¬¬ 1 è¡Œå’Œç¬¬ 3 è¡Œä»£ç ä¸­æŠŠä¸¤ä¸ªå‚æ•°å‹å…¥æ ˆé¡¶ï¼ŒEXCå’ŒEAXåˆ†åˆ«æ˜¯ç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªå‚æ•°ã€‚ç¬¬å››è¡Œä»£ç é€šè¿‡CALLæŒ‡ä»¤è°ƒç”¨äº†addmeå‡½æ•°ã€‚è¿™ç«‹å³å¯¼è‡´è¿”å›åœ°å€0x4120FEè¢«å‹æ ˆï¼Œç„¶å0x4113A0å¤„å¼€å§‹æ‰§è¡Œã€‚ ç¬¬ 4 è¡Œä»£ç æ‰§è¡Œåï¼Œå°±è¿›å…¥äº†addmeå‡½æ•°çš„å‡½æ•°ä½“ã€‚ç¬¬ 1 è¡Œä»£ç æŠŠEBPå‹æ ˆã€‚ç¬¬ 2 è¡Œä»£ç æŠŠEBPè®¾ç½®ä¸ºæŒ‡å‘å½“å‰æ ˆé¡¶ã€‚è¿™ä¸ªäºŒæŒ‡ä»¤åºåˆ—å»ºç«‹äº†ä¸€ä¸ªæ–°çš„å‡½æ•°å¸§ï¼Œå› æ­¤é€šå¸¸ç§°ä¸ºå‡½æ•°åºè¨€ï¼ˆfunction prologueï¼‰ç¬¬ 4 è¡Œä»£ç è¯»å…¥åœ°å€EBP+8çš„å€¼ï¼Œä»–æ˜¯æ ˆçš„ç¬¬ä¸€ä¸ªå‚æ•°ã€‚ç¬¬ 5 è¡Œä»£ç è¯»å…¥ç¬¬äºŒä¸ªå‚æ•°ã€‚æ³¨æ„å‚æ•°è®¿é—®æ˜¯ä»¥EBPä½œä¸ºåŸºåœ°å€çš„ã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒä¸­ï¼ŒEBPè¢«ç§°ä¸ºå¸§åŸºæŒ‡é’ˆï¼Œå› ä¸ºä»–æŒ‡å‘äº†å½“å‰å‡½æ•°çš„æ ˆå¸§ï¼Œå‚æ•°å’Œå±€éƒ¨å˜é‡éƒ½å¯ä»¥é€šè¿‡ç›¸å¯¹ä»–çš„åœ°å€æ¥è®¿é—®ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ç§ç§°ä¸ºå¸§æŒ‡é’ˆçœç•¥ï¼ˆframe pointer omissionï¼‰çš„ä¼˜åŒ–æ–¹æ³•æŒ‡å®šç¼–è¯‘å™¨ç”Ÿæˆä¸ä½¿ç”¨EBPä½œä¸ºå¸§æŒ‡é’ˆçš„ä»£ç ã€‚è¿™ç§ä¼˜åŒ–ä¸‹ï¼Œå±€éƒ¨å˜é‡å’Œå‚æ•°çš„è®¿é—®æ˜¯ç›¸å¯¹ESPè¿›è¡Œçš„ï¼Œè¿™æ—¶EBPå¯ä»¥ä½œä¸ºä¸€ä¸ªé€šç”¨å¯„å­˜å™¨ï¼Œå°±åƒEAXã€EBXã€EXCç­‰å¯„å­˜å™¨ä¸€æ ·ã€‚ç¬¬å…­è¡Œä»£ç æ‰§è¡Œæ•°å­—çš„åŠ è¿ç®—ï¼Œå¹¶æŠŠç»“æœæ”¾å…¥EAXä¸­ã€‚ç¬¬ 8 è¡Œä»£ç æŠŠæ ˆæŒ‡é’ˆè®¾ä¸ºå¸§æŒ‡é’ˆã€‚ç¬¬ 9 è¡Œä»£ç å°†ä¹‹å‰ç¬¬ 1 è¡Œä¸­ä¿å­˜çš„EBPæ•°å€¼å‡ºæ ˆåˆ°EBPã€‚è¿™ä¸ªäºŒæŒ‡ä»¤åºåˆ—ç»“æŸäº†å½“å‰çš„å‡½æ•°è°ƒç”¨ï¼Œå¹¶æ¢å¤äº†å‡½æ•°è°ƒç”¨å‰çš„æ ˆå¸§é€šå¸¸ç§°ä¸ºå‡½æ•°å°¾å£°ï¼ˆfunction epilogueï¼‰ã€‚è¿™ä¸ªæ—¶é—´ç‚¹ä¸Šï¼Œæ ˆé¡¶å€¼ä¸ºCALLæŒ‡ä»¤ä¿å­˜çš„è¿”å›åœ°å€0x4129F9ã€‚ç¬¬ 10 è¡Œæ‰§è¡ŒRETæŒ‡ä»¤ï¼Œè¿™ä¸ªæŒ‡ä»¤å°†æ ˆé¡¶å…ƒç´ å‡ºæ ˆå¹¶ä»0x4129FEå¼€å§‹ç»§ç»­æ‰§è¡Œã€‚ä»£ç ä¸­çš„ç¬¬ 5 è¡ŒæŠŠæ ˆæ”¶ç¼©äº† 8 å­—èŠ‚å¤§å°ï¼Œå› ä¸ºæ ¹æ®CDECLè°ƒç”¨æƒ¯ä¾‹çš„è§„å®šï¼Œæ ˆæ¸…ç†çš„å·¥ä½œå¿…é¡»ç”±è°ƒç”¨è€…å®Œæˆã€‚ å¦‚æœå‡½æ•°addmeæœ‰å±€éƒ¨å˜é‡ï¼Œé‚£ä¹ˆä»£ç éœ€è¦åœ¨ç¬¬ 2 è¡Œä¹‹åé€šè¿‡å‡å°ESPå€¼æ¥å¢é•¿æ ˆå¤§å°ã€‚ç„¶åæ‰€æœ‰çš„å±€éƒ¨å˜é‡éƒ½å¯ä»¥é€šè¿‡EBPåŠ ä¸Šä¸€ä¸ªè´Ÿçš„åç§»é‡æ¥è®¿é—®ã€‚ æ§åˆ¶æµ ZF(Zero Flagï¼Œ é›¶æ ‡å¿—ä½)ï¼šæŒ‡ç¤ºä¹‹å‰ç®—æœ¯è¿ç®—çš„ç»“æœæ˜¯å¦ä¸º 0 SF(Sifn Flagï¼Œ ç¬¦å·æ ‡å¿—ä½)ï¼šè®¾ä¸ºå½“å‰ç»“æœçš„æœ€é«˜æœ‰æ•ˆä½ CF(Carry Flagï¼Œ å€Ÿä½æ ‡å¿—ä½)ï¼š æŒ‡ç¤ºå½“å‰ç»“æœæ˜¯å¦éœ€è¦å€Ÿä½ã€‚å¯¹æ— ç¬¦å·æ•´æ•°æœ‰æ•ˆã€‚ OF(Over Flagï¼Œ æº¢å‡ºæ ‡å¿—ä½)ï¼š åªæ˜¯å½“å‰ç»“æœæ˜¯æ˜¯å¦è¶…è¿‡äº†æœ€å¤§å€¼ã€‚å¯¹æœ‰ç¬¦å·æ•´æ•°æœ‰æ•ˆã€‚ ç®—æœ¯è¿ç®—æŒ‡ä»¤ä¼šæ ¹æ®è®¡ç®—ç»“æœæ›´æ–°è¿™äº›æ ‡å¿—ä½ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒSUB EAX,EAXæŒ‡ä»¤ä¼šå¼•èµ· ZF æ ‡å¿—çš„è®¾ç½®ã€‚JccæŒ‡ä»¤ä¼šæ ¹æ®è¿™äº›æ ‡å¿—ä½æ”¹å˜æ§åˆ¶æµï¼Œå…¶ä¸­ccæ˜¯æŸä¸ªæ¡ä»¶ä»£ç (conditional code)ï¼Œè¯¥æŒ‡ä»¤æœ€å¤šæ”¯æŒ 16 ä¸­æ¡ä»¶ä»£ç ã€‚ æ¡ä»¶ä»£ç  è·³è½¬æ¡ä»¶ æœºå™¨æè¿° JZ/JE è‹¥ä¸º 0ï¼›è‹¥ç›¸ç­‰ ZF = 1 JNZ/JNE è‹¥ä¸ä¸º 0ï¼›è‹¥ä¸ç›¸ç­‰ ZF = 0 JS è‹¥ä¸ºè´Ÿ SF = 1 JNS è‹¥ä¸ä¸ºè´Ÿ SF = 0 JP/JPE è‹¥ 1 å‡ºç°çš„æ¬¡æ•°ä¸ºå¶æ•° PF = 1 JNP/JPO è‹¥ 1 å‡ºç°çš„æ¬¡æ•°ä¸ºå¥‡æ•° PF = 0 JO è‹¥æº¢å‡º OF = 1 JNO è‹¥æ— æº¢å‡º OF = 0 JC/JB/JNAE è‹¥è¿›ä½ï¼›è‹¥ä½äºï¼›è‹¥ä¸é«˜äºç­‰äº CF = 1 JNC/JNB/JAE è‹¥æ— è¿›ä½ï¼›è‹¥ä¸ä½äºï¼›è‹¥é«˜äºç­‰äº CF = 0 JBE/JNA è‹¥ä½äºç­‰äºï¼›è‹¥ä¸é«˜äº ZF = 1 æˆ– CF = 1 JNBE/JA è‹¥ä¸ä½äºç­‰äºï¼›è‹¥é«˜äº ZF = 0 æˆ– CF = 0 JL/JNGE è‹¥å°äºï¼›è‹¥ä¸å¤§äºç­‰äº SF != OF JNL/JGE è‹¥ä¸å°äºï¼›è‹¥å¤§äºç­‰äº SF = OF JLE/JNG è‹¥å°äºç­‰äºï¼›è‹¥ä¸å¤§äº ZF != OF æˆ– ZF = 1 JNLE/JG è‹¥ä¸å°äºç­‰äºï¼›è‹¥å¤§äº SF = 0 ä¸” ZF = 0 ç³»ç»Ÿæœºåˆ¶ ä¸¤ç§åŸºç¡€ç³»ç»Ÿæœºåˆ¶ï¼šè™šæ‹Ÿåœ°å€è½¬æ¢ï¼ˆvirtual address translationï¼‰å’Œå¼‚å¸¸/ä¸­æ–­å¤„ç†ï¼ˆexception/interrupt handlingï¼‰ åœ°å€è½¬æ¢ è®¡ç®—æœºç³»ç»Ÿä¸­çš„ç‰©ç†å†…å­˜ä»¥4KBä¸ºå•å…ƒä½œä¸ºä¸€ä¸ªé¡µï¼ˆpageï¼‰ã€‚å®é™…ä¸Šé¡µçš„å¤§å°ä¹Ÿå¯ä»¥è¶…è¿‡4KBï¼Œè¿™é‡Œæˆ‘ä»¬ä¸è®¨è®ºå…¶ä»–å°ºå¯¸çš„é¡µã€‚å†…å­˜åœ°å€åˆ†ä¸ºä¸¤ç§ï¼šè™šæ‹Ÿå†…å­˜å’Œç‰©ç†å†…å­˜ã€‚åœ¨åˆ†é¡µå¯åŠ¨çš„æƒ…å†µä¸‹ï¼Œå¤„ç†å™¨æ‰§è¡Œçš„æŒ‡ä»¤ä¸­ä½¿ç”¨çš„åœ°å€æ˜¯è™šæ‹Ÿåœ°å€ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š 12A1 78 56 34 12 MOV EAX, [0x12345678] ; è¯»å…¥è™šå†…åœ°å€ä¸º0x12345678çš„å†…å­˜89 08 MOV [EAX], ECX ; æŠŠECXå†™å…¥è™šæ‹Ÿåœ°å€ä¸ºEAXå¤„ ç‰©ç†åœ°å€æ˜¯å¤„ç†å™¨è®¿é—®å†…å­˜æ—¶ä½¿ç”¨çš„å®é™…å†…å­˜åœ°å€ã€‚å¤„ç†å™¨çš„MMU(Memory Management Unitï¼Œ å†…å­˜ç®¡ç†å•å…ƒ)åœ¨è®¿é—®å†…å­˜ä¹‹å‰é€æ˜åœ°æŠŠè™šæ‹Ÿåœ°å€è½¬æ¢ä¸ºç‰©ç†åœ°å€ã€‚åœ¨ç”¨æˆ·å¼€æ¥è™šæ‹Ÿåœ°å€å°±æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œè€Œå¯¹äºMMUæ¥è¯´è¿™ä¸ªåœ°å€åˆ™æ˜¯ç»“æ„åŒ–çš„ã€‚åœ¨æ”¯æŒPAE(Physical Address Extensionï¼Œ ç‰©ç†åœ°å€æ‰©å±•)çš„x86ç³»ç»Ÿä¸Šï¼Œè™šæ‹Ÿåœ°å€å¯ä»¥åˆ’åˆ†ä¸ºå‡ ä¸ªéƒ¨åˆ†ï¼Œä½œä¸ºåç§»é‡ç´¢å¼•åˆ°ä¸‰ä¸ªè¡¨ä¸­ï¼ŒåŒ…æ‹¬PDPT(Page Directory Pointer Tableï¼Œé¡µç›®å½•æŒ‡é’ˆè¡¨)ã€PD(Page Directoryï¼Œé¡µç›®å½•)ã€PT(Page Tableï¼Œ é¡µè¡¨)ä»¥åŠPTE(Page Table Entryï¼Œé¡µè¡¨é¡¹)ã€‚PDPTæ˜¯4ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ 8å­—èŠ‚ï¼ŒæŒ‡å‘ä¸€ä¸ªPDã€‚PDæ˜¯ä¸€ä¸ªæœ‰512ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ 8å­—èŠ‚ï¼ŒæŒ‡å‘ä¸€ä¸ªPTã€‚PTä¹Ÿæ˜¯ä¸€ä¸ªæœ‰512ä¸ªå…ƒç´ çš„æ•°ç»„ï¼Œæ¯ä¸ªå…ƒç´ 8å­—èŠ‚ï¼ŒæŒ‡å‘ä¸€ä¸ªPTEã€‚ä»¥è™šæ‹Ÿåœ°å€0xBF80EE6B(è½¬æ¢æˆäºŒè¿›åˆ¶ï¼š10111111 10000000 11101110 01101011)æ¥ç†è§£ï¼Œå¦‚ä¸‹è¡¨ï¼š 10(0x2) 111111 100(0x1FC) 00000 1110(0xE) 1110 01101011(0xE6B) 2 ä½ 9 ä½ 9 ä½ 12 ä½ ç´¢å¼•åˆ° PDPT ç´¢å¼•åˆ° PD ç´¢å¼•åˆ° PT é¡µåç§»é‡ è¿™äº›è¡¨ä¸­çš„ 8 å­—èŠ‚å…ƒç´ åŒ…å«å…³äºè¡¨ã€å†…å­˜è®¿é—®è®¸å¯ä»¥åŠå…¶ä»–å†…å­˜å±æ€§çš„æ•°æ®ã€‚æ¯”å¦‚ï¼Œå…¶ä¸­æœ‰ä¸€äº›ä½ç”¨äºæ ‡è¯†è¿™ä¸ªé¡µæ˜¯åªè¯»è¿˜æ˜¯å¯è¯»å†™ã€æ˜¯å¦å¯æ‰§è¡Œã€ç”¨æˆ·æ˜¯å¦å¯ä»¥è®¿é—®ç­‰ã€‚ åœ°å€è½¬æ¢è¿‡ç¨‹å°±å›´ç»•ç€è¿™ 3 ä¸ªè¡¨å’ŒCR3å¯„å­˜å™¨ã€‚CR3å¯„å­˜å™¨ä¿å­˜ç€PDPTçš„ç‰©ç†åŸºåœ°å€ã€‚ ä¸­æ–­ä¸å¼‚å¸¸ ç®€å•è®²å°±æ˜¯æ“ä½œç³»ç»Ÿé€šè¿‡ä¸­æ–­å’Œå¼‚å¸¸æœºåˆ¶å®ç°ç³»ç»Ÿè°ƒç”¨ï¼Œå®Œæ•´çš„å®ç°ç»†èŠ‚å‚è€ƒ Windows å†…æ ¸éƒ¨åˆ†ã€‚ x64 x64æ˜¯x86çš„æ‰©å±•ï¼Œæ‰€æœ‰ä¸¤è€…çš„ç»å¤§å¤šæ•°ä½“ç³»ç»“æ„ç‰¹æ€§éƒ½ä¸€æ ·ï¼Œåªæœ‰ç•¥å¾®ä¸åŒï¼Œæ¯”å¦‚å¯„å­˜å™¨å®½åº¦ï¼Œä»¥åŠæŸäº›æŒ‡ä»¤ä¸å¯å†ç”¨(æ¯”å¦‚PUSHAD)ã€‚ å¯„å­˜å™¨ç»„ä¸æ•°æ®ç±»å‹è¡¥å…… x64çš„å¯„å­˜å™¨ç»„æœ‰18ä¸ª64ä½GPRï¼Œä¸‹é¢ç”»å›¾è§£é‡Šè¿™äº›å¯„å­˜å™¨çš„ç»“æ„ï¼Œæ³¨æ„å‰ç¼€ä¸ºRçš„æ˜¯64ä½å¯„å­˜å™¨ã€‚ 123456789101164 . . . 31 23 15 7 0|RAX | | | | | | | || | | | |EAX | | | || | | | | | | AX | || | | | | | | AH | AL |64 . . . 31 23 15 7 0|RBP | | | | | | | || | | | |EBP | | | || | | | | | | BP | || | | | | | | | BPL | è™½ç„¶RBPä»»ç„¶å¯ä»¥ç”¨ä½œå¸§åŸºæŒ‡é’ˆï¼Œä½†å®é™…åº”ç”¨ä¸­ç¼–è¯‘å™¨ç”Ÿæˆçš„ä»£ç å¾ˆå°‘è¿™ä¹ˆç”¨ï¼Œå¤šæ•°x64ç¼–è¯‘å™¨åªæ˜¯æŠŠRBPå½“ä½œGPRæ¥ç”¨ï¼Œè€Œç”¨RSPä½œä¸ºåŸºåœ°å€å¼•ç”¨å±€éƒ¨å˜é‡ã€‚ æ•°æ®ç§»åŠ¨è¡¥å…… x64æ”¯æŒä¸€ç§ç§°ä¸ºRIPç›¸å¯¹å¯»å€(RIP-relative addressing)çš„æ¦‚å¿µï¼Œå…¶å…è®¸æŒ‡ä»¤å¼•ç”¨æ•°æ®æ—¶ä½¿ç”¨ç›¸å¯¹RIPçš„åœ°å€ã€‚ä¾‹å¦‚ï¼š 123450000000000000000 48 8B 05 00 00+ mov rax, qword ptr cs:loc_A ; æœ€å¼€å§‹å†™ä½œ&quot;mov rax,[rip]&quot;0000000000000007 loc_A:0000000000000007 48 31 C0 xor rax,rax000000000000000A 90 nop ç¬¬ 1 è¡Œè¯»å…¥loc_Açš„åœ°å€ï¼ˆä¸º0x7ï¼‰ç„¶åä¿å­˜åˆ°RAXä¸­ã€‚RIPç›¸å¯¹å¯»å€ä¸»è¦ç”¨äºäº§ç”Ÿä½ç½®æ— å…³ä»£ç ã€‚ å¤šæ•°ç®—æœ¯è¿ç®—æŒ‡ä»¤éƒ½è‡ªåŠ¨å‡çº§ä¸º64ä½ï¼Œå³ä½¿æ“ä½œæ•°åªæœ‰32ä½ã€‚ä¾‹å¦‚ï¼š 123448 B8 88 77 66+ mov rax, 1122334455667788h31 C0 xor eax, eax ; ä¹Ÿä¼šæ¸…é™¤RAXçš„é«˜32ä½ï¼Œä¹Ÿå°±æ˜¯è¯´æ‰§è¡ŒåRAX=048 C7 C0 FF FF+ mov rax, 0FFFFFFFFFFFFFFFFhFF C0 inc eax ; æ‰§è¡ŒåRAX=0 è§„èŒƒåœ°å€ x64ä¸­è™šæ‹Ÿåœ°å€çš„å®½åº¦æ˜¯64ä½ï¼Œä½†å¤šæ•°å¤„ç†å™¨å¹¶ä¸æ”¯æŒå®Œæ•´çš„64ä½è™šæ‹Ÿåœ°å€ç©ºé—´ã€‚å½“å‰Intel/AMDå¤„ç†å™¨åªä½¿ç”¨48ä½åœ°å€ç©ºé—´ã€‚æ‰€æœ‰çš„è™šæ‹Ÿåœ°å€å¿…é¡»ä¸ºè§„èŒƒå½¢å¼ã€‚å¦‚æœä¸€ä¸ªè™šæ‹Ÿåœ°å€ä»ç¬¬63ä½åˆ°å…·ä½“å®ç°çš„æœ€é«˜æœ‰æ•ˆä½éƒ½æ˜¯1æˆ–è€…éƒ½æ˜¯0ï¼Œé‚£ä¹ˆè¿™ä¸ªè™šæ‹Ÿåœ°å€å°±ç§°ä¸ºè§„èŒƒåœ°å€ã€‚å…·ä½“æ¥è¯´ï¼Œè¿™æ„å‘³ç€ä»48åˆ°63ä½éƒ½è¦å’Œ47ä½ç›¸åŒã€‚å¦‚æœä»£ç å¼•ç”¨ä¸€ä¸ªéè§„èŒƒåœ°å€ï¼Œå°±ä¼šè§¦å‘ç³»ç»Ÿå¼‚å¸¸ã€‚ å‡½æ•°è°ƒç”¨ x86ä¸Šæœ‰ä¸€äº›è°ƒç”¨æƒ¯ä¾‹éœ€è¦é€šè¿‡æ ˆæ¥ä¼ é€’ä¸€äº›å‚æ•°ã€‚å¯¹äºx64æ¥è¯´ï¼Œå¤šæ•°è°ƒç”¨æƒ¯ä¾‹éƒ½æ˜¯é€šè¿‡å¯„å­˜å™¨ä¼ é€’å‚æ•°ï¼Œæ¯”å¦‚åœ¨windows x64ä¸­ï¼Œåªæœ‰ä¸€ç§è°ƒç”¨æƒ¯ä¾‹ç”¨åˆ°æ ˆï¼Œå¹¶ä¸”å…¶ä¸­å‰å››ä¸ªå‚æ•°è¿˜æ˜¯é€šè¿‡RCXã€RDXã€R8å’ŒR9æ¥ä¼ é€’çš„ï¼›å…¶ä½™çš„å‚æ•°æŒ‰ç…§ä»å·¦åˆ°å³çš„é¡ºåºå‹æ ˆã€‚Linux ä¸Šï¼Œåˆ™æ˜¯å‰ 6 ä¸ªå‚æ•°é€šè¿‡RDIã€RSIã€RDXã€RCXã€R8å’ŒR9ä¼ é€’ã€‚ ------------------------æœ¬æ¬¡æ›´æ–°æ—¶é—´ 2018-10-16 10:53 ARM è¿™é‡Œä»‹ç»çš„æ˜¯ARM Architecture Reference Manual ARMv7-A and ARMv777-R Edition (ARM DDI 0406B)ä¸­å®šä¹‰çš„ARMä½“ç³»ç»“æ„ã€‚ åŸºæœ¬ç‰¹æ€§ ARMæ˜¯RISCä½“ç³»ç»“æ„ï¼Œå› æ­¤ä¸CISCä½“ç³»ç»“æ„(x86/x64)æœ‰ä¸€äº›åŸºæœ¬åŒºåˆ«ã€‚(ä»å®è·µçš„è§’åº¦è¯´ï¼Œæœ€æ–°ç‰ˆæœ¬çš„Intelå¤„ç†å™¨ä¹Ÿå…·æœ‰ä¸€äº›RISCçš„ç‰¹å¾ï¼›ä¹Ÿå°±æ˜¯è¯´ï¼Œä»–ä»¬å·²ç»ä¸å†æ˜¯çº¯ç²¹çš„CISCã€‚)é¦–å…ˆï¼Œä¸x86ç›¸æ¯”ï¼ŒARMçš„æŒ‡ä»¤é›†æ˜¯å¾ˆå°çš„ï¼Œä½†æ˜¯æä¾›çš„é€šç”¨å¯„å­˜å™¨æ›´å¤šã€‚ç¬¬äºŒï¼ŒæŒ‡ä»¤çš„å®½åº¦æ˜¯å›ºå®šçš„ï¼ˆ16ä½æˆ–32ä½ï¼Œæ ¹æ®å½“å‰çŠ¶æ€è€Œå®šï¼‰ã€‚ç¬¬ä¸‰ï¼ŒARMçš„å†…å­˜è®¿é—®æ¨¡å¼æ˜¯åŠ è½½-å­˜å‚¨æ¨¡å¼ã€‚è¿™æ„å‘³ç€æ“ä½œæ•°æ®ä¹‹å‰å¿…é¡»å…ˆè¦æŠŠå®ƒä»å†…å­˜åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ã€‚åªæœ‰åŠ è½½/å­˜å‚¨æŒ‡ä»¤èƒ½å¤Ÿè®¿é—®å†…å­˜ï¼Œå…·ä½“æ¥è¯´ï¼Œåœ¨ARMä¸­æ˜¯LDRå’ŒSTRæŒ‡ä»¤ã€‚å¦‚æœè¦é€’å¢æŸä¸ªå†…å­˜åœ°å€ä¸Šçš„32ä½æ•°å€¼ï¼Œå¿…é¡»å…ˆæŠŠæ•°å€¼ä»è¿™ä¸ªåœ°å€åŠ è½½åˆ°å¯„å­˜å™¨ä¸­ï¼Œé€’å¢ï¼Œç„¶åå†å­˜å‚¨å›å»ã€‚x86åˆ™å…è®¸å¤§å¤šæ•°æŒ‡ä»¤ç›´æ¥æ“ä½œå†…å­˜ä¸­çš„æ•°æ®ï¼Œåªéœ€è¦ç®€å•çš„åŠ è½½ï¼Œæ“ä½œï¼Œé€’å¢ä¸‰æ­¥ã€‚ ARMè¿˜æä¾›äº†å‡ ç§ä¸åŒçº§åˆ«çš„ç‰¹æƒæ¨¡å¼æ¥å®ç°ç‰¹æƒéš”ç¦»ã€‚x86ä¸Šçš„ç‰¹æƒçº§åˆ«æ˜¯é€šè¿‡ 4 ç§ringçº§åˆ«å®šä¹‰çš„ï¼Œå…¶ä¸­ring0å…·æœ‰æœ€é«˜ç‰¹æƒçº§åˆ«ï¼Œring3çš„ç‰¹æƒçº§åˆ«æœ€ä½ã€‚åœ¨ARMä¸­ï¼Œæœ‰ 8 ç§ä¸åŒçº§åˆ«çš„ç‰¹æƒæ¨¡å¼ï¼š USR(USER,ç”¨æˆ·æ¨¡å¼) FIQ(FAST INTERRUPT REQUEST,å¿«é€Ÿä¸­æ–­è¯·æ±‚æ¨¡å¼) IRQ(INTERRUPT REQUEST,ä¸­æ–­è¯·æ±‚æ¨¡å¼) SVC(SUPERVISOR, ç®¡ç†æ¨¡å¼) MON(MONITOR,ç›‘è§†æ¨¡å¼) ABT(ABORT,ä¸­æ­¢æ¨¡å¼) UND(UNDERFINED,æœªå®šä¹‰æŒ‡ä»¤æ¨¡å¼) SYS(SYSTEM,ç³»ç»Ÿæ¨¡å¼) å¤šæ•°æ“ä½œç³»ç»Ÿå†…æ ¸æ¨¡å¼è¿è¡ŒäºSVCã€‚åœ¨Windowsæˆ–Linuxä¸Šéƒ½æ˜¯ã€‚ x64å¤„ç†å™¨å¯ä»¥è¿è¡Œåœ¨32ä½æˆ–64ä½æ¨¡å¼ä¸‹ï¼Œä¹Ÿå¯ä»¥äº¤æ›¿è¿è¡Œäºè¿™ä¸¤ç§æ¨¡å¼ä¸‹ã€‚ARMå¤„ç†ä¸ä¹‹ç±»ä¼¼ï¼Œä»–ä»¬ä¹Ÿå¯ä»¥è¿è¡Œåœ¨ä¸¤ç§çŠ¶æ€ä¸‹ï¼šARMå’ŒThumbçŠ¶æ€ã€‚ARM/ThumbçŠ¶æ€å†³å®šçš„åªæœ‰æŒ‡ä»¤é›†ï¼Œè€Œä¸æ˜¯ç‰¹æƒæ¨¡å¼ã€‚æ¯”å¦‚è¿è¡Œå­å•Šåœ¨ARMçŠ¶æ€ä¸‹ï¼ŒæŒ‡ä»¤æ€»æ˜¯32ä½å®½ï¼›è€Œåœ¨Thumbä¸‹ï¼ŒæŒ‡ä»¤å¯ä»¥æ˜¯16ä½å®½ä¹Ÿå¯ä»¥æ˜¯32ä½å®½ã€‚å†³å®šå¤„ç†å™¨æ‰§è¡ŒçŠ¶æ€çš„æ˜¯ä»¥ä¸‹ä¸¤ä¸ªå› ç´ ã€‚ é€šè¿‡ BX å’Œ BLX æŒ‡ä»¤è¿›è¡Œåˆ†æ”¯è·³è½¬çš„æ—¶å€™ï¼Œå¦‚æœç›®æ ‡å¯„å­˜å™¨çš„æœ€ä½æœ‰æ•ˆä½æ˜¯ 1ï¼Œå°±åˆ‡æ¢åˆ° Thumb çŠ¶æ€ã€‚ï¼ˆå°½ç®¡æŒ‡ä»¤æ˜¯ 2 å­—èŠ‚å¯¹é½æˆ– 4 å­—èŠ‚å¯¹é½çš„ï¼Œä½†å¤„ç†å™¨ä¼šå¿½ç•¥æœ€ä½æœ‰æ•ˆä½ï¼Œå› æ­¤ä¸ä¼šæœ‰å¯¹é½çš„é—®é¢˜ã€‚ï¼‰ å¦‚æœå½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆCPSRï¼‰ä¸­çš„ T æ ‡å¿—ä½è¢«ç½®èµ·ï¼Œå°±å¤„äº Thumb æ¨¡å¼ã€‚CPSR çš„è¯­ä¹‰ä¼šåœ¨ä¹‹åè¯¦è¿°ï¼Œç›®å‰å¯ä»¥æŠŠå®ƒç±»æ¯”ä¸º x86 ä¸­æ‰©å±•çš„ EFLAGS å¯„å­˜å™¨ã€‚ ARMæ ¸å¿ƒå¯åŠ¨çš„æ—¶å€™ï¼Œå¤šæ•°æƒ…å†µä¸‹éƒ½æ˜¯è¿›å…¥ARMçŠ¶æ€å¹¶ä¿æŒåœ¨è¿™ä¸ªçŠ¶æ€ï¼ŒçŸ¥é“æ˜¾å¼æˆ–éšå¼åœ°åˆ‡æ¢åˆ°Thumbæ¨¡å¼ã€‚å…·ä½“å®è·µä¸­ï¼Œå¤šæ•°è¾ƒæ–°çš„æ“ä½œç³»ç»Ÿä½¿ç”¨Thumbä»£ç æ˜¯ä¸ºäº†è·å¾—æ›´é«˜çš„ä»£ç å¯†åº¦ï¼ˆæ··åˆä½¿ç”¨16/32ä½å®½åº¦æŒ‡ä»¤çš„ä»£ç å¤§å°å°äºå…¨éƒ¨ä½¿ç”¨32ä½æŒ‡ä»¤ï¼‰ï¼Œè€Œä¸”åº”ç”¨ç¨‹åºå¯ä»¥è¿è¡Œäºä»»æ„æ¨¡å¼ä¸‹ã€‚å› ä¸ºå¤šæ•°Thumbå’ŒARMæŒ‡ä»¤åŠ©è®°ç¬¦éƒ½æ˜¯ç›¸åŒçš„ï¼Œæ‰€ä»¥åœ¨32ä½ThumbæŒ‡ä»¤åæ·»åŠ ä¸€ä¸ª.Wåç¼€æ ‡è¯†ã€‚ æ³¨æ„ï¼Œæœ‰ä¸€ç§å¾ˆå¸¸è§çš„è¯¯è§£ï¼Œå°±æ˜¯æŠŠThumbæ¨¡å¼çœ‹ä½œx86/x64ä¸Šçš„å®æ¨¡å¼ï¼ŒæŠŠARMæ¨¡å¼çœ‹ä½œä¿æŠ¤æ¨¡å¼ã€‚x86/x64å¹³å°ä¸Šçš„ç»å¤§å¤šæ•°æ“ä½œç³»ç»Ÿè¿è¡Œäºä¿æŠ¤æ¨¡å¼ï¼Œå¾ˆå°‘ä¼šåˆ‡æ¢å›å®æ¨¡å¼ã€‚ä½ARMå¹³å°ä¸Šçš„æ“ä½œç³»ç»Ÿå’Œåº”ç”¨ç¨‹åºåˆ™å¯ä»¥äº¤æ›¿è¿è¡ŒäºARMçŠ¶æ€å’ŒThumbçŠ¶æ€ã€‚è¿˜è¦æ³¨æ„ï¼Œè¿™ä¸¤ä¸ªçŠ¶æ€ä¸å‰é¢ä»‹ç»çš„ç‰¹æƒæ¨¡å¼ä¹Ÿæ˜¯å®Œå…¨ä¸åŒçš„æ¦‚å¿µã€‚ Thumbæœ‰ä¸¤ä¸ªç‰ˆæœ¬ï¼šThumb-1å’ŒThumb-2ã€‚Thumb-1ç”¨äºARMv6å’Œæ›´æ—©æœŸçš„ä½“ç³»ç»“æ„ï¼ŒæŒ‡ä»¤é›†å®½åº¦éƒ½æ˜¯16ä½ã€‚Thumb-2å¢åŠ äº†æ›´å¤šçš„æŒ‡ä»¤ï¼Œå¹¶æ”¯æŒ16ä½å’Œ32ä½çš„æŒ‡ä»¤å®½åº¦ã€‚ARMv7åªç”¨Thumb-2ï¼Œæ‰€ä»¥åªè¦æ˜¯è®¨è®ºThumbï¼Œéƒ½æ˜¯Thumb-2ã€ ARMçŠ¶æ€ä¸ThumbçŠ¶æ€è¿˜æœ‰å…¶ä»–ä¸€äº›åŒºåˆ«ï¼Œè¿™é‡Œæˆ‘ä»¬æ²¡æ³•å…¨éƒ¨ä»‹ç»ã€‚æ¯”å¦‚ï¼ŒæŸäº›æŒ‡ä»¤åªåœ¨ARMçŠ¶æ€ä¸‹æ”¯æŒï¼Œè€Œåœ¨ThumbçŠ¶æ€ä¸‹ä¸å¯ç”¨ï¼Œæˆ–è€…åä¹‹ã€‚è¦äº†è§£æ›´å¤šè¯·å‚è€ƒARMçš„å®˜æ–¹æ–‡æ¡£ã€‚ ------------------------æ›´æ–°æ—¶é—´ 2018-10-17 16:34 æ•°æ®ç±»å‹ä¸å¯„å­˜å™¨ ä¸é«˜çº§è¯­è¨€ç±»ä¼¼ï¼ŒARMä¹Ÿæ”¯æŒå¤šç§æ•°æ®ç±»å‹çš„è¿ç®—ï¼ŒåŒ…æ‹¬ï¼š8ä½ï¼ˆå­—èŠ‚ï¼‰ï¼Œ16ä½ï¼ˆåŠå­—ï¼‰ã€32ä½ï¼ˆå­—ï¼‰å’Œ64ä½ï¼ˆåŒå­—ï¼‰ã€‚ ARMçš„ä½“ç³»ç»“æ„å®šä¹‰äº†16ä¸ª32ä½é€šç”¨å¯„å­˜å™¨ï¼Œå‘½åä¸ºR0~R15ï¼Œå®é™…å¼€å‘ä¸­åªç”¨å‰13ä¸ªä½œä¸ºé€šç”¨å¯„å­˜å™¨ï¼ˆå°±åƒx86ä¸­çš„EAXã€EBXç­‰ï¼‰ï¼Œæœ€åä¸‰ä¸ªæœ‰ç‰¹æ®Šçš„æ„ä¹‰ã€‚ R13 ç”¨ä½œæ ˆæŒ‡é’ˆ(Stack Point, SP)ï¼Œç­‰ä»·äº x86/64 ä¸‹çš„ ESPã€RSP å¯„å­˜å™¨ï¼ŒæŒ‡å‘ç¨‹åºæ ˆçš„é¡¶ç«¯ R14 ç”¨ä½œè¿æ¥å¯„å­˜å™¨ï¼ˆLink Register, SPï¼‰ï¼Œé€šå¸¸ç”¨äºåœ¨å‡½æ•°è°ƒç”¨ä¸­ä¿å­˜è¿”å›åœ°å€ã€‚æŸäº›æŒ‡ä»¤ä¼šéšå¼çš„ä½¿ç”¨è¿™ä¸ªå¯„å­˜å™¨ã€‚æ¯”å¦‚ï¼ŒBL æ€»æ˜¯åœ¨åˆ†æ”¯è·³è½¬åˆ°ç›®æ ‡åœ°å€ä¹‹å‰æŠŠè¿”å›å€¼ä¿å­˜åœ¨ LR ä¸­ã€‚x86/64 ä¸­æ€»æ˜¯æŠŠè¿”å›åœ°å€æ”¾åœ¨æ ˆä¸Šï¼Œæ‰€ä»¥æ²¡æœ‰ç›¸åº”çš„å¯„å­˜å™¨ã€‚åœ¨ä¸ä½¿ç”¨ LR å­˜å‚¨è¿”å›åœ°å€çš„ä»£ç ä¸­ï¼Œè¿™ä¸ªå¯„å­˜å™¨å¯ä»¥ä½œä¸ºé€šç”¨å¯„å­˜å™¨ã€‚ R15 ç”¨ä½œç¨‹åºè®¡æ•°å™¨ï¼ˆProgram Counterï¼ŒPCï¼‰ã€‚åœ¨ ARM çŠ¶æ€ä¸‹æ‰§è¡Œçš„æ—¶å€™ï¼ŒPC æ˜¯å½“å‰æŒ‡ä»¤çš„åœ°å€åŠ  8ï¼ˆä¸¤æ¡ ARM æŒ‡ä»¤ä¹‹åï¼‰ï¼›åœ¨ Thumb çŠ¶æ€ä¸‹ï¼Œä»–æ˜¯å½“å‰æŒ‡ä»¤çš„åœ°å€åŠ  4ï¼ˆä¸¤æ¡ 16 ä½ Thumb æŒ‡ä»¤åï¼‰ã€‚è¿™ä¸ªå¯„å­˜å™¨ç±»ä¼¼ä¸ x86/64 ä¸‹çš„ EIP/RIPï¼Œä½†åè€…æ€»æ˜¯æŒ‡å‘ä¸‹ä¸€æ¡æ‰§è¡ŒæŒ‡ä»¤çš„åœ°å€ã€‚å¦å¤–ä¸€ä¸ªä¸»è¦çš„åŒºåˆ«åœ¨äºï¼ŒARM ä¸‹ä»£ç å¯ä»¥ç›´æ¥è¯»å†™ PC å¯„å­˜å™¨ï¼Œå‘ PC å¯„å­˜å™¨å†™å…¥ä¸€ä¸ªå€¼ä¼šå¯¼è‡´è¿è¡Œç«‹å³ä»é‚£ä¸ªåœ°å€å¼€å§‹ï¼ˆå‚è€ƒä¸‹é¢ä»£ç ç‰‡æ®µï¼‰ã€‚ 12340x00008344 push &#123;lr&#125;0x00008346 mov r0,pc0x00008348 mov.w r2, r2, ls1 #310x0000834C pop &#123;pc&#125; åœ¨ç¬¬ 2 è¡Œæ‰§è¡Œä¹‹åï¼ŒR0çš„å€¼ä¸º0x0000834A(=0x00008346+4) ä¸å…¶ä»–ä½“ç³»ç»“æ„ç±»ä¼¼ï¼ŒARMæŠŠå½“å‰æ‰§è¡ŒçŠ¶æ€ä¿¡æ¯ä¿å­˜åœ¨å½“å‰ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆCPSRï¼‰ä¸­ã€‚ä»åº”ç”¨ç¨‹åºå¼€å‘è€…çš„è§’åº¦æ¥çœ‹ï¼ŒCPSRç±»ä¼¼äºx86/x84ä¸‹çš„EFLAGS/RFLAGå¯„å­˜å™¨ã€‚æŸäº›æ–‡æ¡£ä¸­ä¼šæåˆ°åº”ç”¨ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆAPSRï¼‰ï¼Œè¿™æ˜¯CPSRä¸­æŸäº›å­—æ®µçš„åˆ«åã€‚CPSRä¸­æœ‰å¾ˆå¤šæ ‡å¿—ä½ï¼Œä¸‹é¢åˆ—å‡ºå…¶ä¸­çš„éƒ¨åˆ†ï¼š E(å¤§å°ç«¯æ ‡å¿—ä½ï¼ŒEndianness bit)ï¼šARM å¯ä»¥è¿è¡Œåœ¨å¤§ç«¯æˆ–å°ç«¯æ¨¡å¼ä¸‹ã€‚è¿™ä¸€ä½è®¾ç½®ä¸º 0 è¡¨ç¤ºå°ç«¯ï¼Œ1 è¡¨ç¤ºå¤§ç«¯ã€‚å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨å°ç«¯ï¼Œå³ä¸º 0ã€‚ T(Thumb æ ‡å¿—ä½)ï¼šåœ¨ Thumb çŠ¶æ€ä¸‹ï¼Œè¿™ä¸€ä½ä¼šè®¾ä¸º 1ï¼›å¦åˆ™å°±æ˜¯ ARM çŠ¶æ€ã€‚ä» Thumb åˆ° ARM æˆ–åå‘çš„çŠ¶æ€åˆ‡æ¢çš„æ–¹å¼ä¹‹ä¸€ï¼Œå°±æ˜¯ä¿®æ”¹è¿™ä¸€æ ‡å¿—ä½ã€‚ M(æ¨¡å¼æ ‡å¿—ä½ï¼Œ Mode Bit)ï¼šè¿™å‡ ä½æŒ‡å®šå½“å‰çš„ç‰¹æƒæ¨¡å¼ï¼ˆUSRã€SVC ç­‰ï¼‰ã€‚ 12 31 26 15 10 9 5 4 0CPSR |cond.flags | |1T |å¤§å°ç«¯æ ‡å¿—ä½E | |Thumbæ ‡å¿—ä½T |æ¨¡å¼æ ‡å¿—ä½M | ------------------------æ›´æ–°æ—¶é—´ 2018-10-18 09:30 ç³»ç»Ÿçº§æ§åˆ¶ä¸è®¾ç½® ARMæä¾›äº†åå¤„ç†å™¨çš„æ¦‚å¿µæ¥æ”¯æŒé¢å¤–çš„æŒ‡ä»¤å’Œç³»ç»Ÿçº§è®¾ç½®ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœç³»ç»Ÿæ”¯æŒå†…å­˜ç®¡ç†å•å…ƒ(MMU, Memory Management Unit)ï¼Œé‚£ä¹ˆå†…å­˜ç®¡ç†å•å…ƒçš„é…ç½®æ¥å£å¿…é¡»æä¾›ç»™å¯åŠ¨ä»£ç æˆ–å†…æ ¸ä»£ç ã€‚åœ¨x86/x64ä¸Šï¼Œè¿™äº›è®¾ç½®æ¥å£æ˜¯æ”¾åœ¨CR0å’ŒCR4ä¸­çš„ï¼›è€Œåœ¨ARMä¸Šï¼Œåˆ™æ”¾åœ¨CP15ä¸­ï¼ŒARMä½“ç³»ç»“æ„ä¸­æœ‰16ä¸ªåå¤„ç†å™¨ï¼Œç¼–å·ä¸ºCP0~CP15.å‰ 13 ä¸ªåå¤„ç†å™¨æ—¶å¯é€‰çš„æˆ–è€…æ˜¯ARMä¿ç•™çš„ã€‚åˆ¶é€ å•†å¯ä»¥é€šè¿‡å¯é€‰åå¤„ç†å™¨å®ç°ç‰¹å®šçš„æŒ‡ä»¤æˆ–åŠŸèƒ½ï¼Œæ¯ä¸ªåå¤„ç†å™¨æä¾›äº†é¢å¤–çš„â€œæ“ä½œç â€å’Œå¯„å­˜å™¨ï¼Œå¯ä»¥é€šè¿‡ä¸“é—¨çš„ARMæŒ‡ä»¤æ§åˆ¶ã€‚ä¸¾ä¾‹æ¥è¯´ï¼ŒCP10å’ŒCP11å¸¸å¸¸ç”¨äºè°ƒè¯•å’Œç³»ç»Ÿè®¾ç½®ã€‚è€Œä¸”CP15é€šå¸¸è¢«ç§°ä¸ºç³»ç»Ÿæ§åˆ¶åå¤„ç†å™¨ï¼Œå®ƒä¿å­˜ç€ç»å¤§å¤šæ•°ç³»ç»Ÿè®¾ç½®ï¼ˆç¼“å­˜ã€åˆ†é¡µã€å¼‚å¸¸ç­‰ï¼‰ã€‚ 1æ³¨æ„ï¼šNEONæä¾›äº†å•æŒ‡ä»¤å¤šæ•°æ®ï¼ˆSIMDï¼‰æŒ‡ä»¤é›†ï¼Œé€šå¸¸ç”¨äºå¤šåª’ä½“åº”ç”¨ç¨‹åºã€‚å®ƒä¸åŸºäºx86ä½“ç³»ç»“æ„çš„SSE/MMXæŒ‡ä»¤ç±»ä¼¼ã€‚ æ¯ä¸ªåå¤„ç†å™¨æœ‰16ä¸ªå¯„å­˜å™¨å’Œ8ä¸ªç›¸åº”çš„æ“ä½œç ã€‚è¿™äº›å¯„å­˜å™¨å’Œæ“ä½œç çš„è¯­ä¹‰æ˜¯ç‰¹å®šäºåå¤„ç†å™¨çš„ã€‚åå¤„ç†å™¨åªèƒ½é€šè¿‡MRC(è¯»)å’ŒMCR(å†™)æŒ‡ä»¤è®¿é—®ï¼Œè¿™ä¸¤ä¸ªæŒ‡ä»¤æ¥å—åå¤„ç†å™¨ç¼–å·ã€å¯„å­˜å™¨ç¼–å·å’Œæ“ä½œç ä½œä¸ºå‚æ•°ã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œè¦è¯»å‡ºè½¬æ¢åŸºå€å¯„å­˜å™¨(ç±»ä¼¼äºx86/x64ä¸­çš„CR3)å¹¶ä¿å­˜åˆ°R0ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹ä»£ç ï¼š 1MRC p15, 0, r0, c2, c0, 0 ; ä¿å­˜åˆ°TTBRä¸­ è¿™å¥ä»£ç è¡¨ç¤ºï¼šâ€œä½¿ç”¨æ“ä½œç 0/0è¯»å‡ºCP15çš„C2/C0ï¼Œå¹¶ä¿å­˜ç»“æœåˆ°é€šç”¨å¯„å­˜å™¨R0ã€‚â€å› ä¸ºæ¯ä¸ªåå¤„ç†å™¨æœ‰å¾ˆå¤šå¯„å­˜å™¨å’Œæ“ä½œç ï¼Œéœ€è¦é˜…è¯»æ–‡æ¡£æ‰èƒ½ç¡®å®šå…¶ä¸­æ¯ä¸€ä¸ªçš„ç²¾ç¡®å«ä¹‰ã€‚æœ‰äº›å¯„å­˜å™¨ï¼ˆC13/C0ï¼‰æ˜¯æ“ä½œç³»ç»Ÿä¿ç•™çš„ï¼Œç”¨äºä¿å­˜ç‰¹å®šäºè¿›ç¨‹æˆ–çº¿ç¨‹çš„æ•°æ®ã€‚ MRCå’ŒMCRæŒ‡ä»¤å¹¶ä¸éœ€è¦é«˜ç‰¹æƒçº§åˆ«æ‰èƒ½è¿è¡Œï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥åœ¨ USR æ¨¡å¼ä¸‹æ‰§è¡Œï¼‰ï¼Œä½†æœ‰äº›åå¤„ç†å™¨å¯„å­˜å™¨å’Œæ“ä½œç åªèƒ½åœ¨SVCæ¨¡å¼ä¸‹è®¿é—®ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿçš„ç‰¹æƒçº§åˆ«ï¼Œè¯¥å¯„å­˜å™¨ä¼šå¯¼è‡´å¼‚å¸¸ã€‚åœ¨å®é™…çš„ç”¨æˆ·æ¨¡å¼ä»£ç ä¸­å¾ˆå°‘çœ‹åˆ°è¿™äº›æŒ‡ä»¤ï¼Œä»–ä»¬é€šå¸¸ç”¨åœ¨åƒROMã€bootloaderã€å›ºä»¶è¿™æ ·å¾ˆåº•å±‚çš„ä»£ç æˆ–å†…æ ¸æ¨¡å¼ä»£ç ä¸­ã€‚ ------------------------æ›´æ–°æ—¶é—´ 2018-10-21 13:10 æŒ‡ä»¤é›†ä»‹ç» ç›¸æ¯”èµ·x86ä½“ç³»ç»“æ„ï¼Œé™¤äº†æ¡ä»¶æ‰§è¡Œå’Œæ¡¶å¼ç§»ä½å™¨ï¼ŒARM çš„æŒ‡ä»¤é›†è¿˜æœ‰å‡ ç‚¹ç‹¬ç‰¹ä¹‹å¤„ã€‚é¦–å…ˆï¼Œæœ‰äº›æŒ‡ä»¤å¯ä»¥ä¸€æ¬¡æ“ä½œä¸€ç³»åˆ—å¯„å­˜å™¨ã€‚æ¯”å¦‚è¦æŠŠ 5 ä¸ªå¯„å­˜å™¨R6~R10ä¿å­˜åˆ°R1æŒ‡å‘çš„ä¸€æ®µå†…å­˜ä½ç½®ï¼Œå¯ä»¥ä½¿ç”¨æŒ‡ä»¤STM R1,&#123;R6-R10&#125;ã€‚R6ä¼šä¿å­˜åˆ°å†…å­˜åœ°å€R1ï¼ŒR7ä¿å­˜åˆ°R1+4ï¼ŒR8ä¿å­˜åˆ°R1+8ï¼Œä»¥æ­¤ç±»æ¨ã€‚å¯¹äºä¸è¿ç»­çš„å¯„å­˜å™¨ï¼Œå¯ä»¥ç”¨é€—å·åˆ†éš”ï¼ˆæ¯”å¦‚&#123;R1,R5,R8&#125;ï¼‰ã€‚ARMçš„æ±‡ç¼–è¯­æ³•ä¸­ï¼Œå¯„å­˜å™¨èŒƒå›´é€šå¸¸ç”¨èŠ±æ‹¬å·è¡¨ç¤ºã€‚å…¶æ¬¡ï¼Œæœ‰äº›æŒ‡ä»¤åœ¨è¯»å†™æ“ä½œä¹‹åå¯èƒ½ä¼šæ›´æ–°åŸºå€å¯„å­˜å™¨ï¼Œè¿™é€šå¸¸é€šè¿‡åœ¨å¯„å­˜å™¨ååæ·»åŠ æ„Ÿå¹å·!æ¥è¡¨ç¤ºã€‚ä¸¾ä¾‹æ¥è¯´ï¼Œå¦‚æœæŠŠå‰é¢çš„æŒ‡ä»¤æ”¹å†™ä¸ºSTM R1!, &#123;R6-R10&#125;å¹¶æ‰§è¡Œï¼Œé‚£ä¹ˆR1å°†ä¼šè¢«æ›´æ–°ä¸ºä¿å­˜R10çš„åœ°å€ä¹‹åçš„ä¸‹ä¸€ä¸ªåœ°å€ã€‚ ------------------------æ›´æ–°æ—¶é—´ 2018-10-22 08:10 æ•°æ®åŠ è½½ä¸å­˜å‚¨ ARMæ˜¯ä¸€ç§åŠ è½½-å­˜å‚¨å¼çš„ä½“ç³»ç»“æ„ï¼Œè¿™æ„å‘³ç€æ•°æ®ä¸€å®šè¦åŠ è½½åˆ°å¯„å­˜å™¨ä¸­æ‰èƒ½æ“ä½œã€‚åªæœ‰åŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤èƒ½å¤Ÿè®¿é—®å†…å­˜ï¼Œæ‰€æœ‰å…¶ä»–æŒ‡ä»¤éƒ½åªèƒ½æ“ä½œå¯„å­˜å™¨ã€‚åŠ è½½æ˜¯æŒ‡ä»å†…å­˜ä¸­è¯»å…¥æ•°æ®å¹¶ä¿å­˜åˆ°å¯„å­˜å™¨ä¸­çš„è¿‡ç¨‹ï¼Œå­˜å‚¨åˆ™æ˜¯æŒ‡æŠŠå¯„å­˜å™¨çš„å†…å®¹å†™å…¥å†…å­˜ä¸­çš„è¿‡ç¨‹ã€‚åœ¨ARMä½“ç³»ç»“æ„ä¸­ï¼ŒåŠ è½½å’Œå­˜å‚¨æŒ‡ä»¤åŒ…æ‹¬LDR/STRã€LDM/STMå’ŒPUSH/POPã€‚ LDR ä¸ STR LDR/STRæŒ‡ä»¤æ¯”è¾ƒåŸºç¡€çš„å½¢å¼æ˜¯ï¼Œæ¥å—ä¸€ä¸ªåŸºå€å¯„å­˜å™¨å’Œä¸€ä¸ªåç§»é‡ä½œä¸ºå‚æ•°ã€‚åç§»é‡çš„è¡¨ç¤ºæœ‰ä¸‰ç§æ ¼å¼ï¼ˆç«‹å³æ•°ã€å¯„å­˜å™¨ã€æ ‡é‡å¯„å­˜å™¨ï¼‰ï¼Œæ¯ç§æ ¼å¼æœ‰ä¸‰ç§å¯»å€å½¢å¼ã€‚ ç¬¬ä¸€ç§å½¢å¼ä½¿ç”¨ç«‹å³æ•°ä½œä¸ºåç§»é‡ã€‚ç«‹å³æ•°å°±æ˜¯ä¸€ä¸ªæ•´æ•°ã€‚æŠŠè¿™ä¸ªæ•°å­—ä¸åŸºå€å¯„å­˜å™¨ç›¸åŠ æˆ–ç›¸å‡ï¼Œç”¨äºè®¿é—®ç¼–è¯‘æœŸåç§»é‡å¯çŸ¥çš„æ•°æ®ã€‚ç«‹å³æ•°æœ€å¸¸è§çš„ç”¨é€”æ˜¯è®¿é—®ç»“æ„æˆ–è™šå‡½æ•°è¡¨ä¸­çš„æŸä¸ªç‰¹å®šå­—æ®µã€‚ä¸€èˆ¬å½¢å¼ï¼š STR Ra, [Rb, imm] LDR Ra, [Rc, imm] Rbæ˜¯åŸºå€å¯„å­˜å™¨ï¼Œimmæ˜¯è¦åŠ åˆ°Rbçš„åç§»é‡ ç¬¬äºŒç§åç§»é‡æ ¼å¼ç”¨ä¸€ä¸ªå¯„å­˜å™¨ä½œä¸ºåç§»é‡ï¼Œé€šå¸¸ç”¨äºè®¿é—®æ•°ç»„ä¸­çš„å…ƒç´ ï¼Œå…¶ç´¢å¼•å€¼æ˜¯è¿è¡Œæ—¶è®¡ç®—å‡ºçš„æƒ…å†µã€‚å…¶ä¸€èˆ¬æ ¼å¼å¦‚ä¸‹ï¼š STR Ra, [Rb, Rc] LDR Ra, [Rb, Rc] æ ¹æ®ä¸Šä¸‹æ–‡çš„ä¸åŒï¼ŒRbæˆ–Rcå¯ä»¥æ˜¯åŸºå€æˆ–åç§»é‡ã€‚ ç¬¬ä¸‰ç§åç§»é‡æ ¼å¼æ˜¯ä½¿ç”¨æ ‡é‡å¯„å­˜å™¨ä½œä¸ºåç§»é‡ã€‚é€šå¸¸è¿™ç§å½¢å¼ç”¨åœ¨æ•°ç»„çš„è¿­ä»£å¾ªç¯ï¼Œè€Œæ¡¶å¼ç§»ä½å™¨ç”¨äºè®¡ç®—åç§»é‡çš„æ­¥é•¿ã€‚è¿™ç§æ ¼å¼çš„ä¸€èˆ¬å½¢å¼å¦‚ä¸‹ï¼š STR Ra, [Rb, Rc, &lt;shifter&gt;] LDR Ra, [Rb, Rc, &lt;shifter&gt;] Rb æ˜¯åŸºå€å¯„å­˜å™¨ï¼ŒRc æ˜¯ä¸€ä¸ªç«‹å³æ•°ï¼Œ&lt;shifter&gt;æ˜¯åœ¨ç«‹å³æ•°ä¸Šæ‰§è¡Œçš„æ“ä½œï¼Œä»–é€šå¸¸é€šè¿‡ä¸€ä¸ªå·¦ç§»æˆ–å³ç§»æ“ä½œå¯¹ç«‹å³æ•°è¿›è¡Œæˆæ¯”ä¾‹æ”¾å¤§æˆ–ç¼©å°ã€‚ ------------------------æ›´æ–°æ—¶é—´ 2018-10-23 07:30 LDR çš„å…¶ä»–ç”¨é€” LDRç”¨äºä»å†…å­˜å‘å¯„å­˜å™¨ä¸­åŠ è½½æ•°æ®ï¼Œä½†æœ‰æ—¶å€™ä¼šçœ‹åˆ°è¿™æ ·çš„å½¢å¼ï¼š 12301: DF F8 50 82 LDR.W R8, =0x2932E00 ; LDR R8, [PC, x]02: 80 4A LDR R2, =a04d ; &quot;%04d&quot; ; LDR R2, [PC, y]03: 0E 4B LDR R3, =__imp_realloc ; LDR R3, [PC, z] ä¼ªæŒ‡ä»¤å†…éƒ¨ä½¿ç”¨äº†ç«‹å³æ•°å¯»å€å½¢å¼çš„LDRæŒ‡ä»¤ï¼ŒPCä½œä¸ºåŸºå€å¯„å­˜å™¨ã€‚æœ‰æ—¶è¿™ä¹Ÿæˆä¸ºPCç›¸å¯¹å¯»å€ï¼ˆæˆ–åœ¨x64ä¸Šç§°ä¸ºRIPç›¸å¯¹å¯»å€ï¼‰ã€‚ARMäºŒè¿›åˆ¶æ–‡ä»¶é€šå¸¸æœ‰ä¸€ä¸ªæ–‡æœ¬æ± ï¼ˆliteral poolï¼‰ï¼Œè¿™æ˜¯æŸä¸ªå­—æ®µä¸­çš„ä¸€å—å†…å­˜åŒºåŸŸï¼Œç”¨äºä¿å­˜å¸¸é‡ã€å­—ç¬¦ä¸²å’Œç”¨äºæä¾›ä½ç½®æ— å…³ç´¢å¼•æ”¯æŒçš„åç§»é‡ã€‚ï¼ˆæ–‡æœ¬æ± æ˜¯ä»£ç çš„ä¸€éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨åŒä¸€æ®µä¸­ã€‚ï¼‰åœ¨å‰é¢çš„ä»£ç ç‰‡æ®µé‡Œï¼Œä»£ç å¼•ç”¨äº†ä¿å­˜åœ¨æ–‡æœ¬æ± ä¸­çš„ä¸€ä¸ª32ä½å¸¸é‡ã€ä¸€ä¸ªå­—ç¬¦ä¸²å’Œä¸€ä¸ªå¯¼å…¥å‡½æ•°çš„åç§»é‡ã€‚åˆ©ç”¨è¿™ç§ä¼ªæŒ‡ä»¤ï¼Œå¯ä»¥åªé€šè¿‡ä¸€ä¸ªæŒ‡ä»¤å°±æŠŠ 32 ä½å¸¸é‡ç§»å…¥å¯„å­˜å™¨ï¼Œå› æ­¤å®ƒæ˜¯å¾ˆæœ‰ç”¨çš„ã€‚ä¸ºäº†æ›´æ¸…æ™°ä¸€ç‚¹ï¼Œä¸‹é¢ç»™å‡ºä¸€æ®µä»£ç ç¤ºä¾‹ï¼š 1234501: .text:0100B134 35 4B LDR R3, =0x68DB8BAD; å®é™…ä¸Šå°±æ˜¯LDR R3, [PC, #0xD4]; è¿™æ—¶PC = 0x0100B13802: ...03: .text:0100B20C AD 8B DB 68 dword_100B20C DCD 0x68DB8BAD å› ä¸ºä»£ç å¤„äºThumbçŠ¶æ€ï¼ŒPCå€¼æ˜¯å½“å‰æŒ‡ä»¤åŠ ä¸Š4ï¼Œä¹Ÿå°±æ˜¯0x0100B138ã€‚è¿™é‡Œä½¿ç”¨äº†ç«‹å³æ•°å¯»å€æ–¹å¼ï¼Œæ‰€ä»¥è¦è¯»å‡ºä½äº0x0100B20Cï¼ˆ=0x0100B138+0x4Dï¼‰çš„å­—ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬æƒ³è¦åŠ è½½çš„å¸¸é‡ã€‚ ------------------------æ›´æ–°æ—¶é—´ 2018-10-26 07:00 LDM ä¸ STM LDMå’ŒSTMä¸LDR/STRç±»ä¼¼ï¼ŒåŒºåˆ«æ˜¯å‰è€…å¯ä»¥ä»ç»™å®šçš„åŸºå€å¯„å­˜å™¨åŠ è½½å¤šä¸ªå­—ã€‚LDMå’ŒSTMé€šå¸¸ç”¨äºä»å†…å­˜è¯»å‡ºæˆ–å†™å…¥å¤šä¸ªæ•°æ®å—ï¼Œé€šå¸¸è¯­æ³•ä¸ºï¼š 12LDM&lt;mode&gt; Rn[!], &#123;Rm&#125;STM&lt;mode&gt; Rn[!], &#123;Rm&#125; Rnæ˜¯åŸºå€å¯„å­˜å™¨ï¼Œå…¶ä¸­ä¿å­˜è¦åŠ è½½/å­˜å‚¨çš„å†…å­˜åœ°å€ã€‚ï¼æ˜¯å¯é€‰çš„ï¼Œæ„æ€æ˜¯åŸºå€å¯„å­˜å™¨ä¼šæ›´æ–°ä¸ºæ–°çš„åœ°å€ï¼ˆå†™å›ï¼‰ã€‚Rmæ˜¯è¦åŠ è½½æˆ–å­˜å‚¨çš„èŒƒå›´ã€‚LDMå’ŒSTMæœ‰å››ç§æ¨¡å¼ã€‚ IAï¼ˆåé€’å¢ï¼ŒIncrement Afterï¼‰æ¨¡å¼æŠŠæ•°æ®å­˜å‚¨åˆ°åŸºå€å¯„å­˜å™¨æŒ‡å®šçš„å†…å­˜ä½ç½®ã€‚å¦‚æœæœ‰å†™å›çš„è¯ï¼Œå°±å†™å›æœ€åä¸€ä¸ªåœ°å€åŠ  4 å­—èŠ‚çš„åœ°å€ã€‚å¦‚æœæ²¡æœ‰æŒ‡å®šçš„è¯ï¼Œè¿™æ˜¯é»˜è®¤ä½¿ç”¨çš„æ¨¡å¼ã€‚ IBï¼ˆå‰é€’å¢ï¼ŒIncrement Beforeï¼‰æ¨¡å¼æŠŠæ•°æ®å­˜å‚¨åœ¨åŸºå€å¯„å­˜å™¨åŠ  4 çš„åœ°å€ä¸Šã€‚å¦‚æœæœ‰å†™ä¼šçš„è¯ï¼Œå°±æŠŠæœ€ååœ°å€å†™å›ã€‚ DAï¼ˆåé€’å‡ï¼ŒDecrement Afterï¼‰æ¨¡å¼ä¿å­˜æ•°æ®ä½¿å¾—æœ€åçš„åœ°å€æ˜¯åŸºåœ°å€ã€‚å¦‚æœæœ‰å†™å›çš„è¯ï¼Œå°±æŠŠæœ€ä½åœ°å€å‡ 4 å†™å›ã€‚ DBï¼ˆå‰é€’å‡ï¼ŒDecrement Beforeï¼‰æ¨¡å¼å­˜å‚¨æ•°æ®ä½¿å¾—æœ€åçš„åœ°å€æ˜¯åŸºåœ°å€å‡ 4.å¦‚æœæœ‰å†™å›çš„è¯ï¼Œå°±æŠŠæœ€ä½åœ°å€å†™å›ã€‚ ä¸‹é¢æ˜¯è°ƒè¯•å™¨è§‚å¯Ÿçš„å®ä¾‹ï¼š 123456789101112131415161718192021222324252627282930(gdb) br mainBreakpoint 1 at 0x8344(gdb) disas mainDump of assembler code for function main:0x00008344 &lt;+0&gt;: ldr r6, =mem ; ç¨æœ‰ä¿®æ”¹0x00008348 &lt;+4&gt;: mov r0, #100x0000834c &lt;+8&gt;: mov r1, #110x00008350 &lt;+12&gt;: mov r2, #120x00008354 &lt;+16&gt;: ldm r6, &#123;r3,r4,r5&#125; ; IAæ¨¡å¼0x00008358 &lt;+20&gt;: stm r6, &#123;r0,r1,r2&#125; ; IAæ¨¡å¼...(gdb) rBreakpoint 1, 0x00008344 in main ()(gdb) si0x00008348 in main ()(gdb) x/3x $r60x105c &lt;mem&gt;: 0x00000001 0x00000002 0x00000003(gdb) si0x0000834c in main ()...(gdb)0x00008358 in main ()(gdb) info reg r3 r4 r5r3 0x1 1r4 0x2 2r5 0x3 3(gdb) si0x0000835c in main ()(gdb) x/3x $r60x1050c &lt;mem&gt;: 0x0000000a 0x0000000b 0x0000000c ç¬¬ 5 è¡ŒæŠŠä¸€ä¸ªå†…å­˜åœ°å€å†™å…¥R6ï¼Œè¿™ä¸ªå†…å­˜åœ°å€ï¼ˆ0x1050cï¼‰çš„å†…å®¹æ˜¯ä¸€ä¸ª 3 å­—æ•°æ®ï¼ˆç¬¬ 17 è¡Œï¼‰ã€‚6-8 è¡Œå°†R2ï½R0è®¾ç½®ä¸ºæŸä¸ªå¸¸é‡ã€‚ç¬¬ 9 è¡ŒåŠ è½½ä»R6æŒ‡å‘çš„å†…å­˜åœ°å€å¼€å§‹çš„ 3 ä¸ªå­—åˆ°R3ï½R5ã€‚å¦‚ç¬¬ 24 ï½ 26 è¡Œæ‰€ç¤ºï¼ŒR3ï½R5çš„å†…å®¹æ­£æ˜¯æœŸæœ›å€¼ã€‚ç¬¬ 10 è¡Œå­˜å‚¨R0~R2åˆ°R6æŒ‡å‘çš„å†…å­˜åœ°å€å¼€å§‹çš„ç©ºé—´ã€‚ç¬¬ 29 è¡Œæ˜¾ç¤ºäº†æœŸæœ›çš„å†™å…¥å€¼ã€‚ä¸‹å›¾å±•ç¤ºå‰é¢çš„æ“ä½œç»“æœã€‚ 123456789101112131415161718192021222324252627282930 mem|---|| 0x1 | | | ldr r6, =mem || --- ||| mov r0, #10| 0x2 | | | mov r1, #11 || --- ||| mov r2, #12| 0x3 | | | ldm r6, &#123;r3,r4,r5&#125; || --- |\\/|---|| 0x1 | r6 | | stm r6, &#123;r0,r1,r2&#125; || --- |||| 0x2 | r6+4 | || --- |||| 0x3 | r6+8 | || --- |\\/r0=a r1=b r2=cr3=1 r4=2 r5=3|---|| 0xA | r6 || --- || 0xB | r6+4 || --- || 0xC | r6+8 || --- |r0=a r1=b r2=cr3=1 r4=2 r5=3 ä¸‹é¢ç”¨å†™å›æ¨¡å¼åšåŒæ ·çš„å®éªŒï¼š 123456789101112131415161718192021222324252627282930(gdb) br mainBreakpoint 1 at 0x8344(gdb) disaa mainDump of assembler code for function main:0x00008344 &lt;+0&gt;: ldr r6, =mem ; ç¨æœ‰ä¿®æ”¹0x00008348 &lt;+4&gt;: mov r0, #100x0000834c &lt;+8&gt;: mov r1, #110x00008350 &lt;+12&gt;:mov r2, #120x00008354 &lt;+16&gt;:ldm r6!, &#123;r3, r4, r5&#125; ; IAå¸¦å†™å›æ¨¡å¼0x00008358 &lt;+20&gt;:stmia r6!, &#123;r0, r1, r2&#125; ; IAå¸¦å†™å›æ¨¡å¼...(gdb) rBreakpoint 1, 0x0008344 in main ()(gdb) si0x00008348 in main ()...(gdb)0x00008354 in main ()(gdb) x/3x $r60x1050c &lt;mem&gt;ï¼š 0x000001 0x00000002 0x00000003(gdb) si0x00008358 in main ()(gdb) info reg r6r6 0x10518 66840(gdb) si0x0000835c in main ()(gdb) info reg $r6r6 0x10524 66852(gdb) x/4x $r6-120x10518 : 0x0000000a 0x0000000b 0x0000000c 0x00000000 ç¬¬ 9 è¡Œä½¿ç”¨IAå†™å›æ¨¡å¼ï¼Œæ‰€ä»¥R6æ›´æ–°ä¸ºæœ€ååœ°å€åŠ  4 çš„å€¼ï¼ˆç¬¬ 23 è¡Œï¼‰ã€‚ç¬¬ 10 è¡Œã€27 è¡Œå’Œ 30 è¡Œå¯ä»¥çœ‹åˆ°åŒæ ·çš„æ¨¡å¼ã€‚ä¸‹å›¾å±•ç¤ºäº†å®éªŒä»£ç ç‰‡æ®µæ‰§è¡Œçš„ç»“æœï¼š 12345678910111213141516171819202122232425262728293031323334 mem|---|| 0x1 | 0x1050c | | ldr r6, =mem || --- ||| mov r0, #10| 0x2 | 0x1050c+4 | | mov r1, #11 || --- ||| mov r2, #12| 0x3 | 0x1050c+8 | | ldm r6!, &#123;r3,r4,r5&#125; || --- |0x1050c+c \\/|---|| 0x1 | 0x1050c | | stm r6, &#123;r0,r1,r2&#125; || --- |||| 0x2 | 0x1050c+4 | || --- |||| 0x3 | 0x1050c+8 | || --- |0x1050c+c r6 \\/r0=a r1=b r2=cr3=1 r4=2 r5=3|---|| 0x1 | 0x1050c || --- || 0x2 | 0x1050c+4 || --- || 0x3 | 0x1050c+8 || --- || 0xA | 0x1050c+c || --- || 0xB | 0x1050c+10 || --- || 0xC | 0x1050c+14 || --- | 0x1050c+18 r6 | LDMå’ŒSTMæŒ‡ä»¤å¯ä»¥ä¸€æ¬¡å†™å…¥å¤šä¸ªå­—ï¼Œæ‰€ä»¥é€šå¸¸ç”¨äºå—å¤åˆ¶å’Œå—ç§»åŠ¨æ“ä½œã€‚æ¯”å¦‚æœ‰æ—¶ç”¨è¿™äº›æŒ‡ä»¤æ¥æ‰§è¡Œç¼–è¯‘æ—¶å¤åˆ¶é•¿åº¦å·²çŸ¥çš„å†…è”memcpyã€‚è¿™ç±»ä¼¼äºx86ä¸­å¸¦æœ‰REPå‰ç¼€çš„movsæŒ‡ä»¤ã€‚ æ³¨æ„ STM/LDMåé¢ç»å¸¸ä¼šå‡ºç°åç¼€FDã€FAã€EDæˆ–EAã€‚å®ƒä»¬å°±æ˜¯ä¸åŒæ¨¡å¼ä¸‹ï¼ˆIA/IBç­‰ï¼‰çš„STM/LDMæŒ‡ä»¤çš„ä¼ªæŒ‡ä»¤ï¼Œåˆ†åˆ«å¯¹åº”äºSTMFD/STMDBã€STMFA/STMIBã€STMED/STMDAã€STMEA/STMIAã€LDMFD/LDMIAã€LDMFA/LDMDAå’ŒLDMEA/LDMDBã€‚å› ä¸ºè¿™äº›å¯¹åº”å…³ç³»å¤ªéš¾è®°å¿†ï¼Œå»ºè®®ä¸ºæ¯ä¸ªæŒ‡ä»¤ç”»ä¸€ä¸ªå›¾ã€‚ ------------------------æ›´æ–°æ—¶é—´ 2018-11-4 08:00 PUSH ä¸ POP åŠ è½½/å­˜å‚¨æŒ‡ä»¤çš„æœ€åä¸€ç»„æ˜¯PUSHå’ŒPOPã€‚ä»–ä»¬ç±»ä¼¼äºLDM/STMï¼Œä½†æœ‰ä¸¤ç‚¹ä¸åŒï¼š ä»–ä»¬éšå¼åœ°ä½¿ç”¨ SP ä½œä¸ºåŸºåœ°å€ï¼› SP ä¼šè‡ªåŠ¨æ›´æ–°ã€‚ å’Œx86/x64ä¸­çš„ä¸€æ ·ï¼Œæ ˆæ˜¯æœä¸‹å‘ä½åœ°å€æ–¹å‘å¢é•¿çš„ã€‚é€šç”¨çš„è¯­æ³•æ˜¯PUSH/POP &#123;Rn&#125;,å…¶ä¸­Rnå¯ä»¥æ˜¯ä¸€ä¸ªå¯„å­˜å™¨èŒƒå›´ã€‚ PUSHæŒ‡ä»¤æŠŠä¸€ä¸ªæˆ–å¤šä¸ªå¯„å­˜å™¨ä¿å­˜åœ¨æ ˆä¸­ï¼Œä½¿å¾—æœ€åä¸€ä¸ªçš„ä½ç½®ä½äºå½“å‰æ ˆæŒ‡é’ˆå‘ä¸‹ 4 å­—èŠ‚å¤„ï¼Œç„¶åæŠŠSPæ›´æ–°ä¸ºç¬¬ä¸€ä¸ªä½ç½®çš„åœ°å€ã€‚POPä»å½“å‰æ ˆæŒ‡é’ˆå¤„å¼€å§‹å‘å¯„å­˜å™¨åŠ è½½æ•°æ®ï¼Œç„¶åæ›´æ–°SPä¸ºæœ€åä¸€ä¸ªä½ç½®çš„åœ°å€çš„å‘ä¸Š 4 å­—èŠ‚å¤„ã€‚PUSH/POPå®é™…ä¸Šå°±æ˜¯ä»¥SPä½œä¸ºåŸºåœ°å€æŒ‡é’ˆçš„å¸¦å†™å›çš„STMDB/LDMIAã€‚ æœ€å¸¸ç”¨åˆ°PUSH/POPçš„åœ°æ–¹å°±æ˜¯åœ¨å‡½æ•°çš„èµ·å§‹å’Œç»“æŸå¤„ï¼Œåœ¨è¿™é‡Œä»–ä»¬è¢«ç”¨ä½œå‡½æ•°åºè¨€å’Œå°¾å£°ï¼ˆå°±åƒARMçŠ¶æ€ä¸‹çš„STMFD/LDMFDä¸€æ ·ï¼‰ã€‚ä¸¾ä¾‹æ¥è¯´ï¼š 1232D E9 F0 4F PUSH.W &#123;R4-R11, LR&#125; ; ä¿å­˜å¯„å­˜å™¨å’Œè¿”å›åœ°å€...BD E9 F0 8F POP.W &#123;R4-R11, PC&#125; ; æ¢å¤å¯„å­˜å™¨å€¼å¹¶è¿”å› ------------------------æ›´æ–°æ—¶é—´ 2018-11-5 07:00 å‡½æ•°ä¸å‡½æ•°è°ƒç”¨ x86/x64åªæœ‰ä¸€ä¸ªç”¨äºå‡½æ•°è°ƒç”¨çš„æŒ‡ä»¤ï¼ˆCALLï¼‰å’Œä¸€ä¸ªç”¨äºåˆ†æ”¯è·³è½¬çš„æŒ‡ä»¤ï¼ˆJMPï¼‰ã€‚ä¸ä¹‹ä¸åŒï¼Œæ ¹æ®ç›®æ ‡åœ°å€çš„ç¼–ç æ–¹å¼ï¼ŒARM åˆ™æä¾›äº†å¤šç§æŒ‡ä»¤ã€‚è°ƒç”¨å‡½æ•°çš„æ—¶å€™ï¼Œå¤„ç†å™¨éœ€è¦çŸ¥é“å‡½æ•°è¿”å›åä»å“ªé‡Œç»§ç»­æ‰§è¡Œï¼Œè¿™ä¸ªä½ç½®é€šå¸¸è¢«ç§°ä¸ºè¿”å›åœ°å€ã€‚åœ¨x86ä¸­ï¼ŒCALLæŒ‡ä»¤åœ¨è·³è½¬åˆ°ç›®æ ‡å‡½æ•°ä¹‹å‰éšå¼åœ°æŠŠè¿”å›åœ°å€å‹å…¥æ ˆé¡¶ï¼Œç­‰åˆ°ç›®æ ‡å‡½æ•°æ‰§è¡Œå®Œæ¯•ï¼Œä¼šæŠŠæ ˆé¡¶å¼¹å‡ºåˆ°EIPï¼Œä»è€Œä»è¿”å›åœ°å€æ¢å¤æ‰§è¡Œã€‚ ARMä½“ç³»ç»“æ„ä¸Šçš„æœºåˆ¶æœ¬è´¨ä¸Šä¹Ÿæ˜¯å¦‚æ­¤ï¼Œåªæœ‰å‡ ç‚¹å¾®å°çš„åŒºåˆ«ã€‚é¦–å…ˆï¼Œè¿”å›åœ°å€å¯ä»¥ä¿å­˜åœ¨æ ˆä¸Šï¼Œä¹Ÿå¯ä»¥ä¿å­˜åœ¨é“¾æ¥å¯„å­˜å™¨ï¼ˆLRï¼‰ä¸­ï¼›è°ƒç”¨ç»“æŸåè¦æ¢å¤æ‰§è¡Œï¼Œéœ€è¦æ˜¾å¼åœ°æŠŠè¿”å›åœ°å€ä»æ ˆä¸Šå¼¹å‡ºåˆ°PCå¯„å­˜å™¨ï¼Œå¦åˆ™ä¼šæ— æ¡ä»¶è·³è½¬åˆ°LRã€‚å…¶æ¬¡ï¼Œæ ¹æ®ç›®æ ‡åœ°å€çš„æœ€ä½ä½ï¼ˆLSBï¼‰ä¸åŒï¼Œä¸€æ¬¡åˆ†æ”¯è·³è½¬å¯ä»¥åœ¨ARMçŠ¶æ€å’ŒThumbçŠ¶æ€ä¹‹é—´åˆ‡æ¢ã€‚ç¬¬ä¸‰ç‚¹ï¼ŒARMå®šä¹‰äº†æ ‡å‡†è°ƒç”¨æƒ¯ä¾‹ï¼šå‰ 4 ä¸ª 32 ä½å‚æ•°é€šè¿‡å¯„å­˜å™¨ï¼ˆR0-R3ï¼‰ä¼ é€’ï¼Œå…¶ä½™çš„å‚æ•°æ”¾åœ¨æ ˆä¸Šã€‚è¿”å›å€¼ä¿å­˜åœ¨R0ä¸­ã€‚ ARMä¸­å‡½æ•°è°ƒç”¨çš„æŒ‡ä»¤æ˜¯Bã€BXã€BLå’ŒBLXã€‚ å°½ç®¡åœ¨å‡½æ•°è°ƒç”¨çš„ä¸Šä¸‹æ–‡ä¸­å¾ˆå°‘çœ‹åˆ°BæŒ‡ä»¤ï¼Œä½†è¿™æ¡æŒ‡ä»¤ç¡®å®å¯ä»¥ç”¨äºæ§åˆ¶ä¼ é€’ã€‚ä»–å°±æ˜¯ä¸€æ¡ç®€å•çš„æ— æ¡ä»¶è·³è½¬æŒ‡ä»¤ï¼Œäºx86ä¸­çš„JMPæŒ‡ä»¤ç›¸åŒï¼Œé€šå¸¸åœ¨å¾ªç¯å’Œæ¡ä»¶æ‰§è¡Œå†…éƒ¨ç”¨äºè·³è½¬åˆ°å¼€å¤´æˆ–è·³å‡ºå¾ªç¯ï¼Œè¿˜å¯ä»¥ç”¨äºè°ƒç”¨æ°¸ä¸è¿”å›çš„å‡½æ•°ã€‚ BæŒ‡ä»¤åªèƒ½ä½¿ç”¨æ ‡ç­¾åç§»é‡ä½œä¸ºå…¶ç›®æ ‡åœ°å€ï¼Œè€Œä¸èƒ½ä½¿ç”¨å¯„å­˜å™¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼ŒBæŒ‡ä»¤çš„è¯­æ³•ä¸ºB immï¼Œå…¶ä¸­immæ˜¯ç›¸å¯¹äºå½“å‰æŒ‡ä»¤çš„åç§»é‡ã€‚ï¼ˆè¿™é‡Œæ²¡æœ‰è€ƒè™‘æ¡ä»¶æ‰§è¡Œæ ‡å¿—ä½ï¼Œå°†ä¼šåœ¨ä¹‹åçš„ç¬”è®°ä¸­è¯¦ç»†ä»‹ç»ã€‚ï¼‰éœ€è¦è®°ä½çš„æ˜¯ï¼šå› ä¸ºARMå’ŒThumbæŒ‡ä»¤æ˜¯2å­—èŠ‚æˆ–4å­—èŠ‚å¯¹é½çš„ï¼Œæ‰€ä»¥ç›®æ ‡åç§»é‡å¿…é¡»æ˜¯ä¸€ä¸ªå¶æ•°ã€‚ BXæ˜¯åˆ†æ”¯è·³è½¬å¹¶äº¤æ¢ï¼ˆBranch and Exchangeï¼‰ã€‚ä¸BæŒ‡ä»¤çš„ç›¸ä¼¼ä¹‹å¤„åœ¨äºï¼Œä¸¤è€…éƒ½æ˜¯æŠŠæ§åˆ¶è½¬ç§»åˆ°æŸä¸ªç›®æ ‡åœ°å€å¤„ï¼Œä½†BXèƒ½å¤Ÿåœ¨ARMå’ŒThumbçŠ¶æ€é—´åˆ‡æ¢ï¼Œå¹¶ä¸”ç›®æ ‡åœ°å€æ˜¯ä¿å­˜åœ¨å¯„å­˜å™¨ä¸­çš„ã€‚åˆ†æ”¯è·³è½¬æŒ‡ä»¤ä»¥Xç»“å°¾ï¼Œè¡¨ç¤ºè¿™æ¡æŒ‡ä»¤èƒ½åˆ‡æ¢çŠ¶æ€ã€‚å¦‚æœç›®æ ‡åœ°å€æœ€ä½ä½æ˜¯ 1ï¼Œé‚£ä¹ˆå¤„ç†å™¨ä¼šè‡ªåŠ¨åˆ‡æ¢åˆ°ThumbçŠ¶æ€ï¼Œå¦åˆ™å°±æ‰§è¡Œåœ¨ARMçŠ¶æ€ã€‚æŒ‡ä»¤çš„æ ¼å¼æ˜¯BX&lt;å¯„å­˜å™¨&gt;ï¼Œå…¶ä¸­å¯„å­˜å™¨ä¸­å­˜æœ‰ç›®æ ‡åœ°å€ã€‚è¿™æ¡æŒ‡ä»¤æœ‰ä¸¤ç§æœ€å¸¸ç”¨çš„æ–¹å¼ï¼Œä¸€ç§æ˜¯é€šè¿‡è·³è½¬åˆ°LRï¼ˆä¹Ÿå³ BX LRï¼‰ä»å‡½æ•°è¿”å›ï¼Œè¿˜æœ‰ä¸€ç§æ˜¯ç”¨äºåˆ‡æ¢åˆ°ä¸åŒçŠ¶æ€çš„ä»£ç ï¼ˆä¹Ÿå³ä»ARMåˆ‡æ¢åˆ°ThumbçŠ¶æ€æˆ–åä¹‹ï¼‰ã€‚åœ¨ç¼–è¯‘åçš„ä»£ç ä¸­ï¼Œå‡½æ•°ç»“å°¾å¤„å‡ ä¹æ€»ä¼šå‡ºç°BX LRï¼ŒåŸºæœ¬ä¸Šäºx86ä¸­çš„RETç›¸åŒã€‚ BLæ˜¯åˆ†æ”¯è·³è½¬å¹¶è¿æ¥ï¼ˆBranch with Linkï¼‰ï¼Œå®ƒç±»ä¼¼äºBæŒ‡ä»¤ï¼Œä½†ä»–å¯ä»¥åœ¨æŠŠæ§åˆ¶åˆ‡æ¢åˆ°ç›®æ ‡åç§»é‡ä¹‹å‰æŠŠè¿”å›åœ°å€ä¿å­˜åˆ°LRã€‚è¿™ä¹Ÿè®¸æ˜¯å’Œx86ä¸­çš„CALLæŒ‡ä»¤æœ€ä¸ºæ¥è¿‘çš„ä¸€æ¡æŒ‡ä»¤ï¼Œç»å¸¸åœ¨å‡½æ•°è°ƒç”¨ä¸­ä½¿ç”¨ã€‚BLæŒ‡ä»¤æ ¼å¼ä¸BæŒ‡ä»¤ç›¸åŒï¼ˆä¹Ÿå°±æ˜¯è¯´ï¼Œåªæ¥å—åç§»é‡å‚æ•°ï¼‰ã€‚ä¸‹é¢è¿™æ®µä»£ç è§£é‡Šäº†å‡½æ•°è°ƒç”¨å’Œè¿”å›çš„è¿‡ç¨‹ï¼š 1234567800014350 BL foo ; LR = 0x0001435400014354 MOVS R4, #0x15...0001B224 foo0001B224 PUSH &#123;R1-R3&#125;0001B226 MOV R3, 0x6124...0001B24C BX LR ; è¿”å›åˆ°0x00014354 ä¸Šé¢ä»£ç çš„ç¬¬ 1 è¡Œä½¿ç”¨BLè°ƒç”¨å‡½æ•°fooã€‚åœ¨è½¬æ¢æ§åˆ¶åˆ°ç›®æ ‡ä¹‹å‰ï¼ŒBLåœ¨LRä¸­ä¿å­˜äº†è¿”å›åœ°å€ï¼ˆ0x000014354ï¼‰ã€‚fooåšäº†ä¸€äº›å·¥ä½œç„¶åè¿”å›åˆ°è°ƒç”¨è€…ï¼ˆBX LRï¼‰ã€‚ BLXæ˜¯æŒ‡è·³è½¬åŠ è¿æ¥å’Œäº¤æ¢ï¼ˆBranch with Link and Exchangeï¼‰ã€‚äºBLç±»ä¼¼ï¼ŒBLXä¹Ÿå¯ä»¥æ”¯æŒçŠ¶æ€åˆ‡æ¢ã€‚ä¸¤è€…ä¸»è¦çš„åŒºåˆ«åœ¨äºï¼ŒBLXå¯ä»¥æ¥å—åç§»é‡æˆ–å¯„å­˜å™¨ä½œä¸ºè·³è½¬ç›®æ ‡ï¼Œè€Œä¸”åœ¨BLXæŒ‡ä»¤ä½¿ç”¨åç§»é‡çš„æƒ…å†µä¸‹ï¼Œå¤„ç†å™¨æ€»æ˜¯ä¼šåˆ‡æ¢çŠ¶æ€ï¼ˆARMåˆ°Thumbæˆ–åä¹‹ï¼‰ã€‚å› ä¸ºè¿™æ¡æŒ‡ä»¤äºBLçš„ç‰¹æ€§ç›¸åŒï¼Œä¹Ÿå¯ä»¥æŠŠå®ƒå½“åšx86ä¸­çš„CALLæŒ‡ä»¤ã€‚å®é™…ä½¿ç”¨ä¸­ï¼ŒBLå’ŒBLXéƒ½ç”¨äºå®ç°å‡½æ•°è°ƒç”¨ã€‚å¦‚æœå‡½æ•°åœ¨32MBèŒƒå›´ä¹‹å†…ï¼Œé€šå¸¸ä½¿ç”¨BLï¼Œè€Œç›®æ ‡åŒºåŸŸä¸ç¡®å®šï¼ˆæ¯”å¦‚å‡½æ•°æŒ‡é’ˆï¼‰çš„æ—¶å€™å¸¸ç”¨BLXã€‚é€šå¸¸åœ¨ThumbçŠ¶æ€ä¸‹è¿è¡Œçš„æ—¶å€™ï¼Œä½¿ç”¨BLXæŒ‡ä»¤è°ƒç”¨åº“ä¾‹ç¨‹ï¼Œè€Œåœ¨ARMçŠ¶æ€ä¸‹ä½¿ç”¨BLã€‚ ------------------------æ›´æ–°æ—¶é—´ 2018-11-9 07:00 ç®—æœ¯è¿ç®— æŠŠæ•°å€¼ä»å†…å­˜åŠ è½½åˆ°å¯„å­˜å™¨ä¹‹åï¼Œä»£ç å°±å¯ä»¥ä¸Šé¢æ‰§è¡Œå„ç§æ“ä½œäº†ã€‚æœ€ç®€å•çš„æ“ä½œå°±æ˜¯é€šè¿‡movæŒ‡ä»¤æŠŠæ•°æ®ç§»åŠ¨åˆ°å¦ä¸€ä¸ªå¯„å­˜å™¨ä¸­ã€‚æ“ä½œæºå¯ä»¥æ˜¯å¸¸é‡ã€å¯„å­˜å™¨æˆ–æ¡¶å¼ç§»ä½å™¨çš„è¿ç®—ç»“æœã€‚æ¡¶å¼ç§»ä½å™¨è¿ç®—åŒ…æ‹¬å·¦ç§»ï¼ˆLSLï¼‰ã€å³ç§»ï¼ˆLSRã€ASRï¼‰å’Œå¾ªç¯ç§»ä½ï¼ˆRORã€RRXï¼‰ã€‚æ¡¶å¼ç§»ä½å™¨è®©æŒ‡ä»¤å¯ä»¥æ“ä½œæ— æ³•ä»¥ç«‹å³æ•°å½¢å¼ç¼–ç çš„å¸¸é‡ï¼Œå› æ­¤å¾ˆæœ‰ç”¨å¤„ã€‚ARMå’ŒThumbæŒ‡ä»¤çš„å®½åº¦å¯èƒ½æ˜¯16ä½æˆ–32ä½ï¼Œæ‰€ä»¥æ— æ³•ç›´æ¥ä½¿ç”¨32ä½å¸¸æ•°ä½œä¸ºå‚æ•°ã€‚æœ‰äº†æ¡¶å¼ç§»ä½å™¨ï¼Œç«‹å³æ•°å¯ä»¥è¢«è½¬æ¢ä¸ºä¸€ä¸ªæ›´å¤§å€¼ç„¶åç§»åŠ¨åˆ°å…¶ä»–å¯„å­˜å™¨ã€‚å¦ä¸€ç§ç§»åŠ¨32ä½å¸¸é‡åˆ°å¯„å­˜å™¨çš„æ–¹æ³•æ˜¯æŠŠå¸¸é‡åˆ†å‰²ä¸ºä¸¤ä¸ª16ä½æ•°å€¼ï¼Œåˆ†ä¸¤æ¬¡ç§»åŠ¨ï¼›è¿™é€šå¸¸é€šè¿‡MOVWå’ŒMOVTæŒ‡ä»¤å®ç°ã€‚MOVTè®¾ç½®å¯„å­˜å™¨çš„é«˜16ä½ï¼ŒMOVWè®¾ç½®ä½16ä½ã€‚ åŸºæœ¬ç®—æœ¯å’Œé€»è¾‘è¿ç®—åŒ…æ‹¬ADDã€SUBã€MULã€ANDã€ORRå’ŒEORã€‚ æ³¨æ„ï¼šARMæ²¡æœ‰åŸç”Ÿçš„é™¤æ³•æŒ‡ä»¤ã€‚ï¼ˆARMv7-Rå’ŒARMv7-Må†…æ ¸æœ‰SDIVå’ŒUDIVæŒ‡ä»¤ï¼Œä½†è¿™é‡Œä¸è®¨è®ºï¼‰å®é™…åº”ç”¨ä¸­ï¼Œè¿è¡Œæ—¶ä¼šä½¿ç”¨è½¯ä»¶å®ç°æ¥è¿›è¡Œé™¤æ³•è¿ç®—ï¼Œä»£ç åªè¦æŒ‰éœ€è°ƒç”¨ã€‚ä¸‹é¢æ˜¯Windows Cè¿è¡Œæ—¶çš„ä¸€ä¸ªä¾‹å­ï¼š 12341 46 MOV R1ï¼Œ R840 46 MOV R0,R635 F0 9E 9F BL __rt_udiv ; udivçš„è½¯ä»¶å®ç° ------------------------æ›´æ–°æ—¶é—´ 2018-11-11 07:00 åˆ†æ”¯è·³è½¬ä¸æ¡ä»¶æ‰§è¡Œ å‰é¢è®¨è®ºçš„éƒ½æ˜¯æŒ‰ç…§çº¿æ€§é¡ºåºæ‰§è¡Œçš„ä¾‹å­ï¼Œè€Œç»å¤§å¤šæ•°ç¨‹åºéƒ½åŒ…å«æœ‰æ¡ä»¶ä¸å¾ªç¯ã€‚åœ¨æ±‡ç¼–ä»£ç å±‚çº§ï¼Œè¿™äº›ç»“æ„æ˜¯é€šè¿‡å­˜å‚¨åœ¨åº”ç”¨ç¨‹åºçŠ¶æ€å¯„å­˜å™¨ï¼ˆAPSRï¼‰ä¸­çš„æ¡ä»¶æ ‡å¿—ä½å®ç°çš„ã€‚APSRæ˜¯CPSRçš„åˆ«åï¼Œç±»ä¼¼äºx86ä¸­çš„EFLAGå¯„å­˜å™¨ã€‚ Nï¼ˆNegativeï¼Œè´Ÿå€¼æ ‡å¿—ä½ï¼‰ï¼šå¦‚æœè¿ç®—çš„ç»“æœæ˜¯è´Ÿæ•°ï¼Œè¿™ä¸ªæ ‡å¿—å°±ä¼šè¢«è®¾ç½®ï¼ˆç»“æœçš„æœ€é«˜æœ‰æ•ˆä½ä¸º 1ï¼‰ Zï¼ˆZeroï¼Œé›¶æ ‡å¿—ä½ï¼‰ï¼šè¿ç®—ç»“æœä¸º 0 æ—¶è®¾ç½® Cï¼ˆCarryï¼Œå€Ÿä½æ ‡å¿—ä½ï¼‰ï¼šä¸¤ä¸ªæ— ç¬¦å·å€¼è®¡ç®—ç»“æœæº¢å‡ºæ—¶è®¾ç½® Vï¼ˆOverflowï¼Œæº¢å‡ºæ ‡å¿—ä½ï¼‰ï¼šä¸¤ä¸ªæœ‰ç¬¦å·å€¼è®¡ç®—ç»“æœæº¢å‡ºæ—¶è®¾ç½® ITï¼ˆIf-then æ ‡å¿—ä½ï¼‰ï¼šè¿™äº›æ ‡å¿—ä½ç¼–ç äº† Thumb æŒ‡ä»¤ IT ä½¿ç”¨çš„å„ç§æ¡ä»¶ã€‚ 1234567 31 26 15 10 9 5 4 0CPSR |cond.flags | |1T |å¤§å°ç«¯æ ‡å¿—ä½E | |Thumbæ ‡å¿—ä½T |æ¨¡å¼æ ‡å¿—ä½M |...APSR |N|Z|C|V|Q | |ä¿ç•™| 31 26 15 0 Nã€Zã€C å’Œ V æ ‡å¿—ä½ä¸ x86 ä¸­çš„ EFLAG å¯„å­˜å™¨çš„ SFã€ZFã€CF å’Œ OF æ ‡å¿—ä½ç›¸åŒã€‚åœ¨æ›´é«˜çº§çš„è¯­è¨€ä¸­ï¼Œä½¿ç”¨è¿™äº›æ ‡å¿—ä½æ¥å®ç°æ¡ä»¶å’Œå¾ªç¯ï¼›åœ¨æŒ‡ä»¤çº§ä»£ç ä¸­ï¼Œä¹Ÿé€šè¿‡è¿™äº›æ ‡å¿—ä½æ”¯æŒæ¡ä»¶æ‰§è¡Œã€‚é€šè¿‡è¿™äº›æ ‡å¿—ä½æ¥æè¿°ç›¸ç­‰æ€§ã€‚ åç¼€/ç¼–ç  æ„ä¹‰ æ ‡å¿—ä½ EQ ç­‰äº Z==1 NE ä¸ç­‰äº Z==0 MI å‡ã€è´Ÿ N==1 PL åŠ ã€æ­£æˆ–è€…ä¸º 0 N==0 HI æ— ç¬¦å·å¤§äº C1 ä¸” Z0 LS æ— ç¬¦å·å°äº C0 æˆ– Z1 GE æœ‰ç¬¦å·å¤§äºç­‰äº N==V LT æœ‰ç¬¦å·å°äº Nï¼=V GT æœ‰ç¬¦å·å¤§äº Z0 ä¸” NV LE æœ‰ç¬¦å·å°äºç­‰äº Z==1 æˆ– Nï¼=V é»˜è®¤æƒ…å†µä¸‹æŒ‡ä»¤ä¸ä¼šæ›´æ–°æ¡ä»¶æ ‡å¿—ä½ï¼Œé™¤éä½¿ç”¨äº† S åç¼€ã€‚æ¯”è¾ƒæŒ‡ä»¤ï¼ˆCBZã€CMPã€TSTã€CMN å’Œ TEOï¼‰ä¼šè‡ªåŠ¨æ›´æ–°æ ‡å¿—ä½ï¼Œå› ä¸ºé€šå¸¸ä»–ä»¬è¢«ç”¨äºåˆ†æ”¯æŒ‡ä»¤ä¹‹å‰ã€‚ æœ€å¸¸ç”¨çš„æ¯”è¾ƒæŒ‡ä»¤å¯èƒ½å°±æ˜¯ CMPã€‚å…¶è¯­æ³•ä¸º CMP Rn, Xï¼Œå…¶ä¸­ Rn æ˜¯å¯„å­˜å™¨ï¼ŒX å¯ä»¥æ˜¯ç«‹å³æ•°ã€å¯„å­˜å™¨æˆ–æ¡¶å¼ç§»ä½æ“ä½œã€‚å…¶è¯­ä¹‰ä¸ x86 ä¸­çš„åŒåæŒ‡ä»¤ç›¸åŒï¼šæ‰§è¡Œ Rn - Xï¼Œè®¾ç½®ç›¸åº”çš„æ ‡å¿—ä½ï¼Œç„¶åä¸¢å¼ƒç»“æœã€‚é€šå¸¸è¿™æ¡æŒ‡ä»¤åé¢ä¼šè·Ÿéšä¸€ä¸ªæ¡ä»¶åˆ†æ”¯è·³è½¬ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨æ³•ç¤ºä¾‹åŠå…¶ä¼ªä»£ç ï¼š ARM 123456789101112B3 EB E7 7F CMP.W R3, R7, ASR #3105 DB BLT loc_less01 DC BGT loc_greaterBD 42 CMP R5, R702 D9 BLS loc_less loc_greater07 3D SUBS R5, #76E F1 00 0E SBC.W LR, LR, #0 loc_lessA5 FB 08 12 UMULL.W R1, R2, R5, R887 FB 08 04 SMULL.W R0, R4, R7, R80E FB 08 23 MLA.W R3, LR, R8, R2 C ä¼ªä»£ç  123if (r3 &lt; r7) &#123;goto loc_less;&#125; else if (r3 &gt; r7) &#123;goto loc_greater;&#125; else if (r5 &lt; r7) &#123;goto loc_less;&#125; ------------------------æ›´æ–°æ—¶é—´ 2018-11-12 07:00 Thunb çŠ¶æ€ switch-case æ‚é¡¹ Windows å†…æ ¸ è°ƒè¯•ä¸è‡ªåŠ¨åŒ– ä»£ç æ··æ·† ä»£ç ç ”ç©¶ windows å†…æ ¸ä»£ç  ç‰‡æ®µ 1ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980; NTSTATUS __cdecl sub_4038f0(PFILE_OBJECT FileObject, HANDLE Handle, BOOLEAN flag)sub_4038F0 proc nearpush rbx ; rbxå‹æ ˆpush rbp ; rbpå‹æ ˆpush rsi ; rsiå‹æ ˆpush rdi ; rdiå‹æ ˆpush r12 ; r12å‹æ ˆsub rsp, 60h ; rspçš„å€¼å‡å»0x60mov bpl, r8b ; r8pçš„å€¼å…¥bplmov r12, rdx ; å°†rdxçš„å€¼æ”¾è¿›æ ˆr12ä¸­mov rdi, rcx ; å°†rcxçš„å€¼æ”¾è¿›æ ˆrdiä¸­mov cs:IoGetRelatedDeviceObject ; IoGetRelatedDeviceObjectè¿”å›å€¼æŒ‡å‘ç›¸åº”è®¾å¤‡å¯¹è±¡çš„æŒ‡é’ˆmov [rsp+88h+arg_18], 1 ; æŠŠ1èµ‹ç»™[rsp+88h+arg_18]xor edx, edx ; ChargeQuota å°†edxåˆå§‹åŒ–ç½®0mov cl, [rax+4ch] ; StackSize æ ˆç©ºé—´å¤§å°mov rsi, rax ; å°†raxçš„å€¼æ”¾è¿›æ ˆrsiä¸­call cs:IoAllocateIrp ; IoAllocateIrpä¾‹ç¨‹åˆ†é…ä¸€ä¸ªIRPï¼ˆä¸ºæ¯ä¸ªé©±åŠ¨å±‚ä¸‹çš„è°ƒç”¨è€…ç»™å®šI/Oå †æ ˆæ•°é‡å’Œé€‰é¡¹ï¼‰test rax, rax ; ç›¸å½“äºand rax raxï¼Œæ ¹æ®ç»“æœè®¾ç½®æ ‡å¿—ä½ï¼Œä¸ä¼šä¿å­˜ç»“æœã€‚ï¼ˆå½±å“æ ‡å¿—ä½C,O,P,Z,Sã€‚å…¶ä¸­Cä¸Oä¸¤ä¸ªæ ‡å¿—ä¼šè¢«è®¾ä¸º0ï¼‰mov rbx, rax ; å°†raxçš„å€¼æ”¾è¿›æ ˆrbxä¸­jnz short loc_403932 ; å¦‚æœZæ ‡å¿—ä½ä¸º0ï¼Œå°±è·³è½¬åˆ°loc_403932ä¸­mov eax, 0C0000017h ; æŠŠç«‹å³æ•°0C0000017hæ”¾è¿›eaxï¼ˆæ­¤å¤„ç”¨æ¥è¡¨ç¤ºè·³è½¬å¤±è´¥ï¼‰ã€‚ç«‹å³æ•°å¿…é¡»ä»¥æ•°å¼€å¤´ï¼Œä»¥å­—æ¯å¼€å¤´ä¼šè¢«è®¤ä¸ºæ˜¯å¯„å­˜å™¨æˆ–å˜é‡ã€‚jmp loc_403A0C ; æ— æ¡ä»¶è·³è½¬åˆ° loc_403A0Cæ–¹æ³•ï¼ˆloc_403A0Cæ–¹æ³•çš„ä½œç”¨æ˜¯æ¸…ç†æ ˆç©ºé—´ï¼‰loc_403932:lea rax, [rsp+88h+arg_18] ; raxè·å–[rsp+88h+arg_18]çš„åœ°å€xor r8d, r8d ; State çŠ¶æ€å€¼åˆå§‹åŒ–ä¸º0lea rcx, [rsp+88h+Event] ; Event rcxè·å–[rsp+88h+Event]çš„åœ°å€mov [rbx+18h], rax ; IRP.AssociatedIrp.SystemBuffer æŠŠraxæ‰€æŒ‡å‘åœ°å€çš„å€¼èµ‹ç»™[rbx+18h]ï¼Œä¹Ÿå°±æ˜¯æŠŠ1èµ‹ç»™[rbx+18h]lea rax, [rsp+88h+Event] ; raxè·å–[rsp+88h+Event]çš„åœ°å€lea edx, [r8+1] ; Type ç±»å‹ edxè·å–[r8+1]çš„åœ°å€mov [rbx+50h], rax ; IRP.UserEvent æŠŠraxæ‰€æŒ‡å‘[rsp+88h+Event]åœ°å€çš„å€¼èµ‹ç»™[rbx+50h]ï¼Œä½œä¸ºç”¨æˆ·äº‹ä»¶lea rax, [rsp+88h+var_58] ; raxè·å–[rsp+88h+var_58]çš„åœ°å€mov [rbx+48h], rax ; IRP.UserIosb æŠŠraxæ‰€æŒ‡å‘[rsp+88h+var_58]åœ°å€çš„å€¼èµ‹ç»™[rbx+48h]mov rax, gs:+188h ; KPCR.Prcb.CurrentThread gså¯„å­˜å™¨åŸºå€+18hå¾—åˆ°çš„åœ°å€å¤„çš„å€¼ï¼Œèµ‹ç»™raxmov [rbx+0C0h], rdi ; IRP.Tail.OVerlay.OriginalFileObiect æŠŠå¯„å­˜å™¨rdiçš„å€¼ï¼ˆä¹Ÿå°±æ˜¯å‰é¢rcxçš„å€¼ï¼‰æ”¾è¿›å†…å­˜[rbx+48h]ä¸­mov [rbx+98h], rax ; IRP.Tail.Overlay.Thread gså¯„å­˜å™¨åŸºå€+18hå¤„çš„å€¼æ”¾è¿›å†…å­˜[rbx+98h]mov byte ptr [rbx+40h], 0 ; IRP.RequestorMode æŠŠ[rbx+40h]å¤„çš„ä¸€ä¸ªå­—èŠ‚å¡«ä¸º0call cs:KeInitializeEvent ; è°ƒç”¨ KeInitializeEventæ–¹æ³•å°†ä¸€ä¸ªäº‹ä»¶å¯¹è±¡åˆå§‹åŒ–ä¸ºä¸€ä¸ªåŒæ­¥æˆ–é€šçŸ¥ç±»å‹çš„äº‹ä»¶ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºä¸€ä¸ªæœ‰ä¿¡å·æˆ–æ— ä¿¡å·çš„çŠ¶æ€test bpl, bpl ; and bpl bplï¼Œæ ¹æ®ç»“æœè®¾ç½®æ ‡å¿—ä½ï¼Œä¸ä¼šä¿å­˜ç»“æœã€‚Cä¸Oä¼šè¢«è®¾ç½®ä¸º0.mov rcx, [rbx+0B8h] ; å°†å†…å­˜[rbx+0B8h]å¤„çš„å€¼æ”¾è¿›rcxä¸­mov byte ptr [rbx+40h], 6 ; IRP_MJ_SET_INFORMATION æŠŠ[rbx+40h]å¤„çš„ä¸€ä¸ªå­—èŠ‚å¡«ä¸º6mov [rcx-20h], rsi ; IO_STACK_LOCATION.DeviceObject å°†rsiå¤„çš„å€¼æ”¾è¿›å†…å­˜[rcx-20h]ä¸­mov [rcx-18h], rdi ; IO_STACK_LOCATION.FileObject å°†rdiå¤„çš„å€¼æ”¾è¿›å†…å­˜[rcx-18h]ä¸­jz short loc_4039A6 ; å¦‚æœZæ ‡å¿—ä½ä¸º1ï¼Œå°±è·³è½¬åˆ°loc_4039A6ä¸­mov rax, [rdi+28h] ; FILE_OBJECT.SectionObjectPointer å°†å†…å­˜[rdi+28h]ä¸­çš„å€¼æ”¾è¿›raxä¸­test rax, rax ; and rax raxï¼Œæ ¹æ®ç»“æœè®¾ç½®æ ‡å¿—ä½ï¼Œä¸ä¼šä¿å­˜ç»“æœã€‚Cä¸Oä¼šè¢«è®¾ç½®ä¸º0.jz short loc_4039A6 ; å¦‚æœZæ ‡å¿—ä½ä¸º1ï¼Œå°±è·³è½¬åˆ°loc_4039A6ä¸­mov [rax+10h], 0 ; SECTION_OBJECT_POINTERS.ImageSectionObject å°†[rax+10h]ç½®ä¸º0loc_4039A6:mov [rcx-28h], r12 ; IO_STACK_LOCATION.Parameters.SetFile.DeleteHandle å°†å¯„å­˜å™¨r12ä¸­çš„å€¼æ”¾è¿›[rcx-28h]ä¸­mov [rcx-30h], rdi ; IO_STACK_LOCATION.Parameters.SetFile.Object å°†å¯„å­˜å™¨rdiä¸­çš„å€¼æ”¾è¿›[rcx-30h]ä¸­mov dword ptr [rcx-38h], 0Dh ; FileDispositionInformation IO_STACK_LOCATION.Parameters.SetFile.FileInfomationClass å°†[rcx-38h]å¤„çš„åŒå­—è®¾ç½®ä¸º0Dhmov dword ptr [rcx-40h],1 ; IO_STACK_LOCATION.Parameters.SetFile.Length å°†[rcx-40h]å¤„çš„åŒå­—è®¾ç½®ä¸º1mov rax, [rbx+0b8h] ; CurrentIrpStackLocation å°†[rbx+0b8h]å¤„çš„å€¼æ”¾è¿›raxä¸­lea rcx, sub_4038B4 ; completionroutine rcxè·å–sub_4038B4çš„åœ°å€mov [rax-10h], rcx ; IO_STACK_LOCATION.ComplerionRoutine å°†rcxæŒ‡å‘sub_4038B4çš„åœ°å€å¤„çš„å€¼æ”¾è¿›[rax-10h]ä¸­mov rcx, rsi ; DeviceObject å°†rsiå¤„çš„å€¼æ”¾è¿›rcxä¸­mov rdx, rbx ; Irp å°†rbxå¤„çš„å€¼æ”¾è¿›rdxä¸­mov qword ptr [rax-8], 0 ; å°†å†…å­˜[rax-8]å¤„çš„åŒå­—è®¾ç½®ä¸º0mov byte ptr [rax-45h], 0E0h ; flag å°†å†…å­˜[rax-45h]å¤„çš„ä¸€ä¸ªå­—èŠ‚è®¾ç½®ä¸º0call cs:IofCallDriver ; è°ƒç”¨IofCallDriveræ–¹æ³•cmp eax, 103h ; STATUS_PENDING æ¯”è¾ƒeaxå’Œ103hjnz short loc_403A09 ; å¦‚æœeaxå’Œ103hä¸ç›¸ç­‰å°±è·³è½¬åˆ°loc_403A09lea rcx, [rsp+88h+Event] ; Object rcxè·å–[rsp+88h+Event]çš„åœ°å€mov r9b, 1 ; Alertable å°†r9bèµ‹å€¼ä¸º1xor r8d, r8d ; WaitMode r8dç½®ä¸º0xor edx, edx ; WaitReason edxç½®ä¸º0mov [rsp+88h+var_68], 0 ; å°†[rsp+88h+var_68]ç½®ä¸º0call cs:KeWaitForSingleObject ; è°ƒç”¨è¯¥æ–¹æ³•å°†å½“å‰çº¿ç¨‹(ethreadé‡Œä»¥Waitå¼€å¤´çš„å­—æ®µWaitIrql,WaitMode,WaitStatus)ç½®ä¸ºç­‰å¾…çŠ¶æ€,ç›´åˆ°æä¾›çš„åˆ†å‘æœºå™¨å¯¹è±¡è¢«ç½®ä¸ºå·²å¤„ç†çŠ¶æ€æˆ–ç¬¬äº”ä¸ªå‚æ•°ç»™å‡ºçš„Timeoutèµ°å®Œã€‚loc_403A09:mov eax, [rbx+30h] ; IRP.IoStatus.Status å°†å†…å­˜[rbx+30h]å¤„çš„å€¼èµ‹ç»™eaxloc_403A0C: ; æ¸…ç†æ ˆadd rsp, 60h ; æ ˆæŒ‡é’ˆrsp+60hè¿›è¡Œå¤ä½pop r12 ; å‡ºæ ˆr12pop rdi ; å‡ºæ ˆrdipop rsi ; å‡ºæ ˆrsipop rbp ; å‡ºæ ˆrbppop rbx ; å‡ºæ ˆrbxretnsub_4038F0 endp","categories":[{"name":"notes","slug":"notes","permalink":"http://debug.cool/categories/notes/"}],"tags":[]},{"title":"å¦‚ä½•ç¼–å†™ä¸€ä¸ªç®€å•å†…æ ¸","slug":"noteKernelProgram","date":"2018-09-04T06:04:00.000Z","updated":"2021-05-07T07:30:39.981Z","comments":true,"path":"2018/09/04/noteKernelProgram/","link":"","permalink":"http://debug.cool/2018/09/04/noteKernelProgram/","excerpt":"ç¼–å†™ä¸€ä¸ªç®€å•çš„å†…æ ¸ï¼Œå¯ä»¥å† x86 ç³»ç»Ÿä¸ŠåŠ è½½ GRUB å¼•å¯¼åŠ è½½ç¨‹åºã€‚æ­¤å†…æ ¸å°†åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸€æ¡ä¿¡æ¯ï¼Œç„¶åæŒ‚èµ·ã€‚","text":"ç¼–å†™ä¸€ä¸ªç®€å•çš„å†…æ ¸ï¼Œå¯ä»¥å† x86 ç³»ç»Ÿä¸ŠåŠ è½½ GRUB å¼•å¯¼åŠ è½½ç¨‹åºã€‚æ­¤å†…æ ¸å°†åœ¨å±å¹•ä¸Šæ˜¾ç¤ºä¸€æ¡ä¿¡æ¯ï¼Œç„¶åæŒ‚èµ·ã€‚ x86 æœºå™¨æ˜¯å¦‚ä½•å¯åŠ¨çš„ åœ¨æˆ‘ä»¬è€ƒè™‘ç¼–å†™å†…æ ¸ä¹‹å‰ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æœºå™¨æ˜¯å¦‚ä½•å¯åŠ¨å¹¶å°†æ§åˆ¶è½¬ç§»åˆ°å†…æ ¸çš„ã€‚ ä¸Šç”µåï¼Œx86 CPUçš„å¤§å¤šæ•°å¯„å­˜å™¨éƒ½æœ‰æ˜ç¡®å®šä¹‰çš„å€¼ã€‚æŒ‡ä»¤æŒ‡é’ˆï¼ˆEIPï¼‰å¯„å­˜å™¨ä¿å­˜å¤„ç†å™¨æ­£åœ¨æ‰§è¡Œçš„æŒ‡ä»¤çš„å­˜å‚¨å™¨åœ°å€ã€‚EIPç¡¬ç¼–ç ä¸ºå€¼0xFFFFFFF0ï¼Œå› æ­¤ï¼Œx86 CPUç¡¬è¿çº¿å¼€å§‹åœ¨ç‰©ç†åœ°å€0xFFFFFFF0å¤„æ‰§è¡Œã€‚å®é™…ä¸Šï¼Œå®ƒæ˜¯32ä½åœ°å€ç©ºé—´çš„æœ€å16ä¸ªå­—èŠ‚ã€‚è¯¥å­˜å‚¨å™¨åœ°å€ç§°ä¸ºå¤ä½å‘é‡ã€‚ ç°åœ¨ï¼ŒèŠ¯ç‰‡ç»„çš„å†…å­˜æ˜ å°„ç¡®ä¿0xFFFFFFF0æ˜ å°„åˆ°BIOSçš„æŸä¸ªéƒ¨åˆ†ï¼Œè€Œä¸æ˜¯RAMã€‚åŒæ—¶ï¼ŒBIOSå°†è‡ªèº«å¤åˆ¶åˆ°RAMä»¥ä¾¿æ›´å¿«åœ°è®¿é—®ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºshadowingã€‚åœ°å€0xFFFFFFF0åªåŒ…å«ä¸€æ¡è·³è½¬æŒ‡ä»¤ï¼ŒæŒ‡å‘BIOSå¤åˆ¶è‡ªèº«çš„å†…å­˜ä¸­çš„åœ°å€ã€‚ åˆ°è¿™é‡Œï¼ŒBIOSä»£ç å¼€å§‹æ‰§è¡Œã€‚BIOSé¦–å…ˆæŒ‰é…ç½®çš„å¼•å¯¼è®¾å¤‡é¡ºåºæœç´¢å¯å¼•å¯¼è®¾å¤‡ã€‚å®ƒä¼šæ£€æŸ¥æŸä¸ªå¹»æ•°ä»¥ç¡®å®šè®¾å¤‡æ˜¯å¦å¯å¼•å¯¼ï¼ˆç¬¬ä¸€æ‰‡åŒºçš„å­—èŠ‚ 511 å’Œ 512 æ˜¯å¦ä¸º0xAA55ï¼‰ã€‚ ä¸€æ—¦BIOSæ‰¾åˆ°å¯å¼•å¯¼è®¾å¤‡ï¼Œå®ƒå°±ä¼šä»ç‰©ç†åœ°å€0x7c00å¼€å§‹å°†è®¾å¤‡ç¬¬ä¸€ä¸ªæ‰‡åŒºçš„å†…å®¹å¤åˆ¶åˆ°RAMä¸­ï¼Œç„¶åè·³è½¬åˆ°åœ°å€å¹¶æ‰§è¡ŒåˆšåˆšåŠ è½½çš„ä»£ç ï¼Œæ­¤ä»£ç ç§°ä¸ºå¼•å¯¼åŠ è½½ç¨‹åºã€‚ ç„¶åï¼Œå¼•å¯¼åŠ è½½ç¨‹åºå°†å†…æ ¸åŠ è½½åˆ°ç‰©ç†åœ°å€0x100000ã€‚åœ°å€0x100000ç”¨ä½œx86è®¡ç®—æœºä¸Šæ‰€æœ‰å¤§å†…æ ¸çš„èµ·å§‹åœ°å€ã€‚ æ‰€æœ‰x86å¤„ç†å™¨éƒ½ä»¥ç®€å•çš„16ä½æ¨¡å¼å¼€å§‹ï¼Œç§°ä¸ºå®æ¨¡å¼ã€‚GRUBå¼•å¯¼åŠ è½½ç¨‹åºé€šè¿‡å°†CR0å¯„å­˜å™¨çš„æœ€ä½ä½è®¾ç½®ä¸º1æ¥åˆ‡æ¢åˆ°32ä½ä¿æŠ¤æ¨¡å¼ï¼Œå› æ­¤ï¼Œå†…æ ¸ä»¥32ä½ä¿æŠ¤æ¨¡å¼åŠ è½½ã€‚ è¯·æ³¨æ„ï¼Œåœ¨Linuxå†…æ ¸çš„æƒ…å†µä¸‹ï¼ŒGRUBä¼šæ£€æµ‹Linuxå¯åŠ¨åè®®å¹¶ä»¥å®æ¨¡å¼åŠ è½½Linuxå†…æ ¸ã€‚Linuxå†…æ ¸æœ¬èº«å¯ä»¥åˆ‡æ¢åˆ°ä¿æŠ¤æ¨¡å¼ã€‚ æˆ‘ä»¬éœ€è¦ä»€ä¹ˆ ä¸€å° x86 ç”µè„‘ Linux NASM æ±‡ç¼–ç¨‹åº gcc ldï¼ˆGNU é“¾æ¥å™¨ï¼‰ grub æºä»£ç  æºä»£ç å¯ä»¥åœ¨ Github å­˜å‚¨åº“ä¸­æ‰¾åˆ°mkernel ä½¿ç”¨ç¨‹åºé›†çš„å…¥å£ç‚¹ æˆ‘ä»¬å–œæ¬¢ç”¨ C è¯­è¨€ç¼–å†™æ‰€æœ‰å†…å®¹ï¼Œä½†æˆ‘ä»¬æ— æ³•é¿å…ä¸€äº›ç»„è£…ã€‚æˆ‘ä»¬å°†ç”¨x86æ±‡ç¼–è¯­è¨€ç¼–å†™ä¸€ä¸ªå°æ–‡ä»¶ï¼Œä»¥æ­¤æ¥ä½œä¸ºæˆ‘ä»¬å†…æ ¸çš„èµ·ç‚¹ã€‚æˆ‘ä»¬æ‰€æœ‰çš„æ±‡ç¼–æ–‡ä»¶éƒ½ä¼šè°ƒç”¨ä¸€ä¸ªå¤–éƒ¨å‡½æ•°ï¼Œæˆ‘ä»¬å°†ç”¨ C ç¼–å†™ï¼Œç„¶åæš‚åœç¨‹åºæµç¨‹ã€‚ æˆ‘ä»¬å¦‚ä½•ç¡®ä¿æ­¤æ±‡ç¼–ä»£ç å°†ä½œä¸ºå†…æ ¸çš„èµ·ç‚¹å‘¢ï¼Ÿ æˆ‘ä»¬å°†ä½¿ç”¨é“¾æ¥è„šæœ¬æ¥é“¾æ¥ç›®æ ‡æ–‡ä»¶ä»¥ç”Ÿæˆæœ€ç»ˆçš„å†…æ ¸å¯æ‰§è¡Œæ–‡ä»¶ï¼ˆç¨åå°†è¯¦ç»†è§£é‡Šï¼‰ã€‚åœ¨æ­¤é“¾æ¥æè¿°æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å°†æ˜ç¡®æŒ‡å®šæˆ‘ä»¬å¸Œæœ›å°†äºŒè¿›åˆ¶æ–‡ä»¶åŠ è½½åˆ°åœ°å€0x100000ã€‚æ­£å¦‚æˆ‘ä¹‹å‰æ‰€è¯´ï¼Œè¿™ä¸ªåœ°å€æ˜¯å†…æ ¸çš„é¢„æœŸã€‚å› æ­¤ï¼Œå¼•å¯¼åŠ è½½ç¨‹åºå°†è´Ÿè´£è§¦å‘å†…æ ¸çš„å…¥å£ç‚¹ã€‚ è¿™æ˜¯æ±‡ç¼–ä»£ç ï¼š 12345678910111213141516171819202122232425;;kernel.asmbits 32 ;nasm directive - 32 bitsection .textglobal startextern kmain ;kmain is defined in the c filestart: cli ;block interrupts mov esp, stack_space ;set stack pointer call kmain hlt ;halt the CPUsection .bssresb 8192 ;8KB for stackstack_space: ç¬¬ä¸€æ¡æŒ‡ä»¤bits 32ä¸æ˜¯x86æ±‡ç¼–æŒ‡ä»¤ï¼Œå®ƒæ˜¯NASMæ±‡ç¼–ç¨‹åºçš„ä¸€ä¸ªæŒ‡ä»¤ï¼Œå®ƒæŒ‡å®šå®ƒåº”è¯¥ç”Ÿæˆä»£ç ï¼Œä»¥åœ¨32ä½æ¨¡å¼ä¸‹è¿è¡Œçš„å¤„ç†å™¨ä¸Šè¿è¡Œã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œå®ƒå¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„ï¼Œä½†æ˜¯è¿™é‡ŒåŒ…å«äº†å®ƒï¼Œå› ä¸ºå®ƒç¡®å®æ˜¯ä¸€ä¸ªè‰¯å¥½å®è·µã€‚ ç¬¬äºŒè¡Œå¼€å§‹æ–‡æœ¬éƒ¨åˆ†ï¼ˆåˆåä»£ç éƒ¨åˆ†ï¼‰ï¼Œè¿™æ˜¯æˆ‘ä»¬æ”¾ç½®æ‰€æœ‰ä»£ç çš„åœ°æ–¹ã€‚ globalæ˜¯å¦ä¸€ä¸ªå°†æºä»£ç ä¸­çš„ç¬¦å·è®¾ç½®ä¸ºå…¨å±€çš„NASMæŒ‡ä»¤ï¼Œé€šè¿‡è¿™æ ·åšï¼Œé“¾æ¥å™¨çŸ¥é“ç¬¦å·çš„startä½ç½®ï¼Œè¿™æ°å¥½æ˜¯æˆ‘ä»¬çš„åˆ‡å…¥ç‚¹ã€‚ kmainæ˜¯æˆ‘ä»¬çš„å‡½æ•°ï¼Œå°†åœ¨æˆ‘ä»¬çš„kernel.cæ–‡ä»¶ä¸­å®šä¹‰ã€‚externå£°æ˜è¯¥å‡½æ•°åœ¨å…¶ä»–åœ°æ–¹å£°æ˜ã€‚ ç„¶åï¼Œæˆ‘ä»¬æœ‰äº†startå‡½æ•°ï¼Œå®ƒè°ƒç”¨kmainå‡½æ•°å¹¶ä½¿ç”¨hltæŒ‡ä»¤æš‚åœCPUã€‚ä¸­æ–­å¯ä»¥ä»hltæŒ‡ä»¤ä¸­å”¤é†’CPUï¼Œæ‰€ä»¥æˆ‘ä»¬äº‹å…ˆä½¿ç”¨cliæŒ‡ä»¤ç¦ç”¨ä¸­æ–­ã€‚cliæ˜¯æ˜æ˜¾ä¸­æ–­çš„ç¼©å†™ã€‚ ç†æƒ³æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åº”è¯¥ä¸ºå †æ ˆç•™å‡ºä¸€äº›å†…å­˜å¹¶å°†å †æ ˆæŒ‡é’ˆï¼ˆespï¼‰æŒ‡å‘å®ƒã€‚ä½†æ˜¯ï¼Œä¼¼ä¹GRUBè¿™æ ·åšå°±å·²ç»è®¾ç½®äº†å †æ ˆæŒ‡é’ˆã€‚ä½†æ˜¯ï¼Œä¸ºäº†ä»¥é˜²ä¸‡ä¸€ï¼Œæˆ‘ä»¬å°†åœ¨BSSéƒ¨åˆ†ä¸­åˆ†é…ä¸€äº›ç©ºé—´ï¼Œå¹¶å°†å †æ ˆæŒ‡é’ˆæŒ‡å‘åˆ†é…çš„å†…å­˜çš„å¼€å¤´ã€‚æˆ‘ä»¬ä½¿ç”¨resbä»¥å­—èŠ‚ä¸ºå•ä½ä¿ç•™å†…å­˜çš„æŒ‡ä»¤ï¼Œåœ¨å®ƒä¹‹åï¼Œç•™ä¸‹ä¸€ä¸ªæ ‡ç­¾ï¼ŒæŒ‡å‘ä¿ç•™çš„å†…å­˜å—çš„è¾¹ç¼˜ã€‚åœ¨kmainè°ƒç”¨ä¹‹å‰ï¼Œå †æ ˆæŒ‡é’ˆï¼ˆespï¼‰ä½¿ç”¨movæŒ‡ä»¤ä½¿æŒ‡å‘è¯¥ç©ºé—´ã€‚ C ä¸­çš„å†…æ ¸ åœ¨kernel.asmï¼Œæˆ‘ä»¬è°ƒç”¨äº†è¯¥å‡½æ•°kmain()ã€‚æ‰€ä»¥æˆ‘ä»¬çš„Cä»£ç å°†å¼€å§‹æ‰§è¡Œkmain()ï¼š 1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253/* * kernel.c */void kmain(void) &#123; const char *str = &quot;my first kernel&quot;; char *vidptr = (char*)0xb8000; //video mem begins here. unsigned int i = 0; unsigned int j = 0; /* this loops clears the screen * there are 25 lines each of 80 columns; each element takes 2 bytes */ while(j &lt; 80 * 25 * 2) &#123; /* blank character */ vidptr[j] = &#x27; &#x27;; /* attribute-byte - light grey on black screen */ vidptr[j+1] = 0x07; j = j + 2; &#125; j = 0; /* this loop writes the string to video memory */ while(str[j] != &#x27;\\0&#x27;) &#123; /* the character&#x27;s ascii */ vidptr[i] = str[j]; /* attribute-byte: give character black bg and light grey fg */ vidptr[i+1] = 0x07; ++j; i = i + 2; &#125; return;&#125; æˆ‘ä»¬æ‰€æœ‰çš„å†…æ ¸éƒ½ä¼šæ¸…é™¤å±å¹•å¹¶å†™å…¥å­—ç¬¦ä¸²â€œæˆ‘çš„ç¬¬ä¸€ä¸ªå†…æ ¸â€ã€‚ é¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæŒ‡å‘vidptråœ°å€0xb8000çš„æŒ‡é’ˆï¼Œè¯¥åœ°å€æ˜¯å—ä¿æŠ¤æ¨¡å¼ä¸‹çš„è§†é¢‘å†…å­˜çš„å¼€å§‹ã€‚å±å¹•çš„æ–‡æœ¬å†…å­˜åªæ˜¯æˆ‘ä»¬åœ°å€ç©ºé—´ä¸­çš„ä¸€å—å†…å­˜ï¼Œå±å¹•çš„å†…å­˜æ˜ å°„è¾“å…¥/è¾“å‡ºä»0xb8000å¼€å§‹ï¼Œæ”¯æŒ25è¡Œï¼Œæ¯è¡ŒåŒ…å«80ä¸ªASCIIå­—ç¬¦ã€‚ è¯¥æ–‡æœ¬å­˜å‚¨å™¨ä¸­çš„æ¯ä¸ªå­—ç¬¦å…ƒç´ ç”±16ä½ï¼ˆ2å­—èŠ‚ï¼‰è¡¨ç¤ºï¼Œè€Œä¸æ˜¯æˆ‘ä»¬ä¹ æƒ¯çš„8ä½ï¼ˆ1å­—èŠ‚ï¼‰ã€‚ç¬¬ä¸€ä¸ªå­—èŠ‚åº”è¯¥å…·æœ‰ASCIIä¸­çš„å­—ç¬¦è¡¨ç¤ºï¼Œç¬¬äºŒä¸ªå­—èŠ‚æ˜¯attribute-byteã€‚è¿™æè¿°äº†å…¶ç‰¹å¾å±æ€§ï¼Œæ¯”å¦‚è¯´é¢œè‰²ã€‚ å¦‚æœè¦såœ¨é»‘è‰²èƒŒæ™¯ä¸Šæ‰“å°ç»¿è‰²å­—ç¬¦ï¼Œæˆ‘ä»¬åªéœ€è¦å°†å­—ç¬¦så­˜å‚¨åœ¨è§†é¢‘å­˜å‚¨å™¨åœ°å€çš„ç¬¬ä¸€ä¸ªå­—èŠ‚ä¸­ï¼Œå°†å€¼0x02å­˜å‚¨åœ¨ç¬¬äºŒä¸ªå­—èŠ‚ä¸­å³å¯ã€‚0ä»£è¡¨é»‘è‰²èƒŒæ™¯ï¼Œ2ä»£è¡¨ç»¿è‰²å‰æ™¯ã€‚ è¯·æŸ¥çœ‹ä¸‹è¡¨ä¸­çš„ä¸åŒé¢œè‰²ï¼š 123456789101112131415160 - Black,1 - Blue,2 - Green,3 - Cyan,4 - Red,5 - Magenta,6 - Brown,7 - Light Grey,8 - Dark Grey,9 - Light Blue,10/a - Light Green,11/b - Light Cyan,12/c - Light Red,13/d - Light Magenta,14/e - Light Brown,15/f â€“ White. åœ¨æˆ‘ä»¬çš„å†…æ ¸ä¸­ï¼Œæˆ‘ä»¬å°†åœ¨é»‘è‰²èƒŒæ™¯ä¸Šä½¿ç”¨æµ…ç°è‰²å­—ç¬¦ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å±æ€§å­—èŠ‚å¿…é¡»å…·æœ‰å€¼0x07ã€‚ åœ¨ç¬¬ä¸€ä¸ªwhileå¾ªç¯ä¸­ï¼Œç¨‹åºåœ¨ 25 è¡Œçš„ 80 åˆ—ä¸­å†™å…¥å…·æœ‰0x07å±æ€§çš„ç©ºç™½å­—ç¬¦ï¼Œè¿™æ ·å°±å¯ä»¥æ¸…é™¤å±å¹•ã€‚ åœ¨ç¬¬äºŒä¸ªwhileå¾ªç¯ä¸­ï¼Œç©ºç»ˆæ­¢å­—ç¬¦ä¸²â€œmy first kernelâ€çš„å­—ç¬¦è¢«å†™å…¥è§†é¢‘å†…å­˜å—ï¼Œæ¯ä¸ªå­—ç¬¦ä¿å­˜ä¸€ä¸ª0x07çš„å±æ€§å­—èŠ‚ã€‚ è¿™å°†ä¼šåœ¨å±å¹•ä¸Šæ˜¾ç¤ºå­—ç¬¦ä¸²ã€‚ é“¾æ¥éƒ¨åˆ† æˆ‘ä»¬å°†kernel.asmä¸NASMç»„è£…æˆä¸€ä¸ªç›®æ ‡æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨GCCï¼Œå°†kernel.cç¼–è¯‘æˆå¦ä¸€ä¸ªç›®æ ‡æ–‡ä»¶ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬çš„å·¥ä½œæ˜¯å°†è¿™äº›å¯¹è±¡é“¾æ¥åˆ°å¯æ‰§è¡Œçš„å¯å¼•å¯¼å†…æ ¸ã€‚ ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨æ˜¾å¼é“¾æ¥è„šæœ¬ï¼Œå®ƒå¯ä»¥ä½œä¸ºå‚æ•°ä¼ é€’ç»™ldï¼ˆæˆ‘ä»¬çš„é“¾æ¥å™¨ï¼‰ã€‚ 123456789101112131415161718192021/* * link.ld */OUTPUT_FORMAT(elf32-i386)ENTRY(start)SECTIONS &#123; . = 0x100000; .text : &#123; *(.text) &#125; .data : &#123; *(.data) &#125; .bss : &#123; *(.bss) &#125;&#125; é¦–å…ˆï¼Œæˆ‘ä»¬å°†è¾“å‡ºå¯æ‰§è¡Œæ–‡ä»¶çš„è¾“å‡ºæ ¼å¼è®¾ç½®ä¸º32ä½å¯æ‰§è¡Œæ–‡ä»¶å’Œå¯é“¾æ¥æ ¼å¼ï¼ˆELFï¼‰ã€‚ELF æ˜¯x86æ¶æ„ä¸Šç±»Unixç³»ç»Ÿçš„æ ‡å‡†äºŒè¿›åˆ¶æ–‡ä»¶æ ¼å¼ã€‚ ENTRYæœ‰ä¸€ä¸ªè®ºç‚¹ï¼Œå®ƒæŒ‡å®šåº”è¯¥æ˜¯æˆ‘ä»¬çš„å¯æ‰§è¡Œæ–‡ä»¶çš„å…¥å£ç‚¹çš„ç¬¦å·åç§°ã€‚ SECTIONSæ˜¯æˆ‘ä»¬æœ€é‡è¦çš„éƒ¨åˆ†ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬å®šä¹‰å¯æ‰§è¡Œæ–‡ä»¶çš„å¸ƒå±€ã€‚æˆ‘ä»¬å¯ä»¥æŒ‡å®šå¦‚ä½•åˆå¹¶ä¸åŒçš„éƒ¨åˆ†ä»¥åŠæ¯ä¸ªéƒ¨åˆ†çš„æ”¾ç½®ä½ç½®ã€‚ åœ¨SECTIONSè¯­å¥åé¢çš„å¤§æ‹¬å·å†…ï¼Œå¥ç‚¹å­—ç¬¦ï¼ˆ.ï¼‰è¡¨ç¤ºä½ç½®è®¡æ•°å™¨ã€‚ åœ¨SECTIONSå—çš„å¼€å¤´ï¼Œä½ç½®è®¡æ•°å™¨å§‹ç»ˆåˆå§‹åŒ–ä¸º0x0ï¼Œè¿™å¯ä»¥é€šè¿‡ä¸ºå…¶åˆ†é…æ–°å€¼æ¥ä¿®æ”¹å®ƒã€‚ è®°ä½å‰æ–‡ä¸­è¯´è¿‡çš„ï¼Œå†…æ ¸çš„ä»£ç åº”è¯¥ä»åœ°å€0x100000å¼€å§‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†ä½ç½®è®¡æ•°å™¨è®¾ç½®ä¸º0x100000ã€‚ çœ‹çœ‹ä¸‹ä¸€è¡Œ.textï¼š&#123;*ï¼ˆ.textï¼‰&#125; æ˜Ÿå·ï¼ˆ*ï¼‰æ˜¯ä¸€ä¸ªåŒ¹é…ä»»ä½•æ–‡ä»¶åçš„é€šé…ç¬¦ï¼Œå› æ­¤ï¼Œè¡¨è¾¾å¼*(.text)è¡¨ç¤º.textæ¥è‡ªæ‰€æœ‰è¾“å…¥æ–‡ä»¶çš„æ‰€æœ‰è¾“å…¥èŠ‚ã€‚ å› æ­¤ï¼Œé“¾æ¥å™¨å°†ç›®æ ‡æ–‡ä»¶çš„æ‰€æœ‰æ–‡æœ¬éƒ¨åˆ†ï¼Œåˆå¹¶åˆ°ä½ç½®è®¡æ•°å™¨ä¸­å­˜å‚¨åœ°å€çš„å¯æ‰§è¡Œæ–‡ä»¶éƒ¨åˆ†ï¼Œæ‰€ä»¥æˆ‘ä»¬çš„å¯æ‰§è¡Œæ–‡ä»¶çš„ä»£ç éƒ¨åˆ†ä»0x100000å¼€å§‹ã€‚ é“¾æ¥å™¨æ”¾ç½®æ–‡æœ¬è¾“å‡ºèŠ‚ä¹‹åï¼Œä½ç½®è®¡æ•°å™¨çš„å€¼å°†å˜ä¸º0x1000000 +æ–‡æœ¬è¾“å‡ºèŠ‚çš„å¤§å°ã€‚ ç±»ä¼¼çš„ï¼Œæ•°æ®å’Œbsséƒ¨åˆ†è¢«åˆå¹¶å¹¶æ”¾ç½®åœ¨location-counterçš„thenå€¼å¤„ã€‚ Grub å’Œ Multiboot ç°åœ¨ï¼Œæˆ‘ä»¬å‡†å¤‡å¥½æ„å»ºå†…æ ¸çš„æ‰€æœ‰æ–‡ä»¶ã€‚ä½†æ˜¯ï¼Œæ—¢ç„¶æˆ‘ä»¬æƒ³ç”¨GRUBå¼•å¯¼ç¨‹åºå¼•å¯¼æˆ‘ä»¬çš„å†…æ ¸ï¼Œé‚£ä¹ˆè¿˜æœ‰ä¸€æ­¥ã€‚ æœ‰ä¸€ä¸ªä½¿ç”¨å¼•å¯¼åŠ è½½ç¨‹åºåŠ è½½å„ç§x86å†…æ ¸çš„æ ‡å‡†ï¼Œç§°ä¸ºMultiboot specï¼ˆå¤šé‡å¼•å¯¼è§„èŒƒï¼‰ã€‚ å¦‚æœGRUBç¬¦åˆMultibootè§„èŒƒï¼Œå®ƒå°†åªåŠ è½½æˆ‘ä»¬çš„å†…æ ¸ã€‚ æ ¹æ®è§„èŒƒï¼Œå†…æ ¸å¿…é¡»åœ¨å…¶å‰8ä¸ªåƒå­—èŠ‚å†…åŒ…å«ä¸€ä¸ªå¤´ï¼Œç§°ä¸ºMultiboot headerï¼ˆå¤šå¼•å¯¼å¤´ï¼‰ã€‚ æ­¤å¤–ï¼Œæ­¤Multibootæ ‡å¤´å¿…é¡»åŒ…å«3ä¸ªå­—èŠ‚ï¼Œå³ 4 å­—èŠ‚å¯¹é½ï¼Œå³ï¼š ä¸€ä¸ªé­”æœ¯å­—æ®µï¼ˆmagic fieldï¼‰ï¼šåŒ…å«å¹»æ•°0x1BADB002ï¼Œä»¥è¯†åˆ«å¤´éƒ¨ã€‚ ä¸€ä¸ªæ ‡å¿—å­—æ®µï¼ˆflags fieldï¼‰ï¼šæˆ‘ä»¬ä¸å…³å¿ƒè¿™ä¸ªå­—æ®µï¼Œåªéœ€å°†å…¶è®¾ç½®ä¸ºé›¶ã€‚ ä¸€ä¸ªæ ¡éªŒå­—æ®µï¼ˆchecksum fieldï¼‰ï¼šæ·»åŠ â€œmagicâ€å’Œâ€œflagsâ€çš„æ ¡éªŒå­—æ®µå¿…é¡»ä¸ºé›¶ã€‚ æ‰€ä»¥æˆ‘ä»¬çš„kernel.asmå°±ä¼šå˜æˆï¼š 12345678910111213141516171819202122232425262728293031323334353637;;kernel.asm;nasm directive - 32 bitbits 32section .text ;multiboot spec align 4 dd 0x1BADB002 ;magic dd 0x00 ;flags dd - (0x1BADB002 + 0x00) ;checksum. m+f+c should be zeroglobal startextern kmain ;kmain is defined in the c filestart: cli ;block interrupts mov esp, stack_space ;set stack pointer call kmain hlt ;halt the CPUsection .bssresb 8192 ;8KB for stackstack_space: DDå®šä¹‰å¤§å°ä¸º 4 ä¸ªå­—èŠ‚çš„åŒå­—ã€‚ æ„å»ºå†…æ ¸ ç°åœ¨ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä»ç›®æ ‡æ–‡ä»¶kernel.asmå’Œkernel.cï¼Œç„¶åä½¿ç”¨æˆ‘ä»¬çš„é“¾æ¥è„šæœ¬é“¾æ¥ã€‚ 1nasm -f elf32 kernel.asm -o kasm.o å°†è¿è¡Œæ±‡ç¼–ç¨‹åºä»¥ELF-32ä½æ ¼å¼åˆ›å»ºç›®æ ‡æ–‡ä»¶kasm.oã€‚ 1gcc -m32 -c kernel.c -o kc.o '-c'é€‰é¡¹ç¡®ä¿åœ¨ç¼–è¯‘ä¹‹åï¼Œé“¾æ¥ä¸ä¼šéšå¼å‘ç”Ÿã€‚ 1ld -m elf_i386 -T link.ld -o kernel kasm.o kc.o å°†ä½¿ç”¨æˆ‘ä»¬çš„é“¾æ¥æè¿°æ–‡ä»¶è¿è¡Œé“¾æ¥å™¨å¹¶ç”Ÿæˆåä¸ºkernelçš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ é…ç½®ä½ çš„ grub å¹¶è¿è¡Œä½ çš„å†…æ ¸ GRUBè¦æ±‚æ‚¨çš„å†…æ ¸å…·æœ‰åç§°æ¨¡å¼kernel-&lt;version&gt;ï¼Œæ‰€ä»¥ï¼Œæˆ‘ä»¬éœ€è¦é‡å‘½åå†…æ ¸ã€‚æˆ‘å°†å†…æ ¸å¯æ‰§è¡Œæ–‡ä»¶é‡å‘½åä¸ºkernel-701ã€‚ ç°åœ¨å°†å®ƒæ”¾åœ¨/ bootç›®å½•ä¸­ã€‚ï¼ˆéœ€è¦è¶…çº§ç”¨æˆ·æƒé™æ‰èƒ½æ‰§è¡Œæ­¤æ“ä½œã€‚ï¼‰ åœ¨GRUBé…ç½®æ–‡ä»¶ä¸­ï¼Œgrub.cfgåº”è¯¥æ·»åŠ ä¸€ä¸ªæ¡ç›®ï¼Œä¾‹å¦‚ï¼š 1title myKernelroot (hd0,0)kernel /boot/kernel-701 ro ä¸è¦å¿˜è®°åˆ é™¤æŒ‡ä»¤hiddenmenuï¼ˆå¦‚æœå­˜åœ¨çš„è¯ï¼‰ã€‚ é‡æ–°å¯åŠ¨è®¡ç®—æœºï¼Œä½ å°†è·å¾—åˆ—å‡ºå†…æ ¸åç§°çš„åˆ—è¡¨é€‰æ‹©ã€‚ é‚£å°±æ˜¯ä½ çš„å†…æ ¸!! PS å§‹ç»ˆå»ºè®®ç»™è‡ªå·±è®¾ç½®ä¸€ä¸ªè™šæ‹Ÿæœºï¼Œç”¨äºå„ç§å†…æ ¸é»‘å®¢æ”»å‡»ã€‚ è¦åœ¨grub2 ä¸Šè¿è¡Œå®ƒï¼Œè¿™æ˜¯æ–°å‘è¡Œç‰ˆçš„é»˜è®¤å¼•å¯¼åŠ è½½ç¨‹åºï¼Œä½ çš„é…ç½®åº”å¦‚ä¸‹æ‰€ç¤ºï¼š 1menuentry &#x27;kernel 701&#x27; &#123;set root=&#x27;hd0,msdos1&#x27;multiboot /boot/kernel-701 ro&#125; æ­¤å¤–ï¼Œå¦‚æœæ‚¨æƒ³åœ¨ qemu æ¨¡æ‹Ÿå™¨ä¸Šè¿è¡Œå†…æ ¸è€Œä¸æ˜¯ä½¿ç”¨ GRUB å¯åŠ¨å†…æ ¸ï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼æ‰§è¡Œæ­¤æ“ä½œï¼š 1qemu-system-i386 -kernel kernel å‚è€ƒå’Œæ„Ÿè°¢ arjun024 çš„æºç åŠæ€è·¯ wiki.osdev.org osdever.net Multiboot spec","categories":[{"name":"notes","slug":"notes","permalink":"http://debug.cool/categories/notes/"}],"tags":[]},{"title":"Macç”Ÿäº§åŠ›å·¥å…·","slug":"tipsMac","date":"2018-03-30T16:00:00.000Z","updated":"2021-05-07T07:30:39.980Z","comments":true,"path":"2018/03/31/tipsMac/","link":"","permalink":"http://debug.cool/2018/03/31/tipsMac/","excerpt":"Mac æœºå†™ä»£ç é™¤äº†é€¼æ ¼é«˜ä¸€ç‚¹ï¼Œç”Ÿäº§åŠ›æ˜¯çœŸçš„æ˜¾è‘—æé«˜ï½ ä»¥ä¸‹ç®€å•ä»‹ç»ä¸€äº›åœ¨ Mac ä¸Šæé«˜ç”Ÿäº§åŠ›çš„å°æŠ€å·§ã€‚","text":"Mac æœºå†™ä»£ç é™¤äº†é€¼æ ¼é«˜ä¸€ç‚¹ï¼Œç”Ÿäº§åŠ›æ˜¯çœŸçš„æ˜¾è‘—æé«˜ï½ ä»¥ä¸‹ç®€å•ä»‹ç»ä¸€äº›åœ¨ Mac ä¸Šæé«˜ç”Ÿäº§åŠ›çš„å°æŠ€å·§ã€‚ ä»¥ PHP å¼€å‘ç¯å¢ƒä¸ºä¾‹ï¼Œå¹²å‡€çš„ Mac ç³»ç»Ÿï¼ˆé‡è£…ç³»ç»Ÿåæœªä½œä»»ä½•é…ç½®ï¼‰ å®‰è£…å‘½ä»¤è¡Œç»ˆç«¯ è¿™é‡Œæˆ‘ä»¬é€‰æ‹©iTerm2ï¼ŒiTerm2åŠŸèƒ½å¼ºå¤§ï¼Œå¯ä»¥æ›¿ä»£ç³»ç»Ÿé»˜è®¤çš„å‘½ä»¤è¡Œç»ˆç«¯ã€‚ä¸‹è½½è§£å‹åï¼Œå°†iTerm2ç›´æ¥æ‹–å…¥&quot;åº”ç”¨ç¨‹åº&quot;ç›®å½•ã€‚ å®‰è£… Xcode Xcodeæ˜¯è‹¹æœå‡ºå“çš„åŒ…å«ä¸€ç³»åˆ—å·¥å…·åŠåº“çš„å¼€å‘å¥—ä»¶ã€‚ é€šè¿‡ App Store å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„ Xcodeã€‚æˆ‘ä»¬ä¸€èˆ¬ä¸ä¼šç”¨ Xcode æ¥å¼€å‘ PHP é¡¹ç›®ã€‚ä½†è¿™ä¸€æ­¥ä¹Ÿæ˜¯å¿…éœ€çš„ï¼Œå› ä¸º Xcode ä¼šå¸®ä½ é™„å¸¦å®‰è£…ä¸€äº›å¦‚ Git ç­‰å¿…è¦çš„è½¯ä»¶ã€‚å½“ç„¶ä½ ä¹Ÿå¯ä»¥é€šè¿‡æºç åŒ…å®‰è£… Gitã€‚ å®‰è£… Xcode Command Line Tools è¿™ä¸€æ­¥ä¼šå¸®ä½ å®‰è£…è®¸å¤šå¸¸è§çš„åŸºäº Unix çš„å·¥å…·ã€‚Xcode å‘½ä»¤è¡Œå·¥å…·ä½œä¸º Xcode çš„ä¸€éƒ¨åˆ†ï¼ŒåŒ…å«äº† GCC ç¼–è¯‘å™¨ã€‚åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…ï¼š 1xcode-select --install å®‰è£…åŒ…ç®¡ç†å™¨ Homebrew ä½œä¸º macOS ä¸å¯æˆ–ç¼ºçš„å¥—ä»¶ç®¡ç†å™¨ï¼Œç”¨æ¥å®‰è£…ã€å‡çº§ä»¥åŠå¸è½½å¸¸ç”¨çš„è½¯ä»¶ã€‚åœ¨å‘½ä»¤è¡Œä¸­æ‰§è¡Œä»¥ä¸‹å‘½ä»¤å³å¯å®‰è£…ï¼š 1/usr/bin/ruby -e &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)&quot; å®‰è£…åå¯ä»¥ä¿®æ”¹ Homebrew æºï¼Œå›½å¤–æºä¸€ç›´ä¸æ˜¯å¾ˆç»™åŠ›ï¼Œè¿™é‡Œæˆ‘ä»¬å°† Homebrew çš„ git è¿œç¨‹ä»“åº“æ”¹ä¸ºä¸­å›½ç§‘å­¦æŠ€æœ¯å¤§å­¦å¼€æºè½¯ä»¶é•œåƒï¼š 12cd &quot;$(brew --repo)&quot;git remote set-url origin git://mirrors.ustc.edu.cn/brew.git å®‰è£… HTTP æœåŠ¡å™¨ è¿™é‡Œæˆ‘ä»¬é€‰æ‹© nginx ä»£æ›¿ç³»ç»Ÿè‡ªå¸¦çš„ Apacheï¼Œä½œä¸ºæˆ‘ä»¬çš„ HTTP æœåŠ¡å™¨ï¼š 1brew install nginx å®‰è£…å®Œæˆåï¼Œnginx çš„ä¸€äº›å¸¸ç”¨å‘½ä»¤ï¼š 123sudo nginx # å¯åŠ¨ nginx æœåŠ¡nginx -h # nginx å¸®åŠ©ä¿¡æ¯sudo nginx -s stop|quit|reopen|reload # åœæ­¢|é€€å‡º|é‡å¯|é‡è½½ nginx æœåŠ¡ å®‰è£…æ•°æ®åº“ è¿™é‡Œæˆ‘ä»¬é€‰æ‹© MySQL ä½œä¸ºæˆ‘ä»¬çš„æ•°æ®åº“æœåŠ¡å™¨ï¼š 1brew install mysql å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥é€‰æ‹©å®‰è£… PostgreSQL æˆ–è€… MariaDBã€‚ å®‰è£…å®Œæˆåï¼Œå¯åŠ¨ MySQLï¼š 1mysqld å¦‚æœä¸æ‰§è¡Œä¸Šè¿°æ“ä½œï¼Œç›´æ¥é€šè¿‡å‘½ä»¤è¡Œè¿›å…¥ MySQLï¼Œä¸€èˆ¬ä¼šæŠ¥ä¸€ä¸ªè¿™æ ·çš„é”™è¯¯ã€‚ ERROR 2002 (HY000): Canâ€™t connect to local MySQL server through socket â€˜/tmp/mysql.sockâ€™ è¿›å…¥ MySQL æœåŠ¡å™¨ 1mysql -u root -p å¼€å¯ PHP-FPM nginx æœ¬èº«ä¸èƒ½å¤„ç† PHPï¼Œå®ƒåªæ˜¯ä¸ª HTTP æœåŠ¡å™¨ï¼Œå½“æ¥æ”¶ä¸€ä¸ª PHP è¯·æ±‚åï¼Œnginx ä¼šå°†å…¶äº¤ç”± PHP è§£é‡Šå™¨å¤„ç†ï¼Œå¹¶æŠŠç»“æœè¿”å›ç»™å®¢æˆ·ç«¯ã€‚nginx ä¸€èˆ¬æ˜¯æŠŠè¯·æ±‚å‘ FastCGI ç®¡ç†è¿›ç¨‹å¤„ç†ï¼ŒFastCGI ç®¡ç†è¿›ç¨‹é€‰æ‹© CGI å­è¿›ç¨‹å¤„ç†ç»“æœå¹¶è¿”å›è¢« nginxã€‚ PHP-FPMæ˜¯ä¸€ä¸ª PHP FastCGI ç®¡ç†å™¨ï¼Œä¸€å¼€å§‹åªæ˜¯ PHP æºä»£ç çš„ä¸€ä¸ªè¡¥ä¸ï¼Œæ—¨åœ¨å°† FastCGI è¿›ç¨‹ç®¡ç†æ•´åˆè¿› PHPåŒ…ä¸­ã€‚å¿…é¡»å°†å®ƒ patch åˆ° PHP æºä»£ç ä¸­ï¼Œåœ¨ç¼–è¯‘å®‰è£… PHPåæ‰å¯ä»¥ä½¿ç”¨ã€‚PHP ä»ç‰ˆæœ¬ 5.3 å¼€å§‹å®˜æ–¹é›†æˆPHP-FPMã€‚ æ·»åŠ  PHP-FPM çš„é…ç½®æ–‡ä»¶ 12cp /private/etc/php-fpm.conf.default /private/etc/php-fpm.confphp-fpm --fpm-config /private/etc/php-fpm.conf ä¿®æ”¹ PHP-FPM çš„ error_log è·¯å¾„ 12vi /var/log/php-fpm.log # æ–°å»ºæ–‡ä»¶vi /private/etc/php-fpm.conf # å°† error_log=log/php-fpm.log ä¿®æ”¹ä¸ºï¼šerror_log = /var/log/php-fpm.logï¼Œä¿å­˜ å¯åŠ¨ PHP-FPM 1sudo php-fpm å…³é—­ PHP-FPM 12ps aux|grep php-fpmsudo kill php-fpm min pid # æ€æ­» php-fpm æœ€å°çš„è¿›ç¨‹id é…ç½® nginx.conf æ–‡ä»¶ é€šè¿‡ä»¥ä¸‹å‘½ä»¤å¯ä»¥æŸ¥çœ‹nginx.confæ–‡ä»¶çš„ä½ç½®ï¼š 1nginx -h è¾“å‡ºï¼š 1234567891011121314nginx version: nginx/1.10.1Usage: nginx [-?hvVtTq] [-s signal] [-c filename] [-p prefix] [-g directives]Options: -?,-h : this help -v : show version and exit -V : show version and configure options then exit -t : test configuration and exit -T : test configuration, dump it and exit -q : suppress non-error messages during configuration testing -s signal : send signal to a master process: stop, quit, reopen, reload -p prefix : set prefix path (default: /usr/local/Cellar/nginx/1.10.1/) -c filename : set configuration file (default: /usr/local/etc/nginx/nginx.conf) -g directives : set global directives out of configuration file æ‰“å¼€é…ç½®æ–‡ä»¶ï¼š 1vi /usr/local/etc/nginx/nginx.conf åœ¨æ–‡ä»¶æœ«å°¾å¯ä»¥çœ‹åˆ°ï¼š 1include servers/*; å®ƒå°†åŒç›®å½•ä¸‹çš„serversç›®å½•é‡Œçš„æ–‡ä»¶éƒ½åŒ…å«äº†è¿›æ¥ï¼Œç”±æ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨serversæ–‡ä»¶é‡Œåˆ›å»ºå¼€å‘é¡¹ç›®çš„é…ç½®ä¿¡æ¯ï¼š 12cd servers/vi test.conf å°†ä»¥ä¸‹é…ç½®ä¿¡æ¯ï¼Œå†™å…¥ test.confæ–‡ä»¶ä¸­ï¼š 1234567891011121314151617server &#123; listen 8099; server_name localhost; root /home/www/php_project; rewrite . /index.php; location / &#123; index index.php index.html index.htm; autoindex on; &#125; #proxy the php scripts to php-fpm location ~ \\.php$ &#123; include /usr/local/etc/nginx/fastcgi.conf; fastcgi_intercept_errors on; fastcgi_pass 127.0.0.1:9000; &#125;&#125; åœ¨ä¸Šè¿°çš„/home/www/php_projectçš„ç›®å½•ä¸‹ï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ª index.phpæ–‡ä»¶ï¼š 12cd /home/www/php_projectvi test.php å†™å…¥å†…å®¹ï¼š 12&lt;? phpphpinfo(); é‡å¯ nginx 12sudo nginx -s stopsudo nginx æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®localhost:8099ã€‚å¯ä»¥çœ‹åˆ°å…³äº PHP é…ç½®çš„ä¿¡æ¯ã€‚ è‡³æ­¤ï¼ŒMNMP(MacOS-nginx-MySQL-PHP)ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆã€‚ å®‰è£… PHP æ‰©å±• ç¯å¢ƒæ­å»ºå®Œæˆåï¼Œä½ å¯èƒ½è¿˜éœ€è¦å®‰è£…ä¸€äº› PHP æ‰©å±•ï¼Œå¦‚ MemCacheã€Redisã€Mongoã€Solrç­‰ã€‚ åœ¨å®‰è£…PHPæ‰©å±•ä¹‹å‰ï¼Œä½ éœ€è¦å®Œæˆä¸€äº›å¿…è¦çš„æ“ä½œã€‚ å…³é—­ SIP è¿™æ˜¯å®‰è£… PHP æ‰©å±•å‰çš„å¿…è¦æ“ä½œã€‚å¦‚æœè·³è¿‡è¿™ä¸€æ“ä½œï¼Œå³ä½¿ä½ ç”¨ sudo å‘½ä»¤å®‰è£…æ‰©å±•ï¼Œä¾æ—§ä¼šæŠ¥ Operation not permitted çš„é”™è¯¯ã€‚è¿™æ˜¯å› ä¸º OSX 10.11 El Capitanï¼ˆæˆ–æ›´é«˜ï¼‰æ–°æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å®‰å…¨æœºåˆ¶å«ç³»ç»Ÿå®Œæ•´æ€§ä¿æŠ¤ System Integrity Protection (SIP)ï¼Œæ‰€ä»¥å¯¹äºä»¥ä¸‹ç›®å½•ï¼š 123/System/sbin/usr ä¸åŒ…å«(/usr/local/) ä»…ä»…ä¾›ç³»ç»Ÿä½¿ç”¨ï¼Œå…¶å®ƒç”¨æˆ·æˆ–è€…ç¨‹åºæ— æ³•ç›´æ¥ä½¿ç”¨ï¼Œè€Œæˆ‘ä»¬çš„ /usr/lib/php/extensions/ åˆ™åˆšå¥½åœ¨å—ä¿æŠ¤èŒƒå›´å†…ï¼ˆè¯¯ä¼¤ä¸–ç•Œä¸Šæœ€å¥½çš„è¯­è¨€ï¼‰ã€‚ æ‰€ä»¥è§£å†³æ–¹æ³•å°±æ˜¯ç¦æ‰ SIP ä¿æŠ¤æœºåˆ¶ï¼Œæ­¥éª¤æ˜¯ï¼š é‡å¯ç³»ç»Ÿ æŒ‰ä½ Command + Rï¼ˆé‡æ–°äº®å±ä¹‹åå°±å¼€å§‹æŒ‰ï¼Œè±¡å¾åœ°æŒ‰å‡ ç§’å†æ¾å¼€ï¼Œç›´åˆ°å‡ºç°è‹¹æœæ ‡å¿—æ€§çš„ Logoï¼‰ èœå•â€œå®ç”¨å·¥å…·â€ ==&gt;&gt; â€œç»ˆç«¯â€ ==&gt;&gt; è¾“å…¥ï¼šcsrutil disableã€‚æ‰§è¡Œåä¼šè¾“å‡ºï¼š 1Successfully disabled System Integrity Protection. Please restart the machine for the changes to take effect é‡å¯ç³»ç»Ÿ å½“ç„¶ï¼ŒPHP æ‰©å±•å®‰è£…å®Œæˆåï¼Œå°±å¯ä»¥é‡æ–°æ‰“å¼€ SIPï¼Œæ–¹æ³•åŒä¸Šï¼Œå‘½ä»¤æ”¹ä¸ºï¼šcsrutil enableã€‚ å®‰è£…ä¸€äº›å¿…è¦çš„ä¾èµ–åŒ… å®‰è£… autoconfï¼ŒPHPåŠ¨æ€ç¼–è¯‘ phpize æ—¶éœ€è¦ï¼š 1brew install autoconf å®‰è£… opensslï¼Œå®‰è£…æŸäº› php æ‰©å±•å¦‚ mongo æ—¶éœ€è¦ã€‚ 1brew install openssl mongo æ‰©å±•å®‰è£…æ˜¯å¯èƒ½ä¼šæŠ¥ openssl é”™è¯¯ï¼Œè§£å†³æ–¹æ³•å¦‚ä¸‹ï¼š 1ln -s /usr/local/Cellar/openssl/1.0.2j/include/openssl /usr/include/openssl æ­£å¼å®‰è£…æ‰©å±• è¿™é‡Œæœ‰ä¸¤ç§æ–¹æ³•å®‰è£… php æ‰©å±•ï¼š é€šè¿‡ pecl ç®¡ç†å·¥å…·å®‰è£… é€šè¿‡æºç åŒ…å®‰è£… é€šè¿‡ pecl ç®¡ç†å·¥å…·å®‰è£… é¦–å…ˆå®‰è£… pecl 12cd /usr/lib/phpsudo php install-pear-nozlib.phar pecl ä¸€èˆ¬å°±ä¼šå®‰è£…æˆåŠŸï¼Œå¦‚æœå¤±è´¥ï¼Œæ¢å¦ä¸€ç§æ–¹å¼å®‰è£… peclï¼š 12345curl -O http://pear.php.net/go-pear.pharsudo php -d detect_unicode=0 go-pear.pharè¾“å…¥ 1ï¼Œå›è½¦ï¼Œè¾“å…¥/usr/local/pearè¾“å…¥ 4ï¼Œå›è½¦ï¼Œè¾“å…¥/usr/local/binå›è½¦ å®‰è£…å¥½pecl ä¹‹åï¼Œæˆ‘ä»¬å°±å¯ä»¥æ„‰å¿«åœ°å®‰è£… PHP æ‰©å±•äº†ï¼š 123sudo pecl install solrsudo pecl install memcachesudo pecl install mongodb é€šè¿‡æºç åŒ…å®‰è£… é™¤äº†é€šè¿‡ pecl å®‰è£…ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥é€šè¿‡ä¸‹è½½æºç åŒ…æ¥è¿›è¡Œå®‰è£…æ‰©å±•ï¼š 1234567wget http://pecl.php.net/get/redis-2.2.8.tgztar -zxvf redis-2.2.8.tgzcd redis-2.2.8phpize./configuremakesudo make install æ‰©å±•å®‰è£…å®Œæˆåï¼Œæˆ‘ä»¬è¿˜éœ€æœ€åä¸€æ­¥ï¼Œä¿®æ”¹php.iniæ–‡ä»¶ï¼Œå¹¶é‡å¯ PHP-FPMï¼š 123cd /private/etc/cp php.ini.default php.inivi php.ini è¿½åŠ æ‰©å±•ä¿¡æ¯ï¼š 1234extension=memcache.soextension=mongo.soextension=redis.soextension=solr.so é‡å¯ PHP-FPM: 123ps aux|grep php-fpmsudo kill php-fpm min pid # æ€æ­» php-fpm æœ€å°çš„è¿›ç¨‹idsudo php-fpm æ‰“å¼€æµè§ˆå™¨ï¼Œè®¿é—®localhost:8099ã€‚æŸ¥çœ‹æ‰©å±•æ˜¯å¦å®‰è£…æˆåŠŸã€‚","categories":[{"name":"tips","slug":"tips","permalink":"http://debug.cool/categories/tips/"}],"tags":[]},{"title":"Linuxä¸»æœºå®‰å…¨ç­–ç•¥éƒ¨ç½²","slug":"opsLinuxSec","date":"2017-02-16T10:44:00.000Z","updated":"2021-05-07T07:30:39.985Z","comments":true,"path":"2017/02/16/opsLinuxSec/","link":"","permalink":"http://debug.cool/2017/02/16/opsLinuxSec/","excerpt":"","text":"æ­äº†æµ‹è¯•æœºè®°å¾—åˆå§‹åŒ–é…ç½®ç­–ç•¥ã€‚ å¯ç”¨ authpriv å’Œ cron ç³»ç»Ÿæ—¥å¿—å®¡è®¡ 123456789å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå¯ç”¨authprivå’Œcronç³»ç»Ÿæ—¥å¿—å®¡è®¡ã€‚ authpriv ï¼åŒ…æ‹¬ç‰¹æƒä¿¡æ¯å¦‚ç”¨æˆ·ååœ¨å†…çš„è®¤è¯æ´»åŠ¨ cron ï¼ä¸ cron å’Œ at æœ‰å…³çš„è®¡åˆ’ä»»åŠ¡ä¿¡æ¯ã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š 1. ä¿®æ”¹/etc/rsyslog.confï¼Œæ·»åŠ æˆ–å–æ¶ˆæ³¨é‡Šå¦‚ä¸‹é…ç½®ï¼ˆä¸­é—´çš„åˆ†éš”ç¬¦æ˜¯tabï¼‰ï¼š authpriv.* /var/log/secure cron.* /var/log/cron 2. é‡å¯rsyslogæœåŠ¡ Linux å¸æˆ·å£ä»¤ç”Ÿå­˜æœŸç­–ç•¥ 12345å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå£ä»¤è€åŒ–ï¼ˆPassword agingï¼‰æ˜¯ä¸€ç§å¢å¼ºçš„ç³»ç»Ÿå£ä»¤ç”Ÿå‘½æœŸè®¤è¯æœºåˆ¶ï¼Œèƒ½å¤Ÿç¡®ä¿ç”¨æˆ·çš„å£ä»¤å®šæœŸæ›´æ¢ï¼Œæé«˜ç³»ç»Ÿå®‰å…¨æ€§ã€‚å‚è€ƒé“¾æ¥ï¼šhttp://man7.org/linux/man-pages/man5/login.defs.5.htmlæ“ä½œæ­¥éª¤ï¼šä¿®æ”¹æ–‡ä»¶/etc/login.defsï¼Œé…ç½®PASS_MAX_DAYS 90 é™åˆ¶ root æƒé™ç”¨æˆ·è¿œç¨‹ç™»å½• 12345678å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šé™åˆ¶rootæƒé™è¿œç¨‹ç™»å½•ã€‚å…ˆä»¥æ™®é€šæƒé™ç”¨æˆ·è¿œç¨‹ç™»å½•åï¼Œå†åˆ‡æ¢åˆ°è¶…çº§ç®¡ç†å‘˜æƒé™è´¦å·åæ‰§è¡Œç›¸åº”æ“ä½œï¼Œå¯ä»¥æå‡ç³»ç»Ÿå®‰å…¨æ€§ã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š 1. ä¿®æ”¹æ–‡ä»¶/etc/ssh/sshd_configé…ç½® PermitRootLogin no 2. é‡å¯sshdæœåŠ¡ Linux å¸æˆ·è¶…æ—¶è‡ªåŠ¨ç™»å‡ºé…ç½® 1234567å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šé…ç½®å¸æˆ·è¶…æ—¶è‡ªåŠ¨ç™»å‡ºï¼Œåœ¨ç”¨æˆ·è¾“å…¥ç©ºé—²ä¸€æ®µæ—¶é—´åè‡ªåŠ¨æ–­å¼€ã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š ä¿®æ”¹/etc/profileæ–‡ä»¶ï¼Œè®¾ç½®å®šæ—¶è´¦æˆ·è‡ªåŠ¨ç™»å‡ºæ—¶é—´ export TMOUT=180 Linux æœªé…ç½®è´¦æˆ·ç™»å½•å¤±è´¥é”å®šç­–ç•¥ 123456789101112131415161718å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šè®¾ç½®è´¦æˆ·ç™»å½•å¤±è´¥é”å®šç­–ç•¥ï¼ŒåŠ å¤§ç”¨æˆ·å£ä»¤è¢«æš´åŠ›ç ´è§£çš„éš¾åº¦ã€‚å‚è€ƒé“¾æ¥ï¼šhttp://man7.org/linux/man-pages/man8/pam_tally2.8.htmlæ“ä½œæ­¥éª¤ï¼š è®¾ç½®è¿ç»­è¾“é”™5æ¬¡å£ä»¤ï¼Œå¸å·é”å®š5åˆ†é’Ÿã€‚ åœ¨è¿›è¡Œæ­¤é¡¹å®‰å…¨åŠ å›ºå·¥ä½œå‰ï¼Œè¯·å…ˆæ£€æŸ¥PAMæ¨¡å—ç‰ˆæœ¬ï¼Œæœç´¢pam_tally2æ˜¯å¦å­˜åœ¨ï¼Œå¦‚æœpam_tally2å­˜åœ¨ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ã€‚ã€æ³¨æ„ï¼š å„ç³»ç»Ÿé…ç½®ä¸ä¸€ï¼Œè¯·æ ¹æ®å½“å‰ç³»ç»Ÿè¿›è¡Œé€‚å½“é…ç½®ï¼Œå¹¶ä»”ç»†è¯„ä¼°å¯¹ç³»ç»Ÿçš„å½±å“ã€‘ ä¿®å¤æ–¹æ¡ˆï¼ˆä»…ä¾›å‚è€ƒï¼Œè¯·å‹¿ç›´æ¥é…ç½®ï¼‰ï¼š centos ä¿®æ”¹é…ç½®/etc/pam.d/password-authï¼ˆå°†é…ç½®æ·»åŠ åˆ°åˆé€‚çš„ä½ç½®ï¼‰: auth required pam_tally2.so deny=5 unlock_time=300 even_deny_root root_unlock_time=300 account required pam_tally2.so ubuntu,debianï¼š ä¿®æ”¹é…ç½®/etc/pam.d/common-authï¼ˆå°†é…ç½®æ·»åŠ åˆ°åˆé€‚çš„ä½ç½®ï¼‰: auth required pam_tally2.so deny=5 unlock_time=300 even_deny_root root_unlock_time=300 ä¿®æ”¹é…ç½®/etc/pam.d/common-accountå‚æ•°ï¼ˆå°†é…ç½®æ·»åŠ åˆ°åˆé€‚çš„ä½ç½®ï¼‰: account required pam_tally2.so åˆ é™¤ç³»ç»Ÿç‰¹æ®Šçš„çš„ç”¨æˆ·å¸å· 123456789101112å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šç¦æ­¢æ‰€æœ‰é»˜è®¤çš„è¢«æ“ä½œç³»ç»Ÿæœ¬èº«å¯åŠ¨çš„ä¸”ä¸éœ€è¦çš„å¸å·ï¼Œå½“ä½ ç¬¬ä¸€æ¬¡è£…ä¸Šç³»ç»Ÿæ—¶å°±åº”è¯¥åšæ­¤æ£€æŸ¥ï¼ŒLinuxæä¾›äº†å„ç§å¸å·ï¼Œä½ å¯èƒ½ä¸éœ€è¦ï¼Œå¦‚æœä½ ä¸éœ€è¦è¿™ä¸ªå¸å·ï¼Œå°±ç§»èµ°å®ƒï¼Œä½ æœ‰çš„å¸å·è¶Šå¤šï¼Œå°±è¶Šå®¹æ˜“å—åˆ°æ”»å‡»ã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š #ä¸ºåˆ é™¤ä½ ç³»ç»Ÿä¸Šçš„ç”¨æˆ·ï¼Œç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š [root@c1gstudio]# userdel username #æ‰¹é‡åˆ é™¤æ–¹å¼ #è¿™é‡Œåˆ é™¤&quot;adm lp sync shutdown halt mail news uucp operator games gopher ftp &quot;è´¦å· #å¦‚æœä½ å¼€ç€ftpç­‰æœåŠ¡å¯ä»¥æŠŠftpè´¦å·ä¿ç•™ä¸‹æ¥ã€‚ for i in adm lp sync shutdown halt mail news uucp ope rator games gopher ftp ;do userdel $i ;done åˆ é™¤ç³»ç»Ÿç‰¹æ®Šçš„ç»„å¸å· 123456789å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š [root@c1gstudio]# groupdel groupname #æ‰¹é‡åˆ é™¤æ–¹å¼ for i in adm lp mail news uucp games dip pppusers pop users slipusers ;do groupdel $i ;done ç”¨æˆ·å¯†ç è®¾ç½® 1234567891011121314å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå®‰è£…linuxæ—¶é»˜è®¤çš„å¯†ç æœ€å°é•¿åº¦æ˜¯5ä¸ªå­—èŠ‚ï¼Œä½†è¿™å¹¶ä¸å¤Ÿï¼Œè¦æŠŠå®ƒè®¾ä¸º8ä¸ªå­—èŠ‚ã€‚ä¿®æ”¹æœ€çŸ­å¯†ç é•¿åº¦éœ€è¦ç¼–è¾‘login.defsæ–‡ä»¶#vi /etc/login.defså‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š PASS_MAX_DAYS 99999 ##å¯†ç è®¾ç½®æœ€é•¿æœ‰æ•ˆæœŸï¼ˆé»˜è®¤å€¼ï¼‰ PASS_MIN_DAYS 0 ##å¯†ç è®¾ç½®æœ€çŸ­æœ‰æ•ˆæœŸ PASS_MIN_LEN 5 ##è®¾ç½®å¯†ç æœ€å°é•¿åº¦ï¼Œå°†5æ”¹ä¸º8 PASS_WARN_AGE 7 ##æå‰å¤šå°‘å¤©è­¦å‘Šç”¨æˆ·å¯†ç å³å°†è¿‡æœŸã€‚ ç„¶åä¿®æ”¹Rootå¯†ç  #passwd root New UNIX password: Retype new UNIX password: passwd: all authentication tokens updated successfully. ä¿®æ”¹è‡ªåŠ¨æ³¨é”€å¸å·æ—¶é—´ 12345678å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šè‡ªåŠ¨æ³¨é”€å¸å·çš„ç™»å½•ï¼Œåœ¨Linuxç³»ç»Ÿä¸­rootè´¦æˆ·æ˜¯å…·æœ‰æœ€é«˜ç‰¹æƒçš„ã€‚å¦‚æœç³»ç»Ÿç®¡ç†å‘˜åœ¨ç¦»å¼€ç³»ç»Ÿä¹‹å‰å¿˜è®°æ³¨é”€rootè´¦æˆ·ï¼Œé‚£å°†ä¼šå¸¦æ¥å¾ˆå¤§çš„å®‰å…¨éšæ‚£ï¼Œåº”è¯¥è®©ç³»ç»Ÿä¼šè‡ªåŠ¨æ³¨é”€ã€‚é€šè¿‡ä¿®æ”¹è´¦æˆ·ä¸­â€œTMOUTâ€å‚æ•°ï¼Œå¯ä»¥å®ç°æ­¤åŠŸèƒ½ã€‚TMOUTæŒ‰ç§’è®¡ç®—ã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š ç¼–è¾‘ä½ çš„profileæ–‡ä»¶ï¼ˆvi /etc/profileï¼‰,åœ¨&quot;HISTSIZE=&quot;åé¢åŠ å…¥ä¸‹é¢è¿™è¡Œï¼š TMOUT=300 # 300ï¼Œè¡¨ç¤º300ç§’ï¼Œä¹Ÿå°±æ˜¯è¡¨ç¤º5åˆ†é’Ÿã€‚è¿™æ ·ï¼Œå¦‚æœç³»ç»Ÿä¸­ç™»é™†çš„ç”¨æˆ·åœ¨5åˆ†é’Ÿå†…éƒ½æ²¡æœ‰åŠ¨ä½œï¼Œé‚£ä¹ˆç³»ç»Ÿä¼šè‡ªåŠ¨æ³¨é”€è¿™ä¸ªè´¦æˆ·ã€‚ é™åˆ¶ Shell å‘½ä»¤è®°å½•å¤§å° 12345678910å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šé»˜è®¤æƒ…å†µä¸‹ï¼Œbash shellä¼šåœ¨æ–‡ä»¶$HOME/.bash_historyä¸­å­˜æ”¾å¤šè¾¾500æ¡å‘½ä»¤è®°å½•(æ ¹æ®å…·ä½“çš„ç³»ç»Ÿä¸åŒï¼Œé»˜è®¤è®°å½•æ¡æ•°ä¸åŒ)ã€‚ç³»ç»Ÿä¸­æ¯ä¸ªç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹éƒ½æœ‰ä¸€ä¸ªè¿™æ ·çš„æ–‡ä»¶ã€‚åœ¨æ­¤ç¬”è€…å¼ºçƒˆå»ºè®®é™åˆ¶è¯¥æ–‡ä»¶çš„å¤§å°ã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š æ‚¨å¯ä»¥ç¼–è¾‘/etc/profileæ–‡ä»¶ï¼Œä¿®æ”¹å…¶ä¸­çš„é€‰é¡¹å¦‚ä¸‹: HISTFILESIZE=30æˆ–HISTSIZE=30 #vi /etc/profile HISTSIZE=30 æ³¨é”€æ—¶åˆ é™¤å‘½ä»¤è®°å½• 12345678910å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š ç¼–è¾‘/etc/skel/.bash_logoutæ–‡ä»¶ï¼Œå¢åŠ å¦‚ä¸‹è¡Œ: rm -f $HOME/.bash_history è¿™æ ·ï¼Œç³»ç»Ÿä¸­çš„æ‰€æœ‰ç”¨æˆ·åœ¨æ³¨é”€æ—¶éƒ½ä¼šåˆ é™¤å…¶å‘½ä»¤è®°å½•ã€‚ å¦‚æœåªéœ€è¦é’ˆå¯¹æŸä¸ªç‰¹å®šç”¨æˆ·ï¼Œå¦‚rootç”¨æˆ·è¿›è¡Œè®¾ç½®ï¼Œåˆ™å¯åªåœ¨è¯¥ç”¨æˆ·çš„ä¸»ç›®å½•ä¸‹ä¿®æ”¹/$HOME/.bash_historyæ–‡ä»¶ï¼Œå¢åŠ ç›¸åŒçš„ä¸€è¡Œå³å¯ã€‚ ç”¨ä¸‹é¢çš„å‘½ä»¤åŠ éœ€è¦çš„ç”¨æˆ·ç»„å’Œç”¨æˆ·å¸å· 12345678910111213å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š [root@c1gstudio]# groupadd ä¾‹å¦‚ï¼šå¢åŠ website ç”¨æˆ·ç»„ï¼Œgroupadd website ç„¶åè°ƒç”¨vigrå‘½ä»¤æŸ¥çœ‹å·²æ·»åŠ çš„ç”¨æˆ·ç»„ ç”¨ä¸‹é¢çš„å‘½ä»¤åŠ éœ€è¦çš„ç”¨æˆ·å¸å· [root@c1gstudio]# useradd username â€“g website //æ·»åŠ ç”¨æˆ·åˆ°websiteç»„ï¼ˆä½œä¸ºwebserverçš„æ™®é€šç®¡ç†å‘˜ï¼Œè€Œérootç®¡ç†å‘˜ï¼‰ ç„¶åè°ƒç”¨vipwå‘½ä»¤æŸ¥çœ‹å·²æ·»åŠ çš„ç”¨æˆ· ç”¨ä¸‹é¢çš„å‘½ä»¤æ”¹å˜ç”¨æˆ·å£ä»¤ï¼ˆè‡³å°‘è¾“å…¥8ä½å­—æ¯å’Œæ•°å­—ç»„åˆçš„å¯†ç ï¼Œå¹¶å°†å¯†ç è®°å½•äºæœ¬åœ°æœºçš„ä¸“é—¨æ–‡æ¡£ä¸­ï¼Œä»¥é˜²é—å¿˜ï¼‰ [root@c1gstudio]# passwd username é˜»æ­¢ä»»ä½•äºº su ä½œä¸º root 1234567891011å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š å¦‚æœä½ ä¸æƒ³ä»»ä½•äººèƒ½å¤Ÿsuä½œä¸ºroot,ä½ èƒ½ç¼–è¾‘/etc/pam.d/suåŠ ä¸‹é¢çš„è¡Œï¼š #vi /etc/pam.d/su auth sufficient /lib/security/$ISA/pam_rootok.so debug auth required /lib/security/$ISA/pam_wheel.so group=website æ„å‘³ç€ä»…ä»…websiteç»„çš„ç”¨æˆ·å¯ä»¥suä½œä¸ºroot. ä¿®æ”¹ ssh æœåŠ¡çš„ root ç™»å½•æƒé™ 123456789101112å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š ä¿®æ”¹sshæœåŠ¡é…ç½®æ–‡ä»¶ï¼Œä½¿çš„sshæœåŠ¡ä¸å…è®¸ç›´æ¥ä½¿ç”¨rootç”¨æˆ·æ¥ç™»å½•ï¼Œè¿™æ ·å‡å°‘ç³»ç»Ÿè¢«æ¶æ„ç™»å½•æ”»å‡»çš„æœºä¼šã€‚ #vi /etc/ssh/sshd_config PermitRootLogin yes å°†è¿™è¡Œå‰çš„ï¼ƒå»æ‰åï¼Œä¿®æ”¹ä¸ºï¼š PermitRootLogin no ä¿®æ”¹ ssh æœåŠ¡çš„ sshd ç«¯å£ 12345678910111213141516171819202122232425å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šsshé»˜è®¤ä¼šç›‘å¬åœ¨22ç«¯å£ï¼Œä½ å¯ä»¥ä¿®æ”¹è‡³6022ç«¯å£ä»¥é¿è¿‡å¸¸è§„çš„æ‰«æã€‚æ³¨æ„ï¼šä¿®æ”¹ç«¯å£é”™è¯¯å¯èƒ½ä¼šå¯¼è‡´ä½ ä¸‹æ¬¡è¿ä¸åˆ°æœåŠ¡å™¨ï¼Œå¯ä»¥å…ˆåŒæ—¶å¼€ç€22å’Œ6022ä¸¤ä¸ªç«¯å£ï¼Œç„¶åå†å…³æ‰22ç«¯å£ï¼›é‡å¯sshdä¸ä¼šå¼¹æ‰ä½ å½“å‰çš„è¿æ¥ï¼Œå¯ä»¥å¦å¤–å¼€ä¸€ä¸ªå®¢æˆ·ç«¯æ¥æµ‹è¯•æœåŠ¡;å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š #vi /etc/ssh/sshd_config #å¢åŠ ä¿®æ”¹ #Port 22 #å…³é—­22ç«¯å£ Port 6022 #å¢åŠ 6022ç«¯å£ #é‡å¯sshdæœåŠ¡ service sshd restart æ£€æŸ¥ä¸€ä¸‹sshdçš„ç›‘å¬ç«¯å£å¯¹ä¸å¯¹ netstat -lnp|grep ssh #iptableså¼€æ”¾sshdçš„6022ç«¯å£ vi /etc/sysconfig/iptables #å¦‚æœä½¿ç”¨redhaté»˜è®¤è§„åˆ™åˆ™å¢åŠ  -A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 6022 -j ACCEPT #æˆ– iptables -A INPUT -p tcp --dport 6022 -j ACCEPT iptables -A OUTPUT -p udp --sport 6022 -j ACCEPT é‡å¯iptables æœåŠ¡ service iptables restart #æµ‹è¯•ä¸¤ä¸ªç«¯å£æ˜¯å¦éƒ½èƒ½è¿ä¸Šï¼Œè¿ä¸Šåå†å°†22ç«¯å£åˆ é™¤ å…³é—­ç³»ç»Ÿä¸ä½¿ç”¨çš„æœåŠ¡ï¼š 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š cd /etc/init.d # è¿›å…¥åˆ°ç³»ç»Ÿinitè¿›ç¨‹å¯åŠ¨ç›®å½• åœ¨è¿™é‡Œæœ‰ä¸¤ä¸ªæ–¹æ³•ï¼Œå¯ä»¥å…³é—­initç›®å½•ä¸‹çš„æœåŠ¡ã€‚ ä¸€ä¸ªæ˜¯å°†initç›®å½•ä¸‹çš„æ–‡ä»¶åmvæˆ*.oldç±»çš„æ–‡ä»¶åï¼Œå³ä¿®æ”¹æ–‡ä»¶åï¼Œä½œç”¨å°±æ˜¯åœ¨ç³»ç»Ÿå¯åŠ¨çš„æ—¶å€™æ‰¾ä¸åˆ°è¿™ä¸ªæœåŠ¡çš„å¯åŠ¨æ–‡ä»¶ã€‚ å¦ä¸€ä¸ªæ˜¯ä½¿ç”¨chkconfigç³»ç»Ÿå‘½ä»¤æ¥å…³é—­ç³»ç»Ÿå¯åŠ¨ç­‰çº§çš„æœåŠ¡ã€‚ æ³¨ï¼šåœ¨ä½¿ç”¨ä»¥ä¸‹ä»»ä½•ä¸€ç§æ–¹æ³•æ—¶ï¼Œè¯·å…ˆæ£€æŸ¥éœ€è¦å…³é—­çš„æœåŠ¡æ˜¯å¦æ˜¯æœ¬æœåŠ¡å™¨ç‰¹åˆ«éœ€è¦å¯åŠ¨æ”¯æŒçš„æœåŠ¡ï¼Œä»¥é˜²å…³é—­æ­£å¸¸ä½¿ç”¨çš„æœåŠ¡ã€‚ ä½¿ç”¨chkcofigå‘½ä»¤æ¥å…³é—­ä¸ä½¿ç”¨çš„ç³»ç»ŸæœåŠ¡ (levelå‰é¢ä¸º2ä¸ªå‡å·)è¦æƒ³åœ¨ä¿®æ”¹å¯åŠ¨è„šæœ¬å‰äº†è§£æœ‰å¤šå°‘æœåŠ¡æ­£åœ¨è¿è¡Œï¼Œè¾“å…¥ï¼š ps aux | wc -l ç„¶åä¿®æ”¹å¯åŠ¨è„šæœ¬åï¼Œé‡å¯ç³»ç»Ÿï¼Œå†æ¬¡è¾“å…¥ä¸Šé¢çš„å‘½ä»¤ï¼Œå°±å¯è®¡ç®—å‡ºå‡å°‘äº†å¤šå°‘é¡¹æœåŠ¡ã€‚è¶Šå°‘æœåŠ¡åœ¨è¿è¡Œï¼Œå®‰å…¨æ€§å°±è¶Šå¥½ã€‚å¦å¤–è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯ä»¥äº†è§£è¿˜æœ‰å¤šå°‘æœåŠ¡åœ¨è¿è¡Œï¼š netstat -na --ip æ‰¹é‡æ–¹å¼å…ˆåœæ­¢æœåŠ¡ for i in acpid anacron apmd atd auditd autofs avahi-daemon avahi-dnsconfd bluetooth cpuspeed cups dhcpd firstboot gpm haldaemon hidd ip6tables ipsec isdn kudzu lpd mcstrans messagebus microcode_ctl netfs nfs nfslock nscd pcscd portmap readahead_early restorecond rpcgssd rpcidmapd rstatd sendmai l setroubleshoot snmpd sysstat xfs xinetd yppasswdd ypserv yum-updatesd ;do service $i stop;done å…³é—­å¯åŠ¨æœåŠ¡ for i in acpid anacron apmd atd auditd autofs avahi-daemon avahi-dnsconfd bluetooth cpuspeed cups dhcpd firstboot gpm haldaemon hidd ip6tables ipsec isdn kudzu lpd mcstrans messagebus microcode_ctl netfs nfs nfslock nscd pcscd portmap readahead_early restorecond rpcgssd rpcidmapd rstatd sendmai l setroubleshoot snmpd sysstat xfs xinetd yppasswdd ypserv yum-updatesd ;do chkconfig $i off;done ä»¥ä¸‹ä¸ºæ‰‹åŠ¨æ–¹å¼åŠè§£é‡Š,æ‰§è¡Œæ‰¹é‡æ–¹å¼åä¸éœ€å†æ‰§è¡Œäº† chkconfig --level 345 apmd off ##ç¬”è®°æœ¬éœ€è¦ chkconfig --level 345 netfs off ## nfså®¢æˆ·ç«¯ chkconfig --level 345 yppasswdd off ## NISæœåŠ¡å™¨ï¼Œæ­¤æœåŠ¡æ¼æ´å¾ˆå¤š chkconfig --level 345 ypserv off ## NISæœåŠ¡å™¨ï¼Œæ­¤æœåŠ¡æ¼æ´å¾ˆå¤š chkconfig --level 345 dhcpd off ## dhcpæœåŠ¡ chkconfig --level 345 portmap off ##è¿è¡Œrpc(111ç«¯å£)æœåŠ¡å¿…éœ€ chkconfig --level 345 lpd off ##æ‰“å°æœåŠ¡ chkconfig --level 345 nfs off ## NFSæœåŠ¡å™¨ï¼Œæ¼æ´æå¤š chkconfig --level 345 sendmail off ##é‚®ä»¶æœåŠ¡, æ¼æ´æå¤š chkconfig --level 345 snmpd off ## SNMPï¼Œè¿œç¨‹ç”¨æˆ·èƒ½ä»ä¸­è·å¾—è®¸å¤šç³»ç»Ÿä¿¡æ¯ chkconfig --level 345 rstatd off ##é¿å…è¿è¡ŒræœåŠ¡ï¼Œè¿œç¨‹ç”¨æˆ·å¯ä»¥ä»ä¸­è·å–å¾ˆå¤šä¿¡æ¯ chkconfig --level 345 atd off ##å’Œcronå¾ˆç›¸ä¼¼çš„å®šæ—¶è¿è¡Œç¨‹åºçš„æœåŠ¡ æ³¨ï¼šä»¥ä¸Šchkcofig å‘½ä»¤ä¸­çš„3å’Œ5æ˜¯ç³»ç»Ÿå¯åŠ¨çš„ç±»å‹ï¼Œä»¥ä¸‹ä¸ºæ•°å­—ä»£è¡¨æ„æ€ 0:å¼€æœº(è¯·ä¸è¦åˆ‡æ¢åˆ°æ­¤ç­‰çº§) 1:å•äººä½¿ç”¨è€…æ¨¡å¼çš„æ–‡å­—ç•Œé¢ 2:å¤šäººä½¿ç”¨è€…æ¨¡å¼çš„æ–‡å­—ç•Œé¢,ä¸å…·æœ‰ç½‘ç»œæ¡£æ¡ˆç³»ç»Ÿ(NFS)åŠŸèƒ½ 3:å¤šäººä½¿ç”¨è€…æ¨¡å¼çš„æ–‡å­—ç•Œé¢,å…·æœ‰ç½‘ç»œæ¡£æ¡ˆç³»ç»Ÿ(NFS)åŠŸèƒ½ 4:æŸäº›å‘è¡Œç‰ˆçš„linuxä½¿ç”¨æ­¤ç­‰çº§è¿›å…¥x windows system 5:æŸäº›å‘è¡Œç‰ˆçš„linuxä½¿ç”¨æ­¤ç­‰çº§è¿›å…¥x windows system 6:é‡æ–°å¯åŠ¨ å¦‚æœä¸æŒ‡å®š--level å•ç”¨onå’Œoffå¼€å…³ï¼Œç³»ç»Ÿé»˜è®¤åªå¯¹è¿è¡Œçº§3ï¼Œ4ï¼Œ5æœ‰æ•ˆ chkconfig cups off #æ‰“å°æœº chkconfig bluetooth off # è“ç‰™ chkconfig hidd off # è“ç‰™ chkconfig ip6tables off # ipv6 chkconfig ipsec off # vpn chkconfig auditd off #ç”¨æˆ·ç©ºé—´ç›‘æ§ç¨‹åº chkconfig autofs off #å…‰ç›˜è½¯ç›˜ç¡¬ç›˜ç­‰è‡ªåŠ¨åŠ è½½æœåŠ¡ chkconfig avahi-daemon off #ä¸»è¦ç”¨äºZero Configuration Networking ï¼Œä¸€èˆ¬æ²¡ä»€ä¹ˆç”¨å»ºè®®å…³é—­ chkconfig avahi-dnsconfd off #ä¸»è¦ç”¨äºZero Configuration Networking ,åŒä¸Š,å»ºè®®å…³é—­ chkconfig cpuspeed off #åŠ¨æ€è°ƒæ•´CPUé¢‘ç‡çš„è¿›ç¨‹ï¼Œåœ¨æœåŠ¡å™¨ç³»ç»Ÿä¸­è¿™ä¸ªè¿›ç¨‹å»ºè®®å…³é—­ chkconfig isdn off #isdn chkconfig kudzu off #ç¡¬ä»¶è‡ªåŠ¨ç›‘æµ‹æœåŠ¡ chkconfig nfslock off #NFSæ–‡æ¡£é”å®šåŠŸèƒ½ã€‚æ–‡æ¡£å…±äº«æ”¯æŒï¼Œæ— éœ€çš„èƒ½å¤Ÿå…³äº† chkconfig nscd off #è´Ÿè´£å¯†ç å’Œç»„çš„æŸ¥è¯¢ï¼Œåœ¨æœ‰NISæœåŠ¡æ—¶éœ€è¦ chkconfig pcscd off #æ™ºèƒ½å¡æ”¯æŒï¼Œ,å¦‚æœæ²¡æœ‰å¯ä»¥å…³äº† chkconfig yum-updatesd off #yumæ›´æ–° chkconfig acpid off chkconfig autofs off chkconfig firstboot off chkconfig mcstrans off #selinux chkconfig microcode_ctl off chkconfig rpcgssd off chkconfig rpcidmapd off chkconfig setroubleshoot off chkconfig xfs off chkconfig xinetd off chkconfig messagebus off chkconfig gpm off #é¼ æ ‡ chkconfig restorecond off #selinux chkconfig haldaemon off chkconfig sysstat off chkconfig readahead_early off chkconfig anacron off éœ€è¦ä¿ç•™çš„æœåŠ¡ crond , irqbalance , microcode_ctl ,network , sshd ,syslog å› ä¸ºæœ‰äº›æœåŠ¡å·²è¿è¡Œï¼Œæ‰€ä»¥è®¾ç½®å®Œåéœ€é‡å¯ chkconfig /* è¯­æ³•ï¼šchkconfig [--add][--del][--list][ç³»ç»ŸæœåŠ¡] æˆ– chkconfig [--level &lt;ç­‰çº§ä»£å·&gt;][ç³»ç»ŸæœåŠ¡][on/off/reset] è¡¥å……è¯´æ˜ï¼šè¿™æ˜¯Red Hatå…¬å¸éµå¾ªGPLè§„åˆ™æ‰€å¼€å‘çš„ç¨‹åºï¼Œå®ƒå¯æŸ¥è¯¢æ“ä½œç³»ç»Ÿåœ¨æ¯ä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­ä¼šæ‰§è¡Œå“ªäº›ç³»ç»ŸæœåŠ¡ï¼Œå…¶ä¸­åŒ…æ‹¬å„ç±»å¸¸é©»æœåŠ¡ã€‚ å‚æ•°ï¼š --add å¢åŠ æ‰€æŒ‡å®šçš„ç³»ç»ŸæœåŠ¡ï¼Œè®©chkconfigæŒ‡ä»¤å¾—ä»¥ç®¡ç†å®ƒï¼Œå¹¶åŒæ—¶åœ¨ç³»ç»Ÿå¯åŠ¨çš„å™è¿°æ–‡ä»¶å†…å¢åŠ ç›¸å…³æ•°æ®ã€‚ --del åˆ é™¤æ‰€æŒ‡å®šçš„ç³»ç»ŸæœåŠ¡ï¼Œä¸å†ç”±chkconfigæŒ‡ä»¤ç®¡ç†ï¼Œå¹¶åŒæ—¶åœ¨ç³»ç»Ÿå¯åŠ¨çš„å™è¿°æ–‡ä»¶å†…åˆ é™¤ç›¸å…³æ•°æ®ã€‚ --level&lt;ç­‰çº§ä»£å·&gt; æŒ‡å®šè¯»ç³»ç»ŸæœåŠ¡è¦åœ¨å“ªä¸€ä¸ªæ‰§è¡Œç­‰çº§ä¸­å¼€å¯æˆ–å…³æ¯• */ é˜»æ­¢ç³»ç»Ÿå“åº”ä»»ä½•ä»å¤–éƒ¨/å†…éƒ¨æ¥çš„ ping è¯·æ±‚ 1234567å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šæ—¢ç„¶æ²¡æœ‰äººèƒ½pingé€šä½ çš„æœºå™¨å¹¶æ”¶åˆ°å“åº”ï¼Œä½ å¯ä»¥å¤§å¤§å¢å¼ºä½ çš„ç«™ç‚¹çš„å®‰å…¨æ€§ã€‚ä½ å¯ä»¥åŠ ä¸‹é¢çš„ä¸€è¡Œå‘½ä»¤åˆ°/etc/rc.d/rc.localï¼Œä»¥ä½¿æ¯æ¬¡å¯åŠ¨åè‡ªåŠ¨è¿è¡Œã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all #è¿™ä¸ªå¯ä»¥ä¸åšå“ˆ ä¿®æ”¹&quot;/etc/host.conf&quot;æ–‡ä»¶ 123456789101112131415å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š &quot;/etc/host.conf&quot;è¯´æ˜äº†å¦‚ä½•è§£æåœ°å€ã€‚ç¼–è¾‘&quot;/etc/host.conf&quot;æ–‡ä»¶ï¼ˆvi /etc/host.confï¼‰ï¼ŒåŠ å…¥ä¸‹é¢è¿™è¡Œï¼š # Lookup names via DNS first then fall back to /etc/hosts. order hosts,bind # We have machines with multiple IP addresses. multi on # Check for IP address spoofing. nospoof on ç¬¬ä¸€é¡¹è®¾ç½®é¦–å…ˆé€šè¿‡DNSè§£æIPåœ°å€ï¼Œç„¶åé€šè¿‡hostsæ–‡ä»¶è§£æã€‚ ç¬¬äºŒé¡¹è®¾ç½®æ£€æµ‹æ˜¯å¦â€œ/etc/hostsâ€æ–‡ä»¶ä¸­çš„ä¸»æœºæ˜¯å¦æ‹¥æœ‰å¤šä¸ªIPåœ°å€ï¼ˆæ¯”å¦‚æœ‰å¤šä¸ªä»¥å¤ªå£ç½‘å¡ï¼‰ã€‚ ç¬¬ä¸‰é¡¹è®¾ç½®è¯´æ˜è¦æ³¨æ„å¯¹æœ¬æœºæœªç»è®¸å¯çš„ç”µå­æ¬ºéª—ã€‚ ä¸å…è®¸ä»ä¸åŒçš„æ§åˆ¶å°è¿›è¡Œ root ç™»é™† 1234567891011121314151617å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š &quot;/etc/securetty&quot;æ–‡ä»¶å…è®¸ä½ å®šä¹‰rootç”¨æˆ·å¯ä»¥ä»é‚£ä¸ªTTYè®¾å¤‡ç™»é™†ã€‚ä½ å¯ä»¥ç¼–è¾‘&quot;/etc/securetty&quot;æ–‡ä»¶ï¼Œå†ä¸éœ€è¦ç™»é™†çš„TTYè®¾å¤‡å‰æ·»åŠ â€œ#â€æ ‡å¿—ï¼Œæ¥ç¦æ­¢ä»è¯¥TTYè®¾å¤‡è¿›è¡Œrootç™»é™†ã€‚ åœ¨/etc/inittabæ–‡ä»¶ä¸­æœ‰å¦‚ä¸‹ä¸€æ®µè¯ï¼š # Run gettys in standard runlevels 1:2345:respawn:/sbin/mingetty tty1 2:2345:respawn:/sbin/mingetty tty2 # 3:2345:respawn:/sbin/mingetty tty3 # 4:2345:respawn:/sbin/mingetty tty4 # 5:2345:respawn:/sbin/mingetty tty5 # 6:2345:respawn:/sbin/mingetty tty6 ç³»ç»Ÿé»˜è®¤çš„å¯ä»¥ä½¿ç”¨6ä¸ªæ§åˆ¶å°ï¼Œå³Alt+F1,Alt+F2...ï¼Œè¿™é‡Œåœ¨3ï¼Œ4ï¼Œ5ï¼Œ6å‰é¢åŠ ä¸Šâ€œ#â€ï¼Œæ³¨é‡Šè¯¥å¥è¯ï¼Œè¿™æ ·ç°åœ¨åªæœ‰ä¸¤ä¸ªæ§åˆ¶å°å¯ä¾›ä½¿ç”¨ï¼Œæœ€å¥½ä¿ç•™ä¸¤ä¸ªã€‚ç„¶åé‡æ–°å¯åŠ¨initè¿›ç¨‹ï¼Œæ”¹åŠ¨å³å¯ç”Ÿæ•ˆï¼ ç¦æ­¢ Control-Alt-Delete é”®ç›˜å…³é—­å‘½ä»¤ 1234567891011å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š åœ¨&quot;/etc/inittab&quot; æ–‡ä»¶ä¸­æ³¨é‡Šæ‰ä¸‹é¢è¿™è¡Œï¼ˆä½¿ç”¨#ï¼‰ï¼š ca::ctrlaltdel:/sbin/shutdown -t3 -r now æ”¹ä¸ºï¼š # ca::ctrlaltdel:/sbin/shutdown -t3 -r now ä¸ºäº†ä½¿è¿™é¡¹æ”¹åŠ¨èµ·ä½œç”¨ï¼Œè¾“å…¥ä¸‹é¢è¿™ä¸ªå‘½ä»¤ï¼š # /sbin/init q ç”¨ chattr å‘½ä»¤ç»™ä¸‹é¢çš„æ–‡ä»¶åŠ ä¸Šä¸å¯æ›´æ”¹å±æ€§ã€‚ 1234567891011121314151617181920212223242526272829å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š [root@c1gstudio]# chattr +i /etc/passwd [root@c1gstudio]# chattr +i /etc/shadow [root@c1gstudio]# chattr +i /etc/group [root@c1gstudio]# chattr +i /etc/gshadow ã€æ³¨ï¼šchattræ˜¯æ”¹å˜æ–‡ä»¶å±æ€§çš„å‘½ä»¤ï¼Œå‚æ•°iä»£è¡¨ä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½•,æ­¤å¤„çš„iä¸ºä¸å¯ä¿®æ”¹ä½(immutable)ã€‚æŸ¥çœ‹æ–¹æ³•ï¼šlsattr /etc/passwdï¼Œæ’¤é”€ä¸ºchattr â€“i /etc/groupã€‘ è¡¥å……è¯´æ˜ï¼šè¿™é¡¹æŒ‡ä»¤å¯æ”¹å˜å­˜æ”¾åœ¨ext2æ–‡ä»¶ç³»ç»Ÿä¸Šçš„æ–‡ä»¶æˆ–ç›®å½•å±æ€§ï¼Œè¿™äº›å±æ€§å…±æœ‰ä»¥ä¸‹8ç§æ¨¡å¼ï¼š aï¼šè®©æ–‡ä»¶æˆ–ç›®å½•ä»…ä¾›é™„åŠ ç”¨é€”ã€‚ bï¼šä¸æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•çš„æœ€åå­˜å–æ—¶é—´ã€‚ cï¼šå°†æ–‡ä»¶æˆ–ç›®å½•å‹ç¼©åå­˜æ”¾ã€‚ dï¼šå°†æ–‡ä»¶æˆ–ç›®å½•æ’é™¤åœ¨å€¾å€’æ“ä½œä¹‹å¤–ã€‚ iï¼šä¸å¾—ä»»æ„æ›´åŠ¨æ–‡ä»¶æˆ–ç›®å½•ã€‚ sï¼šä¿å¯†æ€§åˆ é™¤æ–‡ä»¶æˆ–ç›®å½•ã€‚ Sï¼šå³æ—¶æ›´æ–°æ–‡ä»¶æˆ–ç›®å½•ã€‚ uï¼šé¢„é˜²ä»¥å¤–åˆ é™¤ã€‚ å‚æ•°ï¼š -R é€’å½’å¤„ç†ï¼Œå°†æŒ‡å®šç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åŠå­ç›®å½•ä¸€å¹¶å¤„ç†ã€‚ -v&lt;ç‰ˆæœ¬ç¼–å·&gt; è®¾ç½®æ–‡ä»¶æˆ–ç›®å½•ç‰ˆæœ¬ã€‚ -V æ˜¾ç¤ºæŒ‡ä»¤æ‰§è¡Œè¿‡ç¨‹ã€‚ +&lt;å±æ€§&gt; å¼€å¯æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚ -&lt;å±æ€§&gt; å…³é—­æ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚ =&lt;å±æ€§&gt; æŒ‡å®šæ–‡ä»¶æˆ–ç›®å½•çš„è¯¥é¡¹å±æ€§ã€‚ ç»™ç³»ç»ŸæœåŠ¡ç«¯å£åˆ—è¡¨æ–‡ä»¶åŠ é” 1234567å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šä¸»è¦ä½œç”¨æ˜¯é˜²æ­¢æœªç»è®¸å¯çš„åˆ é™¤æˆ–æ·»åŠ æœåŠ¡å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š chattr +i /etc/services ã€æŸ¥çœ‹æ–¹æ³•ï¼šlsattr /etc/ servicesï¼Œæ’¤é”€ä¸ºchattr â€“i /etc/ servicesã€‘ ç³»ç»Ÿæ–‡ä»¶æƒé™ä¿®æ”¹ 1234567891011121314151617181920212223242526å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šLinuxæ–‡ä»¶ç³»ç»Ÿçš„å®‰å…¨ä¸»è¦æ˜¯é€šè¿‡è®¾ç½®æ–‡ä»¶çš„æƒé™æ¥å®ç°çš„ã€‚æ¯ä¸€ä¸ªLinuxçš„æ–‡ä»¶æˆ–ç›®å½•ï¼Œéƒ½æœ‰3ç»„å±æ€§ï¼Œåˆ†åˆ«å®šä¹‰æ–‡ä»¶æˆ–ç›®å½•çš„æ‰€æœ‰è€…ï¼Œç”¨æˆ·ç»„å’Œå…¶ä»–äººçš„ä½¿ç”¨æƒé™ï¼ˆåªè¯»ã€å¯å†™ã€å¯æ‰§è¡Œã€å…è®¸SUIDã€å…è®¸SGIDç­‰ï¼‰ã€‚ç‰¹åˆ«æ³¨æ„ï¼Œæƒé™ä¸ºSUIDå’ŒSGIDçš„å¯æ‰§è¡Œæ–‡ä»¶ï¼Œåœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œä¼šç»™è¿›ç¨‹èµ‹äºˆæ‰€æœ‰è€…çš„æƒé™ï¼Œå¦‚æœè¢«é»‘å®¢å‘ç°å¹¶åˆ©ç”¨å°±ä¼šç»™ç³»ç»Ÿé€ æˆå±å®³ã€‚å‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š (1)ä¿®æ”¹initç›®å½•æ–‡ä»¶æ‰§è¡Œæƒé™ï¼š chmod -R 700 /etc/init.d/* ï¼ˆé€’å½’å¤„ç†ï¼Œownerå…·æœ‰rwxï¼Œgroupæ— ï¼Œothersæ— ï¼‰ (2)ä¿®æ”¹éƒ¨åˆ†ç³»ç»Ÿæ–‡ä»¶çš„SUIDå’ŒSGIDçš„æƒé™ï¼š chmod a-s /usr/bin/chage chmod a-s /usr/bin/gpasswd chmod a-s /usr/bin/wall chmod a-s /usr/bin/chfn chmod a-s /usr/bin/chsh chmod a-s /usr/bin/newgrp chmod a-s /usr/bin/write chmod a-s /usr/sbin/usernetctl chmod a-s /usr/sbin/traceroute chmod a-s /bin/mount chmod a-s /bin/umount chmod a-s /sbin/netreport (3)ä¿®æ”¹ç³»ç»Ÿå¼•å¯¼æ–‡ä»¶ chmod 600 /etc/grub.conf chattr +i /etc/grub.conf ã€æŸ¥çœ‹æ–¹æ³•ï¼šlsattr /etc/grub.confï¼Œæ’¤é”€ä¸ºchattr â€“i /etc/grub.confã€‘ å¢åŠ  dns 12345678å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š # vi /etc/resolv.conf nameserver 8.8.8.8 #google dns nameserver 8.8.4.4 hostname ä¿®æ”¹ 12345678910å±é™©ç­‰çº§:ä½çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š # æ³¨æ„éœ€å…ˆæŠŠmysqlã€postfixç­‰æœåŠ¡åœäº† 1.hostname servername 2.vi /etc/sysconfig/network service network restart 3.vi /etc/hosts selinux ä¿®æ”¹ 12345678910å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š å¼€å¯selinuxå¯ä»¥å¢åŠ å®‰å…¨æ€§ï¼Œä½†è£…è½¯ä»¶æ—¶å¯èƒ½ä¼šé‡åˆ°ä¸€äº›å¥‡æ€ªé—®é¢˜ ä»¥ä¸‹æ˜¯å…³é—­æ–¹æ³• # vi /etc/selinux/config æ”¹æˆdisabled å…³é—­ ipv6 12345678910111213141516å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š echo &quot;alias net-pf-10 off&quot; &gt;&gt; /etc/modprobe.conf echo &quot;alias ipv6 off&quot; &gt;&gt; /etc/modprobe.conf # vi /etc/sysconfig/network NETWORKING_IPV6=no é‡å¯æœåŠ¡ Service ip6tables stop Service network restart å…³é—­è‡ªåŠ¨å¯åŠ¨ chkconfig --level 235 ip6tables off è®¾ç½® iptables 123456789101112å±é™©ç­‰çº§:ä¸­çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š iptables é»˜è®¤å®‰å…¨è§„åˆ™è„šæœ¬ é‡å¯ç³»ç»Ÿ ä»¥ä¸Šå¤§éƒ¨åˆ†è®¾ç½®å¯ä»¥è¿è¡Œè„šæœ¬æ¥å®Œæˆã€‚linuxå®‰å…¨è®¾ç½®å¿«æ·è„šæœ¬ è®¾ç½®å®Œæˆåé‡å¯ç³»ç»Ÿ å…¶å®ƒè®¾ç½®é¡¹ linux è°ƒæ•´ç³»ç»Ÿæ—¶åŒº/æ—¶é—´çš„æ–¹æ³• 1234567891011121314151617181920212223242526272829303132333435363738å±é™©ç­‰çº§:ä½çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š æŠŠ/usr/share/zoneinfoé‡Œç›¸åº”çš„æ—¶åŒºä¸/etc/localtimeåšä¸ªè½¯link.æ¯”å¦‚ä½¿ç”¨ä¸Šæµ·æ—¶åŒºçš„æ—¶é—´:ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime å¦‚æœè¦ä½¿ç”¨UTCè®¡æ—¶æ–¹å¼ï¼Œåˆ™åº”åœ¨/etc/sysconfig/clockæ–‡ä»¶é‡Œæ”¹UTC=TRUE æ—¶é—´çš„è®¾ç½®: ä½¿ç”¨date å‘½ä»¤åŠ så‚æ•°ä¿®æ”¹ï¼Œæ³¨æ„linuxçš„æ—¶é—´æ ¼å¼ä¸º&quot;æœˆæ—¥æ—¶åˆ†å¹´&quot;,ä¹Ÿå¯ä»¥åªä¿®æ”¹æ—¶é—´date -s 22:30:20,å¦‚æœä¿®æ”¹çš„æ˜¯å¹´æœˆæ—¥å’Œæ—¶é—´ï¼Œæ ¼å¼ä¸º&quot;æœˆæ—¥æ—¶åˆ†å¹´.ç§’&quot;,2007-03-18 11:01:56åˆ™åº”å†™ä¸º&quot;date -s 031811012007.56 ç¡¬ä»¶æ—¶é—´ä¸å½“å‰æ—¶é—´æ›´æ–°: hwclock --systohc å¦‚æœç¡¬ä»¶è®°æ—¶ç”¨UTC,åˆ™ä¸º hwclock --systohc --utc linuxè°ƒæ•´ç³»ç»Ÿæ—¶åŒº/æ—¶é—´çš„æ–¹æ³• 1) æ‰¾åˆ°ç›¸åº”çš„æ—¶åŒºæ–‡ä»¶ /usr/share/zoneinfo/Asia/Shanghai ç”¨è¿™ä¸ªæ–‡ä»¶æ›¿æ¢å½“å‰çš„/etc/localtimeæ–‡ä»¶ã€‚ æ­¥éª¤ï¼šcp â€“i /usr/share/zoneinfo/Asia/Shanghai /etc/localtime é€‰æ‹©è¦†ç›– 2) ä¿®æ”¹/etc/sysconfig/clockæ–‡ä»¶ï¼Œä¿®æ”¹ä¸ºï¼š ZONE=&quot;Asia/Shanghai&quot; UTC=false ARC=false 3) æ—¶é—´è®¾å®šæˆ2005å¹´8æœˆ30æ—¥çš„å‘½ä»¤å¦‚ä¸‹ï¼š # date -s 08/30/2005 å°†ç³»ç»Ÿæ—¶é—´è®¾å®šæˆä¸‹åˆ6ç‚¹40åˆ†0ç§’çš„å‘½ä»¤å¦‚ä¸‹ï¼š # date -s 18:40:00 4)åŒæ­¥BIOSæ—¶é’Ÿï¼Œå¼ºåˆ¶æŠŠç³»ç»Ÿæ—¶é—´å†™å…¥CMOSï¼Œå‘½ä»¤å¦‚ä¸‹ï¼š # clock -w å®‰è£…ntpd # yum install ntp # chkconfig --levels 235 ntpd on # ntpdate ntp.api.bz #å…ˆæ‰‹åŠ¨æ ¡å‡†ä¸‹ # service ntpd start è®¾ç½®è¯­è¨€ 1234567891011121314151617181920å±é™©ç­‰çº§:ä½çº§ç±»å‹ï¼šå®‰å…¨åŸºçº¿æè¿°ï¼šè‹±æ–‡è¯­è¨€ï¼Œä¸­æ–‡æ”¯æŒå‚è€ƒé“¾æ¥ï¼šæ— æ“ä½œæ­¥éª¤ï¼š # vi /etc/sysconfig/i18n LANG=&quot;en_US.UTF-8&quot; SUPPORTED=&quot;zh_CN.UTF-8:zh_CN:zh&quot; SYSFONT=&quot;latarcyrheb-sun16&quot; tmpwatch å®šæ—¶æ¸…é™¤ å‡è®¾æœåŠ¡å™¨è‡ªå®šä¹‰äº†phpçš„sessionå’Œuploadç›®å½• # vi /etc/cron.daily/tmpwatch åœ¨240 /tmp å‰å¢åŠ  -x /tmp/session -x /tmp/upload # mkdir /tmp/session # mkdir /tmp/upload # chown nobody:nobody /tmp/upload # chmod 0770 /tmp/upload","categories":[{"name":"ops","slug":"ops","permalink":"http://debug.cool/categories/ops/"}],"tags":[]},{"title":"Ubuntuæ­å»ºæ¸—é€æµ‹è¯•ç¯å¢ƒ","slug":"tipsLinuxBaseConfig","date":"2017-02-16T10:44:00.000Z","updated":"2021-05-07T07:30:39.985Z","comments":true,"path":"2017/02/16/tipsLinuxBaseConfig/","link":"","permalink":"http://debug.cool/2017/02/16/tipsLinuxBaseConfig/","excerpt":"","text":"å¸¸ç”¨å·¥å…· 1sudo apt-get install vim git gedit wget curl vlc whois meld deepin-screenshot qbittorrent transmission fonts-wqy-microhei mtr unrar unrar-free ascii unicode filezilla unrar unace rar unrar p7zip zip unzip p7zip-full p7zip-rar file-roller -y ç¼–è¾‘å™¨ vim gedit vscode ä¸‹è½½å·¥å…· wget curl uget æˆªå›¾å·¥å…· deepin-screenshot flameshot ä¸­æ–‡å­—ä½“ fonts-wqy-microhei å‹ç¼©å·¥å…· unrar unrar-free p7zip zip unzip p7zip-full p7zip-rar ASCII ç¼–ç å’Œ UNICODE ç¼–ç  ascii unicode whois æŸ¥è¯¢å·¥å…· whois æ–‡ä»¶æ¯”è¾ƒå·¥å…· meld BT ä¸‹è½½å·¥å…· qbittorrent transmission mtr Office è½¯ä»¶ wps for linux / only office ç³»ç»Ÿæ¸…ç†å·¥å…·ï¼ˆStacerï¼‰ 1sudo apt install stacer æ€ç»´å¯¼å›¾ mindmaster å³æ—¶é€šè®¯è½¯ä»¶ telegram 123sudo add-apt-repository ppa:atareao/telegramsudo apt-get updatesudo apt-get install telegram é‚®ä»¶å·¥å…·ï¼šthunderbird 1sudo apt install thunderbird JAVAï¼šOracle-Java-11ï¼ˆä¸‹è½½åè§£å‹ï¼‰ 1234567891011121314151617181920212223# åˆ›å»ºæ–‡ä»¶å¤¹å¹¶æ‹·è´sudo mkdir -p /usr/local/javasudo cp -r jdk-11.0.7/ /usr/local/java/# æ¥ä¸‹æ¥é…ç½®JDKçš„ç¯å¢ƒå˜é‡sudo gedit /etc/profile# å¤åˆ¶ä»¥ä¸‹å†…å®¹è¿½åŠ åˆ°æ–‡ä»¶æœ«å°¾JAVA_HOME=/usr/local/java/jdk-11.0.7PATH=$PATH:$HOME/bin:$JAVA_HOME/binexport JAVA_HOMEexport PATH# å‘Šè¯‰ç³»ç»ŸJDKçš„ä½ç½®ï¼Œæœ€å2è¡Œä»£ç ä¸æ˜¯é‡å¤ï¼Œæ˜¯è¦æ‰§è¡Œ2æ¬¡sudo update-alternatives --install &quot;/usr/bin/java&quot; &quot;java&quot; &quot;/usr/local/java/jdk-11.0.7/bin/java&quot; 1sudo update-alternatives --install &quot;/usr/bin/javac&quot; &quot;javac&quot; &quot;/usr/local/java/jdk-11.0.7/bin/javac&quot; 1sudo update-alternatives --install &quot;/usr/bin/javaws&quot; &quot;javaws&quot; &quot;/usr/local/java/jdk-11.0.7/bin/javaws&quot; 1sudo update-alternatives --install &quot;/usr/bin/javaws&quot; &quot;javaws&quot; &quot;/usr/local/java/jdk-11.0.7/bin/javaws&quot; 1# è®¾ç½®æ–°çš„JDKä¸ºé»˜è®¤,ä»£ç ä¹Ÿæ˜¯æ‰§è¡Œ2æ¬¡sudo update-alternatives --set java /usr/local/java/jdk-11.0.7/bin/javasudo update-alternatives --set javac /usr/local/java/jdk-11.0.7/bin/javac# é‡è½½Profileæ–‡ä»¶source /etc/profile# è¾“å…¥å‘½ä»¤æŸ¥çœ‹Javaç‰ˆæœ¬å·java -version# è‡³æ­¤å°±åº”è¯¥å®‰è£…æˆåŠŸäº† ä¸­æ–‡è¾“å…¥æ³•ï¼šibus 12345sudo apt install ibus ibus-pinyin ibus-sunpinyin ibus-rimeim-configrebootæ·»åŠ æ™ºèƒ½æ‹¼éŸ³è¾“å…¥æ³•ibus-setup #å–æ¶ˆembedå‹¾é€‰é¡¹ ç¼–è¾‘å™¨ sublime text3ï¼ˆç”¨æ¥å†™ python è¿˜ä¸é”™ï¼‰ 1234wget -qO - https://download.sublimetext.com/sublimehq-pub.gpg | sudo apt-key add -echo &quot;deb https://download.sublimetext.com/ apt/stable/&quot; | sudo tee /etc/apt/sources.list.d/sublime-text.listsudo apt update &amp;&amp; sudo apt install sublime-textè¦åˆ é™¤ç¼–è¾‘å™¨ï¼Œè¯·è¿è¡Œå‘½ä»¤ï¼šsudo apt remove --autoremove sublime-text è™šæ‹Ÿæœº 1VMware Workstation / VirtualBox å®‰è£… docker 12345678910111213141516171819202122232425262728293031sudo apt-get updatesudo apt-get install \\ apt-transport-https \\ ca-certificates \\ curl \\ gnupg-agent \\ software-properties-commoncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo apt-key add -sudo apt-key fingerprint 0EBFCD88sudo add-apt-repository \\ &quot;deb [arch=amd64] https://download.docker.com/linux/ubuntu \\ $(lsb_release -cs) \\ stable&quot;sudo apt-get updatesudo apt-get install docker-ce docker-ce-cli containerd.io docker-composesudo docker run hello-world #veriydocker -v #æŸ¥çœ‹docker-ceç‰ˆæœ¬sudo usermod -aG docker $&#123;USER&#125; #å°†useråŠ å…¥dockerç»„su - $&#123;USER&#125; #åº”ç”¨æ–°çš„ç»„æˆå‘˜èº«ä»½ï¼Œç³»ç»Ÿå°†æç¤ºæ‚¨è¾“å…¥ç”¨æˆ·å¯†ç ä»¥ç»§ç»­sudo systemctl enable docker #è®¾ç½®dockerå¼€æœºè‡ªå¯åŠ¨dockeré•œåƒåŠ é€Ÿï¼ˆæˆ‘ç”¨çš„é˜¿é‡Œäº‘çš„é•œåƒåŠ é€Ÿï¼‰sudo mkdir -p /etc/dockersudo tee /etc/docker/daemon.json &lt;&lt;-&#x27;EOF&#x27;&#123; &quot;registry-mirrors&quot;: [&quot;https://hecn3mxv.mirror.aliyuncs.com&quot;]&#125;EOFsudo systemctl daemon-reloadsudo systemctl restart dockersudo systemctl enable docker Gnome æ‰©å±• 1sudo apt install gnome-tweaks chrome-gnome-shell CPU å¾®ç  12sudo apt install intel-microcode #é€‚ç”¨äºIntelçš„CPUsudo apt install amd64-microcode #é€‚ç”¨äºAMDçš„CPU ä¼˜åŒ–ç¬”è®°æœ¬ç”µæ± å¯¿å‘½ï¼ˆä½¿ç”¨ tlp è‡ªåŠ¨ä¼˜åŒ–ï¼‰ 1sudo apt install tlp tlp-rdw Firejail æ²™ç®± 1sudo apt install firejail Chrome æµè§ˆå™¨ æ¸—é€æµ‹è¯•å·¥å…· æ·»åŠ  kali æºå’Œæ•°å­—ç­¾å 12345678#æ·»åŠ kaliæºï¼Œå°†ä¸‹é¢ä¸¤è¡Œå†™å…¥è¯¥æ–‡ä»¶sudo vim /etc/apt/sources.listdeb http://mirrors.cloud.tencent.com/kali/ kali-rolling main contrib non-freedeb-src http://mirrors.cloud.tencent.com/kali/ kali-rolling main contrib non-free#æ·»åŠ æ•°å­—ç­¾åwget -q -O - https://archive.kali.org/archive-key.asc | apt-key add å®‰è£… metasploit-framework 12345# ç›´æ¥å®‰è£…msfå°±å¯ä»¥äº†sudo apt update &amp;&amp; sudo apt install metaspliot-framework# æ›´æ–°msfsudo apt update; sudo apt install metasploit-framework searchsploit è¿™æ˜¯ä¸€ä¸ª Exploit-DB çš„å‘½ä»¤è¡Œæœç´¢å·¥å…·ï¼Œå®ƒè¿˜å…è®¸æ‚¨éšèº«æºå¸¦æ¼æ´åˆ©ç”¨æ•°æ®åº“çš„å‰¯æœ¬ã€‚ 12345# å®‰è£…æ¼æ´åˆ©ç”¨æ•°æ®åº“sudo apt update &amp;&amp; sudo apt -y install exploitdb# æ›´æ–°æ•°æ®åº“searchsploit -u nmapã€sqlmap 1sudo apt install nmap sqlmap å®‰è£… wireshark 123456789sudo apt install wireshark# å®‰è£…æ—¶ï¼Œç³»ç»Ÿå°†è¯¢é—®ä½ æ˜¯å¦å…è®¸éè¶…çº§ç”¨æˆ·æ•è·æ•°æ®åŒ…ã€‚é€‰æ‹©â€œYesâ€å…è®¸ï¼Œé€‰æ‹©â€œNoâ€é™åˆ¶éè¶…çº§ç”¨æˆ·æ•è·æ•°æ®åŒ…ï¼Œæœ€åå®Œæˆå®‰è£…# å¦‚æœåœ¨ä¸Šä¸€æ¬¡å®‰è£…ä¸­é€‰æ‹©äº†â€œNoâ€ï¼Œåˆ™ä»¥ root ç”¨æˆ·èº«ä»½è¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼šsudo dpkg-reconfigure wireshark-commonsudo usermod -aG wireshark $(whoami) # ä½¿ç”¨ usermod å‘½ä»¤å°†è‡ªå·±æ·»åŠ åˆ° wireshark ç»„sudo groupadd wireshark # æ·»åŠ wiresharkç”¨æˆ·ç»„sudo chgrp wireshark /usr/bin/dumpcap # å°†dumpcapæ›´æ”¹ä¸ºwiresharkç”¨æˆ·ç»„sudo chmod 4755 /usr/bin/dumpcap # è®©wiresharkç”¨æˆ·ç»„æœ‰rootæƒé™ä½¿ç”¨dumpcapsudo gpasswd -a simple wireshark # å°†æ‰€ä½¿ç”¨çš„ç”¨æˆ·ååŠ å…¥wiresharkç”¨æˆ·ç»„ï¼Œä¾‹å¦‚simple å®‰è£… openvas OpenVAS æ˜¯ä¸€ä¸ªå¯ç”¨äºæ¼æ´æ‰«æå’Œæ¼æ´ç®¡ç†çš„å¼€æºå¥—ä»¶ 123456789sudo apt-get install openvassudo apt-get install sqlite3sudo openvas-nvt-syncsudo openvas-scapdata-syncsudo openvas-certdata-syncsudo service openvas-scanner restartsudo service openvas-manager restartsudo openvasmd --rebuild --progress hash ç ´è§£å·¥å…· 1sudo apt install hashid hachcat johnny æˆªæ–­å·¥å…·ï¼šburpsuite msf å›¾å½¢åŒ–ç•Œé¢ï¼škage è¿™ä¸ªå·¥å…·è™½ç„¶è¿˜ä¸æ˜¯å¾ˆå®Œå–„ï¼Œä½†æ˜¯åšä¸€äº›æ¦‚å¿µéªŒè¯è¿˜æ˜¯å¯ä»¥çš„ï¼ ä¸»æœºå‘ç°å·¥å…· 1sudo apt install arping netdiscover fping hping3 ç«¯å£æ‰«æå·¥å…· 1sudo apt install nmap masscan nast koncker ç›®å½•æ‰«æå·¥å…· 1234567891011# dirbsudo apt install dirb# Dirmapï¼šä¸€æ¬¾é«˜çº§Webç›®å½•æ–‡ä»¶æ‰«æå·¥å…·git clone https://github.com/H4ckForJob/dirmap.git &amp;&amp; cd dirmap &amp;&amp; python3 -m pip install -r requirement.txt# dirsearchgit clone https://github.com/maurosoria/dirsearch# Webdirscanï¼šwebdirscanæ˜¯ä¸€ä¸ªå¾ˆç®€å•çš„å¤šçº¿ç¨‹Webç›®å½•æ‰«æå·¥å…·ï¼Œå®ƒæ˜¯ä½¿ç”¨Pythonè¯­è¨€ç¼–å†™çš„ï¼Œä¸»è¦è°ƒç”¨äº†requestsç¬¬ä¸‰æ–¹åº“å®ç°git clone https://github.com/TuuuNya/webdirscan/ ç½‘ç«™æŒ‡çº¹è¯†åˆ« 1sudo apt install whatweb web æ‰«æå™¨ 12341ã€sudo apt install nikto shipfish zaproxy2ã€AWVS13 ï¼ˆç”¨dockerå®‰è£…å§ï¼Œæ–¹ä¾¿ä¸€ç‚¹ï¼‰3ã€nessus4ã€nexpose å¯†ç ç ´è§£ 1sudo apt install hydra john","categories":[{"name":"tips","slug":"tips","permalink":"http://debug.cool/categories/tips/"}],"tags":[]},{"title":"ç¢ç¢å¿µ","slug":"lifeMind","date":"2016-08-01T10:44:00.000Z","updated":"2021-05-07T14:44:35.175Z","comments":true,"path":"2016/08/01/lifeMind/","link":"","permalink":"http://debug.cool/2016/08/01/lifeMind/","excerpt":"ä¸è¦æ”¾å¼ƒå¯¹ç”Ÿå‘½çš„æ€ç´¢ï¼Œå¯¹è‡ªå·±çš„çœŸå®ã€‚","text":"ä¸è¦æ”¾å¼ƒå¯¹ç”Ÿå‘½çš„æ€ç´¢ï¼Œå¯¹è‡ªå·±çš„çœŸå®ã€‚ 2020.08 å°†æ¯æ¬¡è°ˆåˆ¤ã€æ¯æ¬¡æ²Ÿé€šå½“ä½œæœ€åä¸€æ¬¡æœºä¼šã€‚å°±ä¼šè°¨æ…åœ°æ€è€ƒï¼Œä¸¥å¯†åœ°éƒ¨ç½²ï¼Œå…¨åŠ›ä¸€æåœ°è¡ŒåŠ¨ï¼Œæ‹¥æœ‰ç½®æ­»åœ°è€Œåç”Ÿçš„å‹‡æ°”ã€‚ 2020.06 æˆ‘ä¸å–œæ¬¢è¿‡äºæƒ…ç»ªåŒ–å’Œè¿‡äºæˆ¾æ°”çš„äººï¼Œç”šè‡³äºä¼šä¸‹æ„è¯†è¿œç¦»ï¼Œå› ä¸ºè‡ªçŸ¥æœ¬èº«ä¹Ÿä¸æ˜¯è€å¿ƒå¤ªå¥½è„¾æ°”å¤ªå¥½çš„äººã€‚ æˆ‘ä¸è§‰å¾—è‡ªå·±æœ‰æ”¹å˜ä»–äººçš„èƒ½åŠ›ï¼Œåªæ±‚å¥½ä¸å®¹æ˜“åŸ¹å…»èµ·çš„è€æ€§ä¸ä¼šéšæ„è¢«è€—å°½ã€‚ 2020.02 è¿™ä¸ªä¸–ç•Œæ²¡æœ‰é‚£ä¹ˆå®Œç¾ï¼Œä¹Ÿæ²¡æœ‰é‚£ä¹ˆä¸‘æ¶ã€‚æˆ‘ä»¬ä»äº‹ç½‘ç»œå®‰å…¨çš„ï¼Œæœ¬æ¥å°±æ˜¯ä¸é­”å…±èˆã€‚å¯¹ä¸–ç•Œçš„çƒ­çˆ±ï¼Œæ˜¯åœ¨çŸ¥é“å®ƒçš„ä¸å®Œç¾åï¼Œä¾ç„¶èƒ½çŸ¢å¿—ä¸æ¸ï¼Œå»å°½è‡ªå·±çš„ç»µè–„ä¹‹åŠ›ã€‚ 2019.10 å‡¡äº‹æœ‰äº¤ä»£ï¼Œä»¶ä»¶æœ‰ç€è½ï¼Œäº‹äº‹æœ‰å›éŸ³ã€‚ 2019.06 æ¯ä¸ªäººéƒ½æœ‰è‡ªå·±çš„é€‰æ‹©ã€‚ â€” QS.Wang 2019.05 â€œå¢åˆ æ”¹æŸ¥â€ä¸šåŠ¡ç³»ç»Ÿçš„æŠ€æœ¯å«é‡ä¸åœ¨äºå¦‚ä½•å®ç°ï¼Œè€Œåœ¨äºå¦‚ä½•å¯¹ç°å®ä¸–ç•Œçš„æŠ½è±¡ï¼Œå¦‚ä½•åº”å¯¹å¤æ‚çš„éœ€æ±‚åŠå˜æ›´ï¼Œå¦‚ä½•æŠŠæ§é¡¹ç›®çš„è´¨é‡å’Œè¿›åº¦ã€‚ èƒ½å¦å®ç°åŠŸèƒ½ï¼Œä¼šä¸ä¼šä¸€é—¨æ–°æŠ€æœ¯åªæ˜¯ç¨‹åºå‘˜çš„åŸºæœ¬è¦æ±‚ï¼Œè€Œä¸”åœ¨ä¿¡æ¯å¦‚æ­¤å‘è¾¾çš„å½“ä¸‹ï¼Œè¿™äº›å·²ç»æ²¡æœ‰ä»»ä½•éš¾åº¦ï¼Œä¹Ÿä¸ä¼šæˆä¸ºç¨‹åºå‘˜çš„æ ¸å¿ƒç«äº‰åŠ›ï¼Œè€Œæ·±å…¥ç†è§£è®¡ç®—æœºç³»ç»Ÿï¼Œè®¾è®¡èƒ½åŠ›ï¼Œé«˜è´¨é‡ä»£ç èƒ½åŠ›ï¼Œé¡¹ç›®çš„æŠŠæ§èƒ½åŠ›æ‰æ˜¯è¦åšæŒè‹¦ç»ƒçš„å†…åŠŸä¹Ÿæ˜¯æ¶æ„å¸ˆå’Œç å†œçš„æœ¬è´¨åŒºåˆ«ã€‚ â€” J.Xu 2016.08 æ‰€æ€æ‰€æƒ³ï¼Œæ‰€æ„Ÿæ‰€åšï¼Œæ„Ÿæè€Œæ‚²ã€‚ â€œå¤§éš¾ä¸´å¤´ï¼Œä½•ä»¥ä¸ºä¹‹ã€‚â€ â€œä¸–å—å›½æ©ï¼Œæ­»ç”Ÿç³»ä¹‹ã€‚â€ å¾€äº‹ä¸å›å¤´ï¼Œæœªæ¥ä¸å°†å°±ã€‚","categories":[{"name":"life","slug":"life","permalink":"http://debug.cool/categories/life/"}],"tags":[]},{"title":"åˆ©ç”¨å¤šæ ¸CPUåŠ é€ŸLinuxå‘½ä»¤","slug":"tipsLinuxCommand","date":"2015-08-13T23:22:03.000Z","updated":"2021-05-07T07:30:39.982Z","comments":true,"path":"2015/08/14/tipsLinuxCommand/","link":"","permalink":"http://debug.cool/2015/08/14/tipsLinuxCommand/","excerpt":"è¦æƒ³è®©Linuxå‘½ä»¤ä½¿ç”¨æ‰€æœ‰çš„CPUå†…æ ¸ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°GNU Parallelå‘½ä»¤ï¼Œå®ƒè®©æˆ‘ä»¬æ‰€æœ‰çš„CPUå†…æ ¸åœ¨å•æœºå†…åšç¥å¥‡çš„map-reduceæ“ä½œï¼Œå½“ç„¶ï¼Œè¿™è¿˜è¦å€ŸåŠ©å¾ˆå°‘ç”¨åˆ°çš„â€“pipes å‚æ•°(ä¹Ÿå«åšâ€“spreadstdin)ã€‚è¿™æ ·ï¼Œä½ çš„è´Ÿè½½å°±ä¼šå¹³å‡åˆ†é…åˆ°å„CPUä¸Šã€‚","text":"è¦æƒ³è®©Linuxå‘½ä»¤ä½¿ç”¨æ‰€æœ‰çš„CPUå†…æ ¸ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°GNU Parallelå‘½ä»¤ï¼Œå®ƒè®©æˆ‘ä»¬æ‰€æœ‰çš„CPUå†…æ ¸åœ¨å•æœºå†…åšç¥å¥‡çš„map-reduceæ“ä½œï¼Œå½“ç„¶ï¼Œè¿™è¿˜è¦å€ŸåŠ©å¾ˆå°‘ç”¨åˆ°çš„â€“pipes å‚æ•°(ä¹Ÿå«åšâ€“spreadstdin)ã€‚è¿™æ ·ï¼Œä½ çš„è´Ÿè½½å°±ä¼šå¹³å‡åˆ†é…åˆ°å„CPUä¸Šã€‚ ä½ æ˜¯å¦æ›¾ç»æœ‰è¿‡è¦è®¡ç®—ä¸€ä¸ªéå¸¸å¤§çš„æ•°æ®(å‡ ç™¾ GB)çš„éœ€æ±‚ï¼Ÿæˆ–åœ¨é‡Œé¢æœç´¢ï¼Œæˆ–å…¶å®ƒæ“ä½œâ€”â€”ä¸€äº›æ— æ³•å¹¶è¡Œçš„æ“ä½œã€‚æ•°æ®ä¸“å®¶ä»¬ï¼Œæˆ‘æ˜¯åœ¨å¯¹ä½ ä»¬è¯´ã€‚ä½ å¯èƒ½æœ‰ä¸€ä¸ª 4 æ ¸æˆ–æ›´å¤šæ ¸çš„ CPUï¼Œä½†æˆ‘ä»¬åˆé€‚çš„å·¥å…·ï¼Œä¾‹å¦‚ grep, bzip2, wc, awk, sedç­‰ç­‰ï¼Œéƒ½æ˜¯å•çº¿ç¨‹çš„ï¼Œåªèƒ½ä½¿ç”¨ä¸€ä¸ª CPU å†…æ ¸ã€‚ å€Ÿç”¨å¡é€šäººç‰© Cartman çš„è¯ï¼Œâ€œå¦‚ä½•æˆ‘èƒ½ä½¿ç”¨è¿™äº›å†…æ ¸â€? è¦æƒ³è®© Linux å‘½ä»¤ä½¿ç”¨æ‰€æœ‰çš„ CPU å†…æ ¸ï¼Œæˆ‘ä»¬éœ€è¦ç”¨åˆ°GNU Parallelå‘½ä»¤ï¼Œå®ƒè®©æˆ‘ä»¬æ‰€æœ‰çš„ CPU å†…æ ¸åœ¨å•æœºå†…åšç¥å¥‡çš„ map-reduce æ“ä½œï¼Œå½“ç„¶ï¼Œè¿™è¿˜è¦å€ŸåŠ©å¾ˆå°‘ç”¨åˆ°çš„â€“pipes å‚æ•°(ä¹Ÿå«åšâ€“spreadstdin)ã€‚è¿™æ ·ï¼Œä½ çš„è´Ÿè½½å°±ä¼šå¹³å‡åˆ†é…åˆ°å„ CPU ä¸Šï¼ŒçœŸçš„ã€‚ BZIP2 bzip2 æ˜¯æ¯” gzip æ›´å¥½çš„å‹ç¼©å·¥å…·ï¼Œä½†å®ƒå¾ˆæ…¢ï¼åˆ«æŠ˜è…¾äº†ï¼Œæˆ‘ä»¬æœ‰åŠæ³•è§£å†³è¿™é—®é¢˜ã€‚ ä»¥å‰çš„åšæ³•ï¼š 1cat bigfile.bin | bzip2 â€“best &gt; compressedfile.bz2 ç°åœ¨è¿™æ ·ï¼š 1cat bigfile.bin | parallel â€“pipe â€“recend â€ -k bzip2 â€“best &gt; compressedfile.bz2 å°¤å…¶æ˜¯é’ˆå¯¹ bzip2ï¼ŒGNU parallel åœ¨å¤šæ ¸ CPU ä¸Šæ˜¯è¶…çº§çš„å¿«ã€‚ä½ ä¸€ä¸ç•™ç¥ï¼Œå®ƒå°±æ‰§è¡Œå®Œæˆäº†ã€‚ GREP å¦‚æœä½ æœ‰ä¸€ä¸ªéå¸¸å¤§çš„æ–‡æœ¬æ–‡ä»¶ï¼Œä»¥å‰ä½ å¯èƒ½ä¼šè¿™æ ·ï¼š 1grep pattern bigfile.txt ç°åœ¨ä½ å¯ä»¥è¿™æ ·ï¼š 1cat bigfile.txt | parallel â€“pipe grep â€˜patternâ€™ æˆ–è€…è¿™æ ·ï¼š 1cat bigfile.txt | parallel â€“block 10M â€“pipe grep â€˜patternâ€™ è¿™ç¬¬äºŒç§ç”¨æ³•ä½¿ç”¨äº† â€“block 10M å‚æ•°ï¼Œè¿™æ˜¯è¯´æ¯ä¸ªå†…æ ¸å¤„ç† 1 åƒä¸‡è¡Œâ€”â€”ä½ å¯ä»¥ç”¨è¿™ä¸ªå‚æ•°æ¥è°ƒæ•´æ¯ä¸ª CUP å†…æ ¸å¤„ç†å¤šå°‘è¡Œæ•°æ®ã€‚ AWK ä¸‹é¢æ˜¯ä¸€ä¸ªç”¨ awk å‘½ä»¤è®¡ç®—ä¸€ä¸ªéå¸¸å¤§çš„æ•°æ®æ–‡ä»¶çš„ä¾‹å­ã€‚ å¸¸è§„ç”¨æ³•ï¼š 1cat rands20M.txt | awk â€˜&#123;s+=$1&#125; END &#123;print s&#125;â€™ ç°åœ¨è¿™æ ·ï¼š 1cat rands20M.txt | parallel â€“pipe awk \\&#x27;&#123;s+=\\$1&#125; END &#123;print s&#125;\\â€™ | awk â€˜&#123;s+=$1&#125; END &#123;print s&#125;â€™ è¿™ä¸ªæœ‰ç‚¹å¤æ‚ï¼šparallelå‘½ä»¤ä¸­çš„â€“pipeå‚æ•°å°†catè¾“å‡ºåˆ†æˆå¤šä¸ªå—åˆ†æ´¾ç»™awkè°ƒç”¨ï¼Œå½¢æˆäº†å¾ˆå¤šå­è®¡ç®—æ“ä½œã€‚è¿™äº›å­è®¡ç®—ç»è¿‡ç¬¬äºŒä¸ªç®¡é“è¿›å…¥äº†åŒä¸€ä¸ªawkå‘½ä»¤ï¼Œä»è€Œè¾“å‡ºæœ€ç»ˆç»“æœã€‚ç¬¬ä¸€ä¸ªawkæœ‰ä¸‰ä¸ªåæ–œæ ï¼Œè¿™æ˜¯GNU parallelè°ƒç”¨awkçš„éœ€è¦ã€‚ WC æƒ³è¦æœ€å¿«çš„é€Ÿåº¦è®¡ç®—ä¸€ä¸ªæ–‡ä»¶çš„è¡Œæ•°å—ï¼Ÿ ä¼ ç»Ÿåšæ³•ï¼š 1wc -l bigfile.txt ç°åœ¨ä½ åº”è¯¥è¿™æ ·ï¼š 1cat bigfile.txt | parallel â€“pipe wc -l | awk â€˜&#123;s+=$1&#125; END &#123;print s&#125;â€™ éå¸¸çš„å·§å¦™ï¼Œå…ˆä½¿ç”¨parallelå‘½ä»¤mappingå‡ºå¤§é‡çš„wc -lè°ƒç”¨ï¼Œå½¢æˆå­è®¡ç®—ï¼Œæœ€åé€šè¿‡ç®¡é“å‘é€ç»™awkè¿›è¡Œæ±‡æ€»ã€‚ SED æƒ³åœ¨ä¸€ä¸ªå·¨å¤§çš„æ–‡ä»¶é‡Œä½¿ç”¨ sed å‘½ä»¤åšå¤§é‡çš„æ›¿æ¢æ“ä½œå—ï¼Ÿ å¸¸è§„åšæ³•ï¼š 1sed s^old^new^g bigfile.txt ç°åœ¨ä½ å¯ä»¥ï¼š 1cat bigfile.txt | parallel â€“pipe sed s^old^new^g ç„¶åä½ å¯ä»¥ä½¿ç”¨ç®¡é“æŠŠè¾“å‡ºå­˜å‚¨åˆ°æŒ‡å®šçš„æ–‡ä»¶é‡Œã€‚","categories":[{"name":"tips","slug":"tips","permalink":"http://debug.cool/categories/tips/"}],"tags":[]},{"title":"Plan Do Review","slug":"lifePersonPlan","date":"2015-03-20T10:44:00.000Z","updated":"2021-05-07T07:30:39.981Z","comments":true,"path":"2015/03/20/lifePersonPlan/","link":"","permalink":"http://debug.cool/2015/03/20/lifePersonPlan/","excerpt":"å‡¡äº‹è±«åˆ™ç«‹ï¼Œä¸è±«åˆ™åºŸã€‚è¨€å‰å®šåˆ™ä¸è·²ï¼Œäº‹å‰å®šåˆ™ä¸å›°ï¼Œè¡Œå‰å®šåˆ™ä¸ç–šï¼Œé“å‰å®šåˆ™ä¸ç©·ã€‚","text":"å‡¡äº‹è±«åˆ™ç«‹ï¼Œä¸è±«åˆ™åºŸã€‚è¨€å‰å®šåˆ™ä¸è·²ï¼Œäº‹å‰å®šåˆ™ä¸å›°ï¼Œè¡Œå‰å®šåˆ™ä¸ç–šï¼Œé“å‰å®šåˆ™ä¸ç©·ã€‚ ä¸ªäººæˆé•¿ ç¡®ç«‹ä¸ªäººæ–¹å‘ï¼Œç»“åˆå·¥ä½œå†…å®¹ï¼Œæ‰¾å‡ºå¯¹åº”çŸ­æ¿ è¯¥é¢†åŸŸä¸»è¦ä¸“å®¶ä»¬çš„å·¥ä½œæ˜¯å¦äº†è§£ï¼Ÿ ç›¸å…³ç½‘ç»œåè®®ï¼Œæ–‡ä»¶æ ¼å¼æ˜¯å¦ç†Ÿæ‚‰ï¼Ÿ ç›¸å…³çš„æŠ€æœ¯å’Œä¸»è¦å·¥å…·æ˜¯å¦éƒ½çœ‹è¿‡ï¼Ÿç”¨è¿‡ï¼Ÿ é˜…è¯»åªæ˜¯å­¦ä¹ è¿‡ç¨‹çš„èµ·ç‚¹ï¼Œä¸èƒ½æ­¢äºé˜…è¯» å·¥å…·çš„æ¯ä¸ªå‚æ•°æ¯ä¸ªèœå•éƒ½è¦çœ‹ã€è¦è¯•ï¼› å­¦ä¹ ç½‘ç»œåè®®è¦å®é™…æŠ“åŒ…åˆ†æï¼Œå­¦ä¹ æ–‡ä»¶æ ¼å¼è¦è¯»ä»£ç å®ç°ï¼› å­¦ä¹ è€æ¼æ´ä¸€å®šè¦è°ƒè¯•ï¼Œææ‡‚åˆ«äººä»£ç æ¯ä¸€ä¸ªå­—èŠ‚çš„æ„ä¹‰ï¼Œä¹‹åè¦å®Œå…¨è‡ªå·±é‡å†™ä¸€ä¸ªExploitï¼› ç»†èŠ‚ã€ç»†èŠ‚ã€ç»†èŠ‚ï¼Œåˆ¨æ ¹é—®åº•ï¼› å»ºç«‹å­¦ä¹ å‚è€ƒç›®æ ‡ çŸ­æœŸå‚è€ƒä»€ä¹ˆï¼Ÿæ¯”è‡ªå·±ä¼˜ç§€çš„åŒé¾„äºº é˜…è¯»ä»–ä»¬çš„æ–‡ç« å’Œå…¶ä»–å·¥ä½œæˆæœï¼Œä»ç»†èŠ‚ä¸­è§‚å¯Ÿä»–ä»¬çš„å­¦ä¹ æ–¹å¼å’Œå·¥ä½œæ–¹å¼ã€‚ ä¸­æœŸå‚è€ƒä»€ä¹ˆï¼Ÿä½ çš„æ–¹å‘ä¸Šçš„ä¸šå†…ä¸“å®¶ äº†è§£ä»–ä»¬çš„æˆé•¿è½¨è¿¹ï¼Œè·Ÿè¸ªä»–ä»¬å…³æ³¨çš„å†…å®¹ã€‚ é•¿æœŸå‚è€ƒä»€ä¹ˆï¼Ÿä¸šå†…è€ç‰Œä¼ä¸šå’Œå…ˆé”‹ä¼ä¸š æŠŠæ¡è¡Œä¸šå‘å±•ã€æŠ€æœ¯è¶‹åŠ¿ï¼Œä¸ºæœªæ¥åšç§¯ç´¯ã€‚ æ¨èçš„å­¦ä¹ æ–¹å¼ ä»¥å·¥å…·ä¸ºçº¿ç´¢ ä¸€ä¸ªæ¯”è¾ƒçœäº‹çš„å­¦ä¹ ç›®å½•ï¼šKali Linux å­¦ä¹ æ€è·¯ï¼Œä»¥Metasploitä¸ºä¾‹ï¼š éå†æ¯ä¸ªå­ç›®å½•ï¼Œé™¤äº† Exploit é‡Œé¢è¿˜æœ‰ä»€ä¹ˆï¼Ÿ æ¯ä¸ªå·¥å…·åˆ†åˆ«æœ‰ä»€ä¹ˆåŠŸèƒ½ï¼ŸåŸç†æ˜¯ä»€ä¹ˆï¼Ÿæ¶‰åŠå“ªäº›çŸ¥è¯†ï¼Ÿ èƒ½å¦æ”¹è¿›ä¼˜åŒ–ï¼Ÿèƒ½å¦å‘å±•ã€ç»„åˆå‡ºæ–°çš„åŠŸèƒ½ï¼Ÿ ä»¥ä¸“å®¶ä¸ºçº¿ç´¢ ä½ çš„æŠ€æœ¯æ–¹å‘é‡Œæœ‰å“ªäº›ä¸“å®¶ï¼Ÿ ä»–ä»¬çš„é‚®ç®±ã€ä¸»é¡µã€ç¤¾äº¤ç½‘ç»œè´¦å·æ˜¯ä»€ä¹ˆï¼Ÿ ä»–ä»¬åœ¨è¯¥æ–¹å‘ä¸Šæœ‰å“ªäº›ä½œå“ï¼Ÿå‘è¡¨è¿‡å“ªäº›æ¼”è®²ï¼Ÿ è·Ÿè¸ªå…³æ³¨ï¼Œä¸€ä¸ªä¸€ä¸ªå­¦ã€‚ å¤„ç†å¥½å­¦ä¹ ã€å·¥ä½œå’Œç”Ÿæ´» å­¦ä¹ ã€å·¥ä½œå’Œç”Ÿæ´»æ˜¯çŸ›ç›¾ç»Ÿä¸€çš„ ä¸‰è€…éƒ½éœ€è¦æ—¶é—´ï¼Œä½ ä¸€å¤©åªæœ‰ 24 å°æ—¶ è°ƒå’ŒçŸ›ç›¾çš„å…³é”®ï¼šæé«˜æ•ˆç‡ã€‚ å¦‚ä½•æé«˜æ•ˆç‡ åšå¥½é¢„ç ”ï¼Œæ”¶é›†ç›¸å…³å‰äººæˆæœï¼Œé¿å…æ— è°“çš„é‡å¤åŠ³åŠ¨ åœ¨å¯è¡Œæ€§åˆ¤æ–­é˜¶æ®µï¼Œèƒ½æ‰¾åˆ°å·¥å…·å°±ä¸å†™ä»£ç ï¼Œèƒ½ç”¨è„šæœ¬è¯­è¨€å†™å°±ä¸è¦ç”¨ç¼–è¯‘è¯­è¨€ï¼Œèƒ½æŠŠå®Œç¾ä¸»ä¹‰æ”¾åœ¨æœ€ç»ˆå®ç°é˜¶æ®µ åšå¥½ç¬”è®°å¹¶å®šæœŸæ•´ç†ï¼Œé—å¿˜ä¼šè®©æ‰€æœ‰çš„æŠ•å…¥éƒ½ç™½è´¹ å¤šå’ŒåŒäº‹äº¤æµï¼Œåˆ«äººè¯´çš„ä¸€ä¸ªå·¥å…·çš„åå­—å¯èƒ½è®©ä½ èŠ‚çº¦æ•°å°æ—¶ å’–å•¡å¯ä»¥æé«˜æ€ç»´æ•ˆç‡ï¼Œè€Œä¸”åˆæ³• æ— è®ºæ€ä¹ˆæé«˜æ•ˆç‡ï¼Œè¦æˆä¸ºä¸“å®¶ï¼Œéƒ½éœ€è¦å¤§é‡çš„æ—¶é—´æŠ•å…¥","categories":[{"name":"life","slug":"life","permalink":"http://debug.cool/categories/life/"}],"tags":[]}],"categories":[{"name":"dev","slug":"dev","permalink":"http://debug.cool/categories/dev/"},{"name":"sec","slug":"sec","permalink":"http://debug.cool/categories/sec/"},{"name":"tips","slug":"tips","permalink":"http://debug.cool/categories/tips/"},{"name":"notes","slug":"notes","permalink":"http://debug.cool/categories/notes/"},{"name":"ops","slug":"ops","permalink":"http://debug.cool/categories/ops/"},{"name":"life","slug":"life","permalink":"http://debug.cool/categories/life/"}],"tags":[{"name":"Kafka","slug":"Kafka","permalink":"http://debug.cool/tags/Kafka/"},{"name":"Matplotlib","slug":"Matplotlib","permalink":"http://debug.cool/tags/Matplotlib/"}]}