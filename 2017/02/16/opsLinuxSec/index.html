<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>Linux主机安全策略部署 | debug.cool</title><meta name="description" content="搭了测试机记得初始化配置策略。  启用 authpriv 和 cron 系统日志审计 123456789危险等级:中级类型：安全基线描述：启用authpriv和cron系统日志审计。 authpriv －包括特权信息如用户名在内的认证活动 cron －与 cron 和 at 有关的计划任务信息。参考链接：无操作步骤：    1. 修改&#x2F;etc&#x2F;rsyslog.conf，添加或取消注释如下配置（中间"><meta property="og:type" content="article"><meta property="og:title" content="Linux主机安全策略部署"><meta property="og:url" content="http://debug.cool/2017/02/16/opsLinuxSec/index.html"><meta property="og:site_name" content="Kirk"><meta property="og:description" content="搭了测试机记得初始化配置策略。  启用 authpriv 和 cron 系统日志审计 123456789危险等级:中级类型：安全基线描述：启用authpriv和cron系统日志审计。 authpriv －包括特权信息如用户名在内的认证活动 cron －与 cron 和 at 有关的计划任务信息。参考链接：无操作步骤：    1. 修改&#x2F;etc&#x2F;rsyslog.conf，添加或取消注释如下配置（中间"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2017-02-16T10:44:00.000Z"><meta property="article:modified_time" content="2021-05-07T07:30:39.985Z"><meta property="article:author" content="ClanceyHuang"><meta property="article:tag" content="debug"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://debug.cool/2017/02/16/opsLinuxSec/index.html"><link rel="alternate" href="/atom.xml" title="Kirk" type="application/atom+xml"><link rel="icon" href="/avatar.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism-vs.css" type="text/css"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="/" target="_blank"><img class="img-circle img-rotate" src="/avatar.png" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">ClanceyHuang</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Low Level Researcher</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shanghai, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form" method="GET" action="https://www.baidu.com/s?"><div class="input-group"><input name="wd" type="text" class="form-control search-form-input" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="btn btn-flat search-form-submit"><i class="icon icon-search"></i></button></span></div></form></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/ClanceyHuang" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>Think Twice Code Once.</p></div></div></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/Kafka/" style="font-size:13px">Kafka</a> <a href="/tags/Matplotlib/" style="font-size:13px">Matplotlib</a></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/sec/">sec</a></p><p class="item-title"><a href="/2021/04/01/sandboxEscapePy3/" class="title">Python3的一个沙箱逃逸技巧</a></p><p class="item-date"><time datetime="2021-03-31T16:10:00.000Z" itemprop="datePublished">2021-04-01</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/tips/">tips</a></p><p class="item-title"><a href="/2021/01/20/tipsWSL/" class="title">Windows10下WSL开发环境搭建</a></p><p class="item-date"><time datetime="2021-01-20T14:44:00.000Z" itemprop="datePublished">2021-01-20</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/dev/">dev</a></p><p class="item-title"><a href="/2020/12/09/devDiyExpress/" class="title">DiyExpress - 自定义表达式计算引擎</a></p><p class="item-date"><time datetime="2020-12-08T16:00:00.000Z" itemprop="datePublished">2020-12-09</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/tips/">tips</a></p><p class="item-title"><a href="/2020/03/15/tipsDoubleSystem/" class="title">Window10下双系统grub修复</a></p><p class="item-date"><time datetime="2020-03-15T15:10:00.000Z" itemprop="datePublished">2020-03-15</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/dev/">dev</a></p><p class="item-title"><a href="/2020/02/03/devDiyForm/" class="title">自定义表单设计及实现方案</a></p><p class="item-date"><time datetime="2020-02-03T06:30:00.000Z" itemprop="datePublished">2020-02-03</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">Catalogue</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E7%94%A8-authpriv-%E5%92%8C-cron-%E7%B3%BB%E7%BB%9F%E6%97%A5%E5%BF%97%E5%AE%A1%E8%AE%A1"><span class="toc-number">1.</span> <span class="toc-text">启用 authpriv 和 cron 系统日志审计</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux-%E5%B8%90%E6%88%B7%E5%8F%A3%E4%BB%A4%E7%94%9F%E5%AD%98%E6%9C%9F%E7%AD%96%E7%95%A5"><span class="toc-number">2.</span> <span class="toc-text">Linux 帐户口令生存期策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%90%E5%88%B6-root-%E6%9D%83%E9%99%90%E7%94%A8%E6%88%B7%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="toc-number">3.</span> <span class="toc-text">限制 root 权限用户远程登录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux-%E5%B8%90%E6%88%B7%E8%B6%85%E6%97%B6%E8%87%AA%E5%8A%A8%E7%99%BB%E5%87%BA%E9%85%8D%E7%BD%AE"><span class="toc-number">4.</span> <span class="toc-text">Linux 帐户超时自动登出配置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#linux-%E6%9C%AA%E9%85%8D%E7%BD%AE%E8%B4%A6%E6%88%B7%E7%99%BB%E5%BD%95%E5%A4%B1%E8%B4%A5%E9%94%81%E5%AE%9A%E7%AD%96%E7%95%A5"><span class="toc-number">5.</span> <span class="toc-text">Linux 未配置账户登录失败锁定策略</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B3%BB%E7%BB%9F%E7%89%B9%E6%AE%8A%E7%9A%84%E7%9A%84%E7%94%A8%E6%88%B7%E5%B8%90%E5%8F%B7"><span class="toc-number">6.</span> <span class="toc-text">删除系统特殊的的用户帐号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%B3%BB%E7%BB%9F%E7%89%B9%E6%AE%8A%E7%9A%84%E7%BB%84%E5%B8%90%E5%8F%B7"><span class="toc-number">7.</span> <span class="toc-text">删除系统特殊的组帐号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E6%88%B7%E5%AF%86%E7%A0%81%E8%AE%BE%E7%BD%AE"><span class="toc-number">8.</span> <span class="toc-text">用户密码设置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E8%87%AA%E5%8A%A8%E6%B3%A8%E9%94%80%E5%B8%90%E5%8F%B7%E6%97%B6%E9%97%B4"><span class="toc-number">9.</span> <span class="toc-text">修改自动注销帐号时间</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%99%90%E5%88%B6-shell-%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95%E5%A4%A7%E5%B0%8F"><span class="toc-number">10.</span> <span class="toc-text">限制 Shell 命令记录大小</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B3%A8%E9%94%80%E6%97%B6%E5%88%A0%E9%99%A4%E5%91%BD%E4%BB%A4%E8%AE%B0%E5%BD%95"><span class="toc-number">11.</span> <span class="toc-text">注销时删除命令记录</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8%E4%B8%8B%E9%9D%A2%E7%9A%84%E5%91%BD%E4%BB%A4%E5%8A%A0%E9%9C%80%E8%A6%81%E7%9A%84%E7%94%A8%E6%88%B7%E7%BB%84%E5%92%8C%E7%94%A8%E6%88%B7%E5%B8%90%E5%8F%B7"><span class="toc-number">12.</span> <span class="toc-text">用下面的命令加需要的用户组和用户帐号</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%BB%E6%AD%A2%E4%BB%BB%E4%BD%95%E4%BA%BA-su-%E4%BD%9C%E4%B8%BA-root"><span class="toc-number">13.</span> <span class="toc-text">阻止任何人 su 作为 root</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-ssh-%E6%9C%8D%E5%8A%A1%E7%9A%84-root-%E7%99%BB%E5%BD%95%E6%9D%83%E9%99%90"><span class="toc-number">14.</span> <span class="toc-text">修改 ssh 服务的 root 登录权限</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-ssh-%E6%9C%8D%E5%8A%A1%E7%9A%84-sshd-%E7%AB%AF%E5%8F%A3"><span class="toc-number">15.</span> <span class="toc-text">修改 ssh 服务的 sshd 端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%97%AD%E7%B3%BB%E7%BB%9F%E4%B8%8D%E4%BD%BF%E7%94%A8%E7%9A%84%E6%9C%8D%E5%8A%A1"><span class="toc-number">16.</span> <span class="toc-text">关闭系统不使用的服务：</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%BB%E6%AD%A2%E7%B3%BB%E7%BB%9F%E5%93%8D%E5%BA%94%E4%BB%BB%E4%BD%95%E4%BB%8E%E5%A4%96%E9%83%A8%E5%86%85%E9%83%A8%E6%9D%A5%E7%9A%84-ping-%E8%AF%B7%E6%B1%82"><span class="toc-number">17.</span> <span class="toc-text">阻止系统响应任何从外部&#x2F;内部来的 ping 请求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9etchostconf%E6%96%87%E4%BB%B6"><span class="toc-number">18.</span> <span class="toc-text">修改&quot;&#x2F;etc&#x2F;host.conf&quot;文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8D%E5%85%81%E8%AE%B8%E4%BB%8E%E4%B8%8D%E5%90%8C%E7%9A%84%E6%8E%A7%E5%88%B6%E5%8F%B0%E8%BF%9B%E8%A1%8C-root-%E7%99%BB%E9%99%86"><span class="toc-number">19.</span> <span class="toc-text">不允许从不同的控制台进行 root 登陆</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A6%81%E6%AD%A2-control-alt-delete-%E9%94%AE%E7%9B%98%E5%85%B3%E9%97%AD%E5%91%BD%E4%BB%A4"><span class="toc-number">20.</span> <span class="toc-text">禁止 Control-Alt-Delete 键盘关闭命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%A8-chattr-%E5%91%BD%E4%BB%A4%E7%BB%99%E4%B8%8B%E9%9D%A2%E7%9A%84%E6%96%87%E4%BB%B6%E5%8A%A0%E4%B8%8A%E4%B8%8D%E5%8F%AF%E6%9B%B4%E6%94%B9%E5%B1%9E%E6%80%A7"><span class="toc-number">21.</span> <span class="toc-text">用 chattr 命令给下面的文件加上不可更改属性。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%99%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%8F%A3%E5%88%97%E8%A1%A8%E6%96%87%E4%BB%B6%E5%8A%A0%E9%94%81"><span class="toc-number">22.</span> <span class="toc-text">给系统服务端口列表文件加锁</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E6%96%87%E4%BB%B6%E6%9D%83%E9%99%90%E4%BF%AE%E6%94%B9"><span class="toc-number">23.</span> <span class="toc-text">系统文件权限修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%A2%9E%E5%8A%A0-dns"><span class="toc-number">24.</span> <span class="toc-text">增加 dns</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#hostname-%E4%BF%AE%E6%94%B9"><span class="toc-number">25.</span> <span class="toc-text">hostname 修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#selinux-%E4%BF%AE%E6%94%B9"><span class="toc-number">26.</span> <span class="toc-text">selinux 修改</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%97%AD-ipv6"><span class="toc-number">27.</span> <span class="toc-text">关闭 ipv6</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE-iptables"><span class="toc-number">28.</span> <span class="toc-text">设置 iptables</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B6%E5%AE%83%E8%AE%BE%E7%BD%AE%E9%A1%B9"><span class="toc-number">29.</span> <span class="toc-text">其它设置项</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#linux-%E8%B0%83%E6%95%B4%E7%B3%BB%E7%BB%9F%E6%97%B6%E5%8C%BA%E6%97%B6%E9%97%B4%E7%9A%84%E6%96%B9%E6%B3%95"><span class="toc-number">29.1.</span> <span class="toc-text">linux 调整系统时区&#x2F;时间的方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%BE%E7%BD%AE%E8%AF%AD%E8%A8%80"><span class="toc-number">29.2.</span> <span class="toc-text">设置语言</span></a></li></ol></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-opsLinuxSec" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">Linux主机安全策略部署</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2017/02/16/opsLinuxSec/" class="article-date"><time datetime="2017-02-16T10:44:00.000Z" itemprop="datePublished">2017-02-16</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/ops/">ops</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2017/02/16/opsLinuxSec/#comments" class="article-comment-link">Comments</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 5.6k(words)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 22(minutes)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p>搭了测试机记得初始化配置策略。</p><h2 id="启用-authpriv-和-cron-系统日志审计"><a class="markdownIt-Anchor" href="#启用-authpriv-和-cron-系统日志审计"></a> 启用 authpriv 和 cron 系统日志审计</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：启用authpriv和cron系统日志审计。 authpriv －包括特权信息如用户名在内的认证活动 cron －与 cron 和 at 有关的计划任务信息。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    1. 修改/etc/rsyslog.conf，添加或取消注释如下配置（中间的分隔符是tab）：</span><br><span class="line">        authpriv.* /var/log/secure</span><br><span class="line">        cron.* /var/log/cron</span><br><span class="line">    2. 重启rsyslog服务</span><br></pre></td></tr></table></figure><h2 id="linux-帐户口令生存期策略"><a class="markdownIt-Anchor" href="#linux-帐户口令生存期策略"></a> Linux 帐户口令生存期策略</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：口令老化（Password aging）是一种增强的系统口令生命期认证机制，能够确保用户的口令定期更换，提高系统安全性。</span><br><span class="line">参考链接：http://man7.org/linux/man-pages/man5/login.defs.5.html</span><br><span class="line">操作步骤：修改文件/etc/login.defs，配置PASS_MAX_DAYS 90</span><br></pre></td></tr></table></figure><h2 id="限制-root-权限用户远程登录"><a class="markdownIt-Anchor" href="#限制-root-权限用户远程登录"></a> 限制 root 权限用户远程登录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：限制root权限远程登录。先以普通权限用户远程登录后，再切换到超级管理员权限账号后执行相应操作，可以提升系统安全性。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    1. 修改文件/etc/ssh/sshd_config配置</span><br><span class="line">        PermitRootLogin no</span><br><span class="line">    2. 重启sshd服务</span><br></pre></td></tr></table></figure><h2 id="linux-帐户超时自动登出配置"><a class="markdownIt-Anchor" href="#linux-帐户超时自动登出配置"></a> Linux 帐户超时自动登出配置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：配置帐户超时自动登出，在用户输入空闲一段时间后自动断开。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    修改/etc/profile文件，设置定时账户自动登出时间</span><br><span class="line">    export TMOUT=180</span><br></pre></td></tr></table></figure><h2 id="linux-未配置账户登录失败锁定策略"><a class="markdownIt-Anchor" href="#linux-未配置账户登录失败锁定策略"></a> Linux 未配置账户登录失败锁定策略</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：设置账户登录失败锁定策略，加大用户口令被暴力破解的难度。</span><br><span class="line">参考链接：http://man7.org/linux/man-pages/man8/pam_tally2.8.html</span><br><span class="line">操作步骤：</span><br><span class="line">    设置连续输错5次口令，帐号锁定5分钟。</span><br><span class="line">    在进行此项安全加固工作前，请先检查PAM模块版本，搜索pam_tally2是否存在，如果pam_tally2存在，修改配置文件。【注意： 各系统配置不一，请根据当前系统进行适当配置，并仔细评估对系统的影响】</span><br><span class="line">    修复方案（仅供参考，请勿直接配置）：</span><br><span class="line">    centos</span><br><span class="line">        修改配置/etc/pam.d/password-auth（将配置添加到合适的位置）:</span><br><span class="line">        auth required pam_tally2.so deny=5 unlock_time=300 even_deny_root root_unlock_time=300</span><br><span class="line">        account required pam_tally2.so</span><br><span class="line"></span><br><span class="line">    ubuntu,debian：</span><br><span class="line">        修改配置/etc/pam.d/common-auth（将配置添加到合适的位置）:</span><br><span class="line">        auth required pam_tally2.so deny=5 unlock_time=300 even_deny_root root_unlock_time=300</span><br><span class="line">        修改配置/etc/pam.d/common-account参数（将配置添加到合适的位置）:</span><br><span class="line">        account required pam_tally2.so</span><br></pre></td></tr></table></figure><h2 id="删除系统特殊的的用户帐号"><a class="markdownIt-Anchor" href="#删除系统特殊的的用户帐号"></a> 删除系统特殊的的用户帐号</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：禁止所有默认的被操作系统本身启动的且不需要的帐号，当你第一次装上系统时就应该做此检查，Linux提供了各种帐号，你可能不需要，如果你不需要这个帐号，就移走它，你有的帐号越多，就越容易受到攻击。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    #为删除你系统上的用户，用下面的命令：</span><br><span class="line">    [root@c1gstudio]# userdel username</span><br><span class="line">    #批量删除方式</span><br><span class="line">    #这里删除&quot;adm lp sync shutdown halt mail news uucp operator games gopher ftp &quot;账号</span><br><span class="line">    #如果你开着ftp等服务可以把ftp账号保留下来。</span><br><span class="line">    for i in adm lp sync shutdown halt mail news uucp ope</span><br><span class="line">    rator games gopher ftp ;do userdel $i ;done</span><br></pre></td></tr></table></figure><h2 id="删除系统特殊的组帐号"><a class="markdownIt-Anchor" href="#删除系统特殊的组帐号"></a> 删除系统特殊的组帐号</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    [root@c1gstudio]# groupdel groupname</span><br><span class="line">    #批量删除方式</span><br><span class="line">    for i in adm lp mail news uucp games dip pppusers pop</span><br><span class="line">    users slipusers ;do groupdel $i ;done</span><br></pre></td></tr></table></figure><h2 id="用户密码设置"><a class="markdownIt-Anchor" href="#用户密码设置"></a> 用户密码设置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：安装linux时默认的密码最小长度是5个字节，但这并不够，要把它设为8个字节。修改最短密码长度需要编辑login.defs文件#vi /etc/login.defs</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    PASS_MAX_DAYS  99999  ##密码设置最长有效期（默认值）</span><br><span class="line">    PASS_MIN_DAYS  0    ##密码设置最短有效期</span><br><span class="line">    PASS_MIN_LEN  5    ##设置密码最小长度，将5改为8</span><br><span class="line">    PASS_WARN_AGE  7    ##提前多少天警告用户密码即将过期。</span><br><span class="line">    然后修改Root密码</span><br><span class="line">    #passwd root</span><br><span class="line">    New UNIX password:</span><br><span class="line">    Retype new UNIX password:</span><br><span class="line">    passwd: all authentication tokens updated successfully.</span><br></pre></td></tr></table></figure><h2 id="修改自动注销帐号时间"><a class="markdownIt-Anchor" href="#修改自动注销帐号时间"></a> 修改自动注销帐号时间</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：自动注销帐号的登录，在Linux系统中root账户是具有最高特权的。如果系统管理员在离开系统之前忘记注销root账户，那将会带来很大的安全隐患，应该让系统会自动注销。通过修改账户中“TMOUT”参数，可以实现此功能。TMOUT按秒计算。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    编辑你的profile文件（vi /etc/profile）,在&quot;HISTSIZE=&quot;后面加入下面这行：</span><br><span class="line">    TMOUT=300</span><br><span class="line">    # 300，表示300秒，也就是表示5分钟。这样，如果系统中登陆的用户在5分钟内都没有动作，那么系统会自动注销这个账户。</span><br></pre></td></tr></table></figure><h2 id="限制-shell-命令记录大小"><a class="markdownIt-Anchor" href="#限制-shell-命令记录大小"></a> 限制 Shell 命令记录大小</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：默认情况下，bash shell会在文件$HOME/.bash_history中存放多达500条命令记录(根据具体的系统不同，默认记录条数不同)。系统中每个用户的主目录下都有一个这样的文件。在此笔者强烈建议限制该文件的大小。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    您可以编辑/etc/profile文件，修改其中的选项如下:</span><br><span class="line"></span><br><span class="line">    HISTFILESIZE=30或HISTSIZE=30</span><br><span class="line">    #vi /etc/profile</span><br><span class="line">    HISTSIZE=30</span><br></pre></td></tr></table></figure><h2 id="注销时删除命令记录"><a class="markdownIt-Anchor" href="#注销时删除命令记录"></a> 注销时删除命令记录</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    编辑/etc/skel/.bash_logout文件，增加如下行:</span><br><span class="line"></span><br><span class="line">    rm -f $HOME/.bash_history</span><br><span class="line">    这样，系统中的所有用户在注销时都会删除其命令记录。</span><br><span class="line">    如果只需要针对某个特定用户，如root用户进行设置，则可只在该用户的主目录下修改/$HOME/.bash_history文件，增加相同的一行即可。</span><br></pre></td></tr></table></figure><h2 id="用下面的命令加需要的用户组和用户帐号"><a class="markdownIt-Anchor" href="#用下面的命令加需要的用户组和用户帐号"></a> 用下面的命令加需要的用户组和用户帐号</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    [root@c1gstudio]# groupadd</span><br><span class="line">    例如：增加website 用户组，groupadd website</span><br><span class="line">    然后调用vigr命令查看已添加的用户组</span><br><span class="line">    用下面的命令加需要的用户帐号</span><br><span class="line">    [root@c1gstudio]# useradd username –g website //添加用户到website组（作为webserver的普通管理员，而非root管理员）</span><br><span class="line">    然后调用vipw命令查看已添加的用户</span><br><span class="line">    用下面的命令改变用户口令（至少输入8位字母和数字组合的密码，并将密码记录于本地机的专门文档中，以防遗忘）</span><br><span class="line">    [root@c1gstudio]# passwd username</span><br></pre></td></tr></table></figure><h2 id="阻止任何人-su-作为-root"><a class="markdownIt-Anchor" href="#阻止任何人-su-作为-root"></a> 阻止任何人 su 作为 root</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    如果你不想任何人能够su作为root,你能编辑/etc/pam.d/su加下面的行：</span><br><span class="line"></span><br><span class="line">    #vi /etc/pam.d/su</span><br><span class="line">    auth sufficient /lib/security/$ISA/pam_rootok.so debug</span><br><span class="line">    auth required /lib/security/$ISA/pam_wheel.so group=website</span><br><span class="line">    意味着仅仅website组的用户可以su作为root.</span><br></pre></td></tr></table></figure><h2 id="修改-ssh-服务的-root-登录权限"><a class="markdownIt-Anchor" href="#修改-ssh-服务的-root-登录权限"></a> 修改 ssh 服务的 root 登录权限</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    修改ssh服务配置文件，使的ssh服务不允许直接使用root用户来登录，这样减少系统被恶意登录攻击的机会。</span><br><span class="line"></span><br><span class="line">    #vi /etc/ssh/sshd_config</span><br><span class="line">    PermitRootLogin yes</span><br><span class="line">    将这行前的＃去掉后，修改为：</span><br><span class="line"></span><br><span class="line">    PermitRootLogin no</span><br></pre></td></tr></table></figure><h2 id="修改-ssh-服务的-sshd-端口"><a class="markdownIt-Anchor" href="#修改-ssh-服务的-sshd-端口"></a> 修改 ssh 服务的 sshd 端口</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：ssh默认会监听在22端口，你可以修改至6022端口以避过常规的扫描。</span><br><span class="line">注意：修改端口错误可能会导致你下次连不到服务器，可以先同时开着22和6022两个端口，然后再关掉22端口；</span><br><span class="line">重启sshd不会弹掉你当前的连接，可以另外开一个客户端来测试服务;</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    #vi /etc/ssh/sshd_config</span><br><span class="line">    #增加修改</span><br><span class="line">    #Port 22 #关闭22端口</span><br><span class="line">    Port 6022 #增加6022端口</span><br><span class="line">    #重启sshd服务</span><br><span class="line">    service sshd restart</span><br><span class="line">    检查一下sshd的监听端口对不对</span><br><span class="line">    netstat -lnp|grep ssh</span><br><span class="line">    #iptables开放sshd的6022端口</span><br><span class="line">    vi /etc/sysconfig/iptables</span><br><span class="line">    #如果使用redhat默认规则则增加</span><br><span class="line">    -A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 6022 -j ACCEPT</span><br><span class="line">    #或</span><br><span class="line">    iptables -A INPUT -p tcp --dport 6022 -j ACCEPT</span><br><span class="line">    iptables -A OUTPUT -p udp --sport 6022 -j ACCEPT</span><br><span class="line">    重启iptables 服务</span><br><span class="line">    service iptables restart</span><br><span class="line">    #测试两个端口是否都能连上，连上后再将22端口删除</span><br></pre></td></tr></table></figure><h2 id="关闭系统不使用的服务"><a class="markdownIt-Anchor" href="#关闭系统不使用的服务"></a> 关闭系统不使用的服务：</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    cd /etc/init.d # 进入到系统init进程启动目录</span><br><span class="line">    在这里有两个方法，可以关闭init目录下的服务。</span><br><span class="line">    一个是将init目录下的文件名mv成*.old类的文件名，即修改文件名，作用就是在系统启动的时候找不到这个服务的启动文件。</span><br><span class="line">    另一个是使用chkconfig系统命令来关闭系统启动等级的服务。</span><br><span class="line">    注：在使用以下任何一种方法时，请先检查需要关闭的服务是否是本服务器特别需要启动支持的服务，以防关闭正常使用的服务。</span><br><span class="line"></span><br><span class="line">    使用chkcofig命令来关闭不使用的系统服务 (level前面为2个减号)要想在修改启动脚本前了解有多少服务正在运行，输入：</span><br><span class="line">    ps aux | wc -l</span><br><span class="line"></span><br><span class="line">    然后修改启动脚本后，重启系统，再次输入上面的命令，就可计算出减少了多少项服务。越少服务在运行，安全性就越好。另外运行以下命令可以了解还有多少服务在运行：</span><br><span class="line">    netstat -na --ip</span><br><span class="line"></span><br><span class="line">    批量方式先停止服务</span><br><span class="line">    for i in acpid anacron apmd atd auditd autofs avahi-daemon avahi-dnsconfd bluetooth cpuspeed cups dhcpd firstboot gpm haldaemon hidd ip6tables ipsec isdn kudzu lpd mcstrans messagebus microcode_ctl netfs nfs nfslock nscd pcscd portmap readahead_early restorecond rpcgssd rpcidmapd rstatd sendmai</span><br><span class="line">    l setroubleshoot snmpd sysstat xfs xinetd yppasswdd ypserv yum-updatesd ;do service $i stop;done</span><br><span class="line"></span><br><span class="line">    关闭启动服务</span><br><span class="line">    for i in acpid anacron apmd atd auditd autofs avahi-daemon avahi-dnsconfd bluetooth cpuspeed cups dhcpd firstboot gpm haldaemon hidd ip6tables ipsec isdn kudzu lpd mcstrans messagebus microcode_ctl netfs nfs nfslock nscd pcscd portmap readahead_early restorecond rpcgssd rpcidmapd rstatd sendmai</span><br><span class="line">    l setroubleshoot snmpd sysstat xfs xinetd yppasswdd ypserv yum-updatesd ;do chkconfig $i off;done</span><br><span class="line"></span><br><span class="line">    以下为手动方式及解释,执行批量方式后不需再执行了</span><br><span class="line">    chkconfig --level 345 apmd off ##笔记本需要</span><br><span class="line">    chkconfig --level 345 netfs off ## nfs客户端</span><br><span class="line">    chkconfig --level 345 yppasswdd off ## NIS服务器，此服务漏洞很多</span><br><span class="line">    chkconfig --level 345 ypserv off ## NIS服务器，此服务漏洞很多</span><br><span class="line">    chkconfig --level 345 dhcpd off ## dhcp服务</span><br><span class="line">    chkconfig --level 345 portmap off ##运行rpc(111端口)服务必需</span><br><span class="line">    chkconfig --level 345 lpd off ##打印服务</span><br><span class="line">    chkconfig --level 345 nfs off ## NFS服务器，漏洞极多</span><br><span class="line">    chkconfig --level 345 sendmail off ##邮件服务, 漏洞极多</span><br><span class="line">    chkconfig --level 345 snmpd off ## SNMP，远程用户能从中获得许多系统信息</span><br><span class="line">    chkconfig --level 345 rstatd off ##避免运行r服务，远程用户可以从中获取很多信息</span><br><span class="line">    chkconfig --level 345 atd off ##和cron很相似的定时运行程序的服务</span><br><span class="line">    注：以上chkcofig 命令中的3和5是系统启动的类型，以下为数字代表意思</span><br><span class="line">    0:开机(请不要切换到此等级)</span><br><span class="line">    1:单人使用者模式的文字界面</span><br><span class="line">    2:多人使用者模式的文字界面,不具有网络档案系统(NFS)功能</span><br><span class="line">    3:多人使用者模式的文字界面,具有网络档案系统(NFS)功能</span><br><span class="line">    4:某些发行版的linux使用此等级进入x windows system</span><br><span class="line">    5:某些发行版的linux使用此等级进入x windows system</span><br><span class="line">    6:重新启动</span><br><span class="line"></span><br><span class="line">    如果不指定--level 单用on和off开关，系统默认只对运行级3，4，5有效</span><br><span class="line">    chkconfig cups off #打印机</span><br><span class="line">    chkconfig bluetooth off # 蓝牙</span><br><span class="line">    chkconfig hidd off # 蓝牙</span><br><span class="line">    chkconfig ip6tables off # ipv6</span><br><span class="line">    chkconfig ipsec off # vpn</span><br><span class="line">    chkconfig auditd off #用户空间监控程序</span><br><span class="line">    chkconfig autofs off #光盘软盘硬盘等自动加载服务</span><br><span class="line">    chkconfig avahi-daemon off #主要用于Zero Configuration Networking ，一般没什么用建议关闭</span><br><span class="line">    chkconfig avahi-dnsconfd off #主要用于Zero Configuration Networking ,同上,建议关闭</span><br><span class="line">    chkconfig cpuspeed off #动态调整CPU频率的进程，在服务器系统中这个进程建议关闭</span><br><span class="line">    chkconfig isdn off #isdn</span><br><span class="line">    chkconfig kudzu off #硬件自动监测服务</span><br><span class="line">    chkconfig nfslock off #NFS文档锁定功能。文档共享支持，无需的能够关了</span><br><span class="line">    chkconfig nscd off #负责密码和组的查询，在有NIS服务时需要</span><br><span class="line">    chkconfig pcscd off #智能卡支持，,如果没有可以关了</span><br><span class="line">    chkconfig yum-updatesd off #yum更新</span><br><span class="line">    chkconfig acpid off</span><br><span class="line">    chkconfig autofs off</span><br><span class="line">    chkconfig firstboot off</span><br><span class="line">    chkconfig mcstrans off #selinux</span><br><span class="line">    chkconfig microcode_ctl off</span><br><span class="line">    chkconfig rpcgssd off</span><br><span class="line">    chkconfig rpcidmapd off</span><br><span class="line">    chkconfig setroubleshoot off</span><br><span class="line">    chkconfig xfs off</span><br><span class="line">    chkconfig xinetd off</span><br><span class="line">    chkconfig messagebus off</span><br><span class="line">    chkconfig gpm off #鼠标</span><br><span class="line">    chkconfig restorecond off #selinux</span><br><span class="line">    chkconfig haldaemon off</span><br><span class="line">    chkconfig sysstat off</span><br><span class="line">    chkconfig readahead_early off</span><br><span class="line">    chkconfig anacron off</span><br><span class="line"></span><br><span class="line">    需要保留的服务</span><br><span class="line">    crond , irqbalance , microcode_ctl ,network , sshd ,syslog</span><br><span class="line">    因为有些服务已运行，所以设置完后需重启</span><br><span class="line">    chkconfig</span><br><span class="line">    /*</span><br><span class="line">        语法：chkconfig [--add][--del][--list][系统服务] 或 chkconfig [--level &lt;等级代号&gt;][系统服务][on/off/reset]</span><br><span class="line"></span><br><span class="line">        补充说明：这是Red Hat公司遵循GPL规则所开发的程序，它可查询操作系统在每一个执行等级中会执行哪些系统服务，其中包括各类常驻服务。</span><br><span class="line"></span><br><span class="line">        参数：</span><br><span class="line"></span><br><span class="line">        　--add 　增加所指定的系统服务，让chkconfig指令得以管理它，并同时在系统启动的叙述文件内增加相关数据。</span><br><span class="line">        　--del 　删除所指定的系统服务，不再由chkconfig指令管理，并同时在系统启动的叙述文件内删除相关数据。</span><br><span class="line">        　--level&lt;等级代号&gt; 　指定读系统服务要在哪一个执行等级中开启或关毕</span><br><span class="line">    */</span><br></pre></td></tr></table></figure><h2 id="阻止系统响应任何从外部内部来的-ping-请求"><a class="markdownIt-Anchor" href="#阻止系统响应任何从外部内部来的-ping-请求"></a> 阻止系统响应任何从外部/内部来的 ping 请求</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：既然没有人能ping通你的机器并收到响应，你可以大大增强你的站点的安全性。你可以加下面的一行命令到/etc/rc.d/rc.local，以使每次启动后自动运行。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    echo 1 &gt; /proc/sys/net/ipv4/icmp_echo_ignore_all</span><br><span class="line">    #这个可以不做哈</span><br></pre></td></tr></table></figure><h2 id="修改etchostconf文件"><a class="markdownIt-Anchor" href="#修改etchostconf文件"></a> 修改&quot;/etc/host.conf&quot;文件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    &quot;/etc/host.conf&quot;说明了如何解析地址。编辑&quot;/etc/host.conf&quot;文件（vi /etc/host.conf），加入下面这行：</span><br><span class="line">    # Lookup names via DNS first then fall back to /etc/hosts.</span><br><span class="line">    order hosts,bind</span><br><span class="line">    # We have machines with multiple IP addresses.</span><br><span class="line">    multi on</span><br><span class="line">    # Check for IP address spoofing.</span><br><span class="line">    nospoof on</span><br><span class="line">    第一项设置首先通过DNS解析IP地址，然后通过hosts文件解析。</span><br><span class="line">    第二项设置检测是否“/etc/hosts”文件中的主机是否拥有多个IP地址（比如有多个以太口网卡）。</span><br><span class="line">    第三项设置说明要注意对本机未经许可的电子欺骗。</span><br></pre></td></tr></table></figure><h2 id="不允许从不同的控制台进行-root-登陆"><a class="markdownIt-Anchor" href="#不允许从不同的控制台进行-root-登陆"></a> 不允许从不同的控制台进行 root 登陆</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    &quot;/etc/securetty&quot;文件允许你定义root用户可以从那个TTY设备登陆。你可以编辑&quot;/etc/securetty&quot;文件，再不需要登陆的TTY设备前添加“#”标志，来禁止从该TTY设备进行root登陆。</span><br><span class="line"></span><br><span class="line">    在/etc/inittab文件中有如下一段话：</span><br><span class="line"></span><br><span class="line">    # Run gettys in standard runlevels</span><br><span class="line">    1:2345:respawn:/sbin/mingetty tty1</span><br><span class="line">    2:2345:respawn:/sbin/mingetty tty2</span><br><span class="line">    # 3:2345:respawn:/sbin/mingetty tty3</span><br><span class="line">    # 4:2345:respawn:/sbin/mingetty tty4</span><br><span class="line">    # 5:2345:respawn:/sbin/mingetty tty5</span><br><span class="line">    # 6:2345:respawn:/sbin/mingetty tty6</span><br><span class="line">    系统默认的可以使用6个控制台，即Alt+F1,Alt+F2...，这里在3，4，5，6前面加上“#”，注释该句话，这样现在只有两个控制台可供使用，最好保留两个。然后重新启动init进程，改动即可生效！</span><br></pre></td></tr></table></figure><h2 id="禁止-control-alt-delete-键盘关闭命令"><a class="markdownIt-Anchor" href="#禁止-control-alt-delete-键盘关闭命令"></a> 禁止 Control-Alt-Delete 键盘关闭命令</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    在&quot;/etc/inittab&quot; 文件中注释掉下面这行（使用#）：</span><br><span class="line">    ca::ctrlaltdel:/sbin/shutdown -t3 -r now</span><br><span class="line">    改为：</span><br><span class="line">    # ca::ctrlaltdel:/sbin/shutdown -t3 -r now</span><br><span class="line">    为了使这项改动起作用，输入下面这个命令：</span><br><span class="line">    # /sbin/init q</span><br></pre></td></tr></table></figure><h2 id="用-chattr-命令给下面的文件加上不可更改属性"><a class="markdownIt-Anchor" href="#用-chattr-命令给下面的文件加上不可更改属性"></a> 用 chattr 命令给下面的文件加上不可更改属性。</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    [root@c1gstudio]# chattr +i /etc/passwd</span><br><span class="line">    [root@c1gstudio]# chattr +i /etc/shadow</span><br><span class="line">    [root@c1gstudio]# chattr +i /etc/group</span><br><span class="line">    [root@c1gstudio]# chattr +i /etc/gshadow</span><br><span class="line">    【注：chattr是改变文件属性的命令，参数i代表不得任意更动文件或目录,此处的i为不可修改位(immutable)。查看方法：lsattr /etc/passwd，撤销为chattr –i /etc/group】</span><br><span class="line"></span><br><span class="line">    补充说明：这项指令可改变存放在ext2文件系统上的文件或目录属性，这些属性共有以下8种模式：</span><br><span class="line"></span><br><span class="line">    　a：让文件或目录仅供附加用途。</span><br><span class="line">    　b：不更新文件或目录的最后存取时间。</span><br><span class="line">    　c：将文件或目录压缩后存放。</span><br><span class="line">    　d：将文件或目录排除在倾倒操作之外。</span><br><span class="line">    　i：不得任意更动文件或目录。</span><br><span class="line">    　s：保密性删除文件或目录。</span><br><span class="line">    　S：即时更新文件或目录。</span><br><span class="line">    　u：预防以外删除。</span><br><span class="line">    参数：</span><br><span class="line"></span><br><span class="line">    　-R 递归处理，将指定目录下的所有文件及子目录一并处理。</span><br><span class="line">    　-v&lt;版本编号&gt; 设置文件或目录版本。</span><br><span class="line">    　-V 显示指令执行过程。</span><br><span class="line">    　+&lt;属性&gt; 开启文件或目录的该项属性。</span><br><span class="line">    　-&lt;属性&gt; 关闭文件或目录的该项属性。</span><br><span class="line">    　=&lt;属性&gt; 指定文件或目录的该项属性。</span><br></pre></td></tr></table></figure><h2 id="给系统服务端口列表文件加锁"><a class="markdownIt-Anchor" href="#给系统服务端口列表文件加锁"></a> 给系统服务端口列表文件加锁</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：主要作用是防止未经许可的删除或添加服务</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    chattr +i /etc/services</span><br><span class="line">    【查看方法：lsattr /etc/ services，撤销为chattr –i /etc/ services】</span><br></pre></td></tr></table></figure><h2 id="系统文件权限修改"><a class="markdownIt-Anchor" href="#系统文件权限修改"></a> 系统文件权限修改</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：Linux文件系统的安全主要是通过设置文件的权限来实现的。每一个Linux的文件或目录，都有3组属性，分别定义文件或目录的所有者，用户组和其他人的使用权限（只读、可写、可执行、允许SUID、允许SGID等）。特别注意，权限为SUID和SGID的可执行文件，在程序运行过程中，会给进程赋予所有者的权限，如果被黑客发现并利用就会给系统造成危害。</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    (1)修改init目录文件执行权限：</span><br><span class="line"></span><br><span class="line">    chmod -R 700 /etc/init.d/* （递归处理，owner具有rwx，group无，others无）</span><br><span class="line">    (2)修改部分系统文件的SUID和SGID的权限：</span><br><span class="line">    chmod a-s /usr/bin/chage</span><br><span class="line">    chmod a-s /usr/bin/gpasswd</span><br><span class="line">    chmod a-s /usr/bin/wall</span><br><span class="line">    chmod a-s /usr/bin/chfn</span><br><span class="line">    chmod a-s /usr/bin/chsh</span><br><span class="line">    chmod a-s /usr/bin/newgrp</span><br><span class="line">    chmod a-s /usr/bin/write</span><br><span class="line">    chmod a-s /usr/sbin/usernetctl</span><br><span class="line">    chmod a-s /usr/sbin/traceroute</span><br><span class="line">    chmod a-s /bin/mount</span><br><span class="line">    chmod a-s /bin/umount</span><br><span class="line">    chmod a-s /sbin/netreport</span><br><span class="line">    (3)修改系统引导文件</span><br><span class="line"></span><br><span class="line">    chmod 600 /etc/grub.conf</span><br><span class="line">    chattr +i /etc/grub.conf</span><br><span class="line">    【查看方法：lsattr /etc/grub.conf，撤销为chattr –i /etc/grub.conf】</span><br></pre></td></tr></table></figure><h2 id="增加-dns"><a class="markdownIt-Anchor" href="#增加-dns"></a> 增加 dns</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    # vi /etc/resolv.conf</span><br><span class="line">    nameserver 8.8.8.8 #google dns</span><br><span class="line">    nameserver 8.8.4.4</span><br></pre></td></tr></table></figure><h2 id="hostname-修改"><a class="markdownIt-Anchor" href="#hostname-修改"></a> hostname 修改</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">危险等级:低级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    # 注意需先把mysql、postfix等服务停了</span><br><span class="line">    1.hostname servername</span><br><span class="line">    2.vi /etc/sysconfig/network</span><br><span class="line">    service network restart</span><br><span class="line">    3.vi /etc/hosts</span><br></pre></td></tr></table></figure><h2 id="selinux-修改"><a class="markdownIt-Anchor" href="#selinux-修改"></a> selinux 修改</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    开启selinux可以增加安全性，但装软件时可能会遇到一些奇怪问题</span><br><span class="line">    以下是关闭方法</span><br><span class="line"></span><br><span class="line">    # vi /etc/selinux/config</span><br><span class="line">    改成disabled</span><br></pre></td></tr></table></figure><h2 id="关闭-ipv6"><a class="markdownIt-Anchor" href="#关闭-ipv6"></a> 关闭 ipv6</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    echo &quot;alias net-pf-10 off&quot; &gt;&gt; /etc/modprobe.conf</span><br><span class="line">    echo &quot;alias ipv6 off&quot; &gt;&gt; /etc/modprobe.conf</span><br><span class="line">    # vi /etc/sysconfig/network</span><br><span class="line">    NETWORKING_IPV6=no</span><br><span class="line">    重启服务</span><br><span class="line"></span><br><span class="line">    Service ip6tables stop</span><br><span class="line">    Service network restart</span><br><span class="line">    关闭自动启动</span><br><span class="line"></span><br><span class="line">    chkconfig --level 235 ip6tables off</span><br></pre></td></tr></table></figure><h2 id="设置-iptables"><a class="markdownIt-Anchor" href="#设置-iptables"></a> 设置 iptables</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">危险等级:中级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    iptables 默认安全规则脚本</span><br><span class="line"></span><br><span class="line">    重启系统</span><br><span class="line"></span><br><span class="line">    以上大部分设置可以运行脚本来完成。linux安全设置快捷脚本</span><br><span class="line"></span><br><span class="line">    设置完成后重启系统</span><br></pre></td></tr></table></figure><h2 id="其它设置项"><a class="markdownIt-Anchor" href="#其它设置项"></a> 其它设置项</h2><h3 id="linux-调整系统时区时间的方法"><a class="markdownIt-Anchor" href="#linux-调整系统时区时间的方法"></a> linux 调整系统时区/时间的方法</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">危险等级:低级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    把/usr/share/zoneinfo里相应的时区与/etc/localtime做个软link.比如使用上海时区的时间:ln -s /usr/share/zoneinfo/Asia/Shanghai /etc/localtime 如果要使用UTC计时方式，则应在/etc/sysconfig/clock文件里改UTC=TRUE 时间的设置: 使用date 命令加s参数修改，注意linux的时间格式为&quot;月日时分年&quot;,也可以只修改时间date -s 22:30:20,如果修改的是年月日和时间，格式为&quot;月日时分年.秒&quot;,2007-03-18 11:01:56则应写为&quot;date -s 031811012007.56 硬件时间与当前时间更新: hwclock --systohc 如果硬件记时用UTC,则为 hwclock --systohc --utc</span><br><span class="line"></span><br><span class="line">    linux调整系统时区/时间的方法</span><br><span class="line"></span><br><span class="line">    1) 找到相应的时区文件</span><br><span class="line"></span><br><span class="line">    /usr/share/zoneinfo/Asia/Shanghai</span><br><span class="line">    用这个文件替换当前的/etc/localtime文件。</span><br><span class="line">    步骤：cp –i /usr/share/zoneinfo/Asia/Shanghai /etc/localtime</span><br><span class="line"></span><br><span class="line">    选择覆盖</span><br><span class="line"></span><br><span class="line">    2) 修改/etc/sysconfig/clock文件，修改为：</span><br><span class="line"></span><br><span class="line">    ZONE=&quot;Asia/Shanghai&quot;</span><br><span class="line">    UTC=false</span><br><span class="line">    ARC=false</span><br><span class="line">    3)</span><br><span class="line">    时间设定成2005年8月30日的命令如下：</span><br><span class="line"></span><br><span class="line">    # date -s 08/30/2005</span><br><span class="line">    将系统时间设定成下午6点40分0秒的命令如下：</span><br><span class="line"></span><br><span class="line">    # date -s 18:40:00</span><br><span class="line">    4)同步BIOS时钟，强制把系统时间写入CMOS，命令如下：</span><br><span class="line"></span><br><span class="line">    # clock -w</span><br><span class="line">    安装ntpd</span><br><span class="line"></span><br><span class="line">    # yum install ntp</span><br><span class="line">    # chkconfig --levels 235 ntpd on</span><br><span class="line">    # ntpdate ntp.api.bz #先手动校准下</span><br><span class="line">    # service ntpd start</span><br></pre></td></tr></table></figure><h3 id="设置语言"><a class="markdownIt-Anchor" href="#设置语言"></a> 设置语言</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">危险等级:低级</span><br><span class="line">类型：安全基线</span><br><span class="line">描述：英文语言，中文支持</span><br><span class="line">参考链接：无</span><br><span class="line">操作步骤：</span><br><span class="line">    # vi /etc/sysconfig/i18n</span><br><span class="line">    LANG=&quot;en_US.UTF-8&quot;</span><br><span class="line">    SUPPORTED=&quot;zh_CN.UTF-8:zh_CN:zh&quot;</span><br><span class="line">    SYSFONT=&quot;latarcyrheb-sun16&quot;</span><br><span class="line">    tmpwatch 定时清除</span><br><span class="line"></span><br><span class="line">    假设服务器自定义了php的session和upload目录</span><br><span class="line"></span><br><span class="line">    # vi /etc/cron.daily/tmpwatch</span><br><span class="line">    在240 /tmp 前增加</span><br><span class="line">    -x /tmp/session -x /tmp/upload</span><br><span class="line">    # mkdir /tmp/session</span><br><span class="line">    # mkdir /tmp/upload</span><br><span class="line">    # chown nobody:nobody /tmp/upload</span><br><span class="line">    # chmod 0770 /tmp/upload</span><br></pre></td></tr></table></figure></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://debug.cool/2017/02/16/opsLinuxSec/" title="Linux主机安全策略部署" target="_blank" rel="external">http://debug.cool/2017/02/16/opsLinuxSec/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="/" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/avatar.png" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="/" target="_blank"><span class="text-dark">ClanceyHuang</span><small class="ml-1x">Low Level Researcher</small></a></h3><div>为人治学当有独立之精神，自由之思想。</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2017/02/16/tipsLinuxBaseConfig/" title="Ubuntu搭建渗透测试环境"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/2016/08/01/lifeMind/" title="碎碎念"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button"><span>[&nbsp;</span><span>Catalogue</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq,qzone,wechat,douban,diandian,facebook,twitter,google,linkedin" data-mobile-sites="weibo,qq,qzone,wechat,douban,facebook,twitter,linkedin"></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/ClanceyHuang" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2021 ClanceyHuang<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(t){t(".search-form").on("submit",function(o){var n=t('.search-form-input[name="wd"]').val();return window.location="https://www.baidu.com/s?wd=site:debug.cool "+n,!1})}(jQuery)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"Qqm4Y42SKNlM4BvWNdr9qjwC-gzGzoHsz",appKey:"NeKHjEgYc95FxcuCX3dYtE30",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script><script defer type="text/javascript">!function(e,a,t,n,g,c){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,g=a.createElement(t),c=a.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(g,c)}(window,document,"script","ga"),ga("create","UA-104610957-2","auto"),ga("send","pageview")</script></body></html><script type="text/javascript" src="//cdn.jsdelivr.net/gh/ygbhf/clicklove/clicklove.js"></script>