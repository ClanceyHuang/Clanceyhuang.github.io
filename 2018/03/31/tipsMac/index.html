<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,minimum-scale=1,user-scalable=no,minimal-ui"><meta name="renderer" content="webkit"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="format-detection" content="telephone=no,email=no,adress=no"><meta name="theme-color" content="#000000"><meta http-equiv="window-target" content="_top"><title>Mac生产力工具 | debug.cool</title><meta name="description" content="Mac 机写代码除了逼格高一点，生产力是真的显著提高～ 以下简单介绍一些在 Mac 上提高生产力的小技巧。"><meta property="og:type" content="article"><meta property="og:title" content="Mac生产力工具"><meta property="og:url" content="http://debug.cool/2018/03/31/tipsMac/index.html"><meta property="og:site_name" content="Kirk"><meta property="og:description" content="Mac 机写代码除了逼格高一点，生产力是真的显著提高～ 以下简单介绍一些在 Mac 上提高生产力的小技巧。"><meta property="og:locale" content="en_US"><meta property="article:published_time" content="2018-03-30T16:00:00.000Z"><meta property="article:modified_time" content="2021-05-07T07:30:39.980Z"><meta property="article:author" content="ClanceyHuang"><meta property="article:tag" content="debug"><meta name="twitter:card" content="summary"><link rel="canonical" href="http://debug.cool/2018/03/31/tipsMac/index.html"><link rel="alternate" href="/atom.xml" title="Kirk" type="application/atom+xml"><link rel="icon" href="/avatar.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><meta name="generator" content="Hexo 5.4.0"><link rel="stylesheet" href="/css/prism-vs.css" type="text/css"></head><body class="main-center" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="slimContent"><div class="navbar-header"><div class="profile-block text-center"><a id="avatar" href="/" target="_blank"><img class="img-circle img-rotate" src="/avatar.png" width="200" height="200"></a><h2 id="name" class="hidden-xs hidden-sm">ClanceyHuang</h2><h3 id="title" class="hidden-xs hidden-sm hidden-md">Low Level Researcher</h3><small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i> Shanghai, China</small></div><div class="search" id="search-form-wrap"><form class="search-form sidebar-form" method="GET" action="https://www.baidu.com/s?"><div class="input-group"><input name="wd" type="text" class="form-control search-form-input" placeholder="Search"> <span class="input-group-btn"><button type="submit" class="btn btn-flat search-form-submit"><i class="icon icon-search"></i></button></span></div></form></div><button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation"><ul class="nav navbar-nav main-nav menu-highlight"><li class="menu-item menu-item-home"><a href="/."><i class="icon icon-home-fill"></i> <span class="menu-title">Home</span></a></li><li class="menu-item menu-item-archives"><a href="/archives"><i class="icon icon-archives-fill"></i> <span class="menu-title">Archives</span></a></li><li class="menu-item menu-item-categories"><a href="/categories"><i class="icon icon-folder"></i> <span class="menu-title">Categories</span></a></li><li class="menu-item menu-item-tags"><a href="/tags"><i class="icon icon-tags"></i> <span class="menu-title">Tags</span></a></li><li class="menu-item menu-item-repository"><a href="/repository"><i class="icon icon-project"></i> <span class="menu-title">Repository</span></a></li><li class="menu-item menu-item-links"><a href="/links"><i class="icon icon-friendship"></i> <span class="menu-title">Links</span></a></li><li class="menu-item menu-item-about"><a href="/about"><i class="icon icon-cup-fill"></i> <span class="menu-title">About</span></a></li></ul><ul class="social-links"><li><a href="https://github.com/ClanceyHuang" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul></nav></div></header><aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><div class="widget"><h3 class="widget-title">Board</h3><div class="widget-body"><div id="board"><div class="content"><p>Think Twice Code Once.</p></div></div></div></div><div class="widget"><h3 class="widget-title">Tag Cloud</h3><div class="widget-body tagcloud"><a href="/tags/Kafka/" style="font-size:13px">Kafka</a> <a href="/tags/Matplotlib/" style="font-size:13px">Matplotlib</a></div></div><div class="widget"><h3 class="widget-title">Recent Posts</h3><div class="widget-body"><ul class="recent-post-list list-unstyled no-thumbnail"><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/sec/">sec</a></p><p class="item-title"><a href="/2021/04/01/sandboxEscapePy3/" class="title">Python3的一个沙箱逃逸技巧</a></p><p class="item-date"><time datetime="2021-03-31T16:10:00.000Z" itemprop="datePublished">2021-04-01</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/tips/">tips</a></p><p class="item-title"><a href="/2021/01/20/tipsWSL/" class="title">Windows10下WSL开发环境搭建</a></p><p class="item-date"><time datetime="2021-01-20T14:44:00.000Z" itemprop="datePublished">2021-01-20</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/dev/">dev</a></p><p class="item-title"><a href="/2020/12/09/devDiyExpress/" class="title">DiyExpress - 自定义表达式计算引擎</a></p><p class="item-date"><time datetime="2020-12-08T16:00:00.000Z" itemprop="datePublished">2020-12-09</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/tips/">tips</a></p><p class="item-title"><a href="/2020/03/15/tipsDoubleSystem/" class="title">Window10下双系统grub修复</a></p><p class="item-date"><time datetime="2020-03-15T15:10:00.000Z" itemprop="datePublished">2020-03-15</time></p></div></li><li><div class="item-inner"><p class="item-category"><a class="category-link" href="/categories/dev/">dev</a></p><p class="item-title"><a href="/2020/02/03/devDiyForm/" class="title">自定义表单设计及实现方案</a></p><p class="item-date"><time datetime="2020-02-03T06:30:00.000Z" itemprop="datePublished">2020-02-03</time></p></div></li></ul></div></div></div></aside><aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar"><div class="slimContent"><nav id="toc" class="article-toc"><h3 class="toc-title">Catalogue</h3><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%BB%88%E7%AB%AF"><span class="toc-number">1.</span> <span class="toc-text">安装命令行终端</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Xcode"><span class="toc-number">2.</span> <span class="toc-text">安装 Xcode</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-Xcode-Command-Line-Tools"><span class="toc-number">3.</span> <span class="toc-text">安装 Xcode Command Line Tools</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E5%8C%85%E7%AE%A1%E7%90%86%E5%99%A8"><span class="toc-number">4.</span> <span class="toc-text">安装包管理器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-HTTP-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">5.</span> <span class="toc-text">安装 HTTP 服务器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">6.</span> <span class="toc-text">安装数据库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E5%85%A5-MySQL-%E6%9C%8D%E5%8A%A1%E5%99%A8"><span class="toc-number">6.1.</span> <span class="toc-text">进入 MySQL 服务器</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%80%E5%90%AF-PHP-FPM"><span class="toc-number">7.</span> <span class="toc-text">开启 PHP-FPM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%BB%E5%8A%A0-PHP-FPM-%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="toc-number">8.</span> <span class="toc-text">添加 PHP-FPM 的配置文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9-PHP-FPM-%E7%9A%84-error-log-%E8%B7%AF%E5%BE%84"><span class="toc-number">9.</span> <span class="toc-text">修改 PHP-FPM 的 error_log 路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8-PHP-FPM"><span class="toc-number">10.</span> <span class="toc-text">启动 PHP-FPM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%97%AD-PHP-FPM"><span class="toc-number">11.</span> <span class="toc-text">关闭 PHP-FPM</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%87%8D%E5%90%AF-nginx"><span class="toc-number">12.</span> <span class="toc-text">重启 nginx</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85-PHP-%E6%89%A9%E5%B1%95"><span class="toc-number">13.</span> <span class="toc-text">安装 PHP 扩展</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%85%B3%E9%97%AD-SIP"><span class="toc-number">14.</span> <span class="toc-text">关闭 SIP</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%BC%8F%E5%AE%89%E8%A3%85%E6%89%A9%E5%B1%95"><span class="toc-number">14.1.</span> <span class="toc-text">正式安装扩展</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A6%96%E5%85%88%E5%AE%89%E8%A3%85-pecl"><span class="toc-number">14.2.</span> <span class="toc-text">首先安装 pecl</span></a></li></ol></li></ol></nav></div></aside><main class="main" role="main"><div class="content"><article id="post-tipsMac" class="article article-type-post" itemscope itemtype="http://schema.org/BlogPosting"><div class="article-header"><h1 class="article-title" itemprop="name">Mac生产力工具</h1><div class="article-meta"><span class="article-date"><i class="icon icon-calendar-check"></i> <a href="/2018/03/31/tipsMac/" class="article-date"><time datetime="2018-03-30T16:00:00.000Z" itemprop="datePublished">2018-03-31</time> </a></span><span class="article-category"><i class="icon icon-folder"></i> <a class="article-category-link" href="/categories/tips/">tips</a> </span><span class="article-read hidden-xs"><i class="icon icon-eye-fill" aria-hidden="true"></i> <span id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span> </span></span><span class="post-comment"><i class="icon icon-comment"></i> <a href="/2018/03/31/tipsMac/#comments" class="article-comment-link">Comments</a></span> <span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 1.9k(words)</span> <span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 8(minutes)</span></div></div><div class="article-entry marked-body" itemprop="articleBody"><p>Mac 机写代码除了逼格高一点，生产力是真的显著提高～</p><p>以下简单介绍一些在 Mac 上提高生产力的小技巧。</p><span id="more"></span><p>以 PHP 开发环境为例，干净的 Mac 系统（重装系统后未作任何配置）</p><h2 id="安装命令行终端"><a href="#安装命令行终端" class="headerlink" title="安装命令行终端"></a>安装命令行终端</h2><p>这里我们选择<code>iTerm2</code>，<code>iTerm2</code>功能强大，可以替代系统默认的命令行终端。下载解压后，将<code>iTerm2</code>直接拖入”应用程序”目录。</p><h2 id="安装-Xcode"><a href="#安装-Xcode" class="headerlink" title="安装 Xcode"></a>安装 Xcode</h2><p><code>Xcode</code>是苹果出品的包含一系列工具及库的开发套件。<br>通过 <code>App Store</code> 安装最新版本的 <code>Xcode</code>。我们一般不会用 <code>Xcode</code> 来开发 PHP 项目。但这一步也是必需的，因为 <code>Xcode</code> 会帮你附带安装一些如 <code>Git</code> 等必要的软件。当然你也可以通过源码包安装 <code>Git</code>。</p><h2 id="安装-Xcode-Command-Line-Tools"><a href="#安装-Xcode-Command-Line-Tools" class="headerlink" title="安装 Xcode Command Line Tools"></a>安装 Xcode Command Line Tools</h2><p>这一步会帮你安装许多常见的基于 <code>Unix</code> 的工具。<code>Xcode</code> 命令行工具作为 <code>Xcode</code> 的一部分，包含了 <code>GCC</code> 编译器。在命令行中执行以下命令即可安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xcode-select --install</span><br></pre></td></tr></table></figure><h2 id="安装包管理器"><a href="#安装包管理器" class="headerlink" title="安装包管理器"></a>安装包管理器</h2><p><code>Homebrew</code> 作为 <code>macOS</code> 不可或缺的套件管理器，用来安装、升级以及卸载常用的软件。在命令行中执行以下命令即可安装：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/usr/bin/ruby -e <span class="string">&quot;<span class="subst">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>&quot;</span></span><br></pre></td></tr></table></figure><p>安装后可以修改 <code>Homebrew</code> 源，国外源一直不是很给力，这里我们将 <code>Homebrew</code> 的 <code>git</code> 远程仓库改为中国科学技术大学开源软件镜像：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> <span class="string">&quot;<span class="subst">$(brew --repo)</span>&quot;</span></span><br><span class="line">git remote set-url origin git://mirrors.ustc.edu.cn/brew.git</span><br></pre></td></tr></table></figure><h2 id="安装-HTTP-服务器"><a href="#安装-HTTP-服务器" class="headerlink" title="安装 HTTP 服务器"></a>安装 HTTP 服务器</h2><p>这里我们选择 <code>nginx</code> 代替系统自带的 <code>Apache</code>，作为我们的 <code>HTTP</code> 服务器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install nginx</span><br></pre></td></tr></table></figure><p>安装完成后，<code>nginx</code> 的一些常用命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx <span class="comment"># 启动 nginx 服务</span></span><br><span class="line">nginx -h <span class="comment"># nginx 帮助信息</span></span><br><span class="line">sudo nginx -s stop|quit|reopen|reload <span class="comment"># 停止|退出|重启|重载 nginx 服务</span></span><br></pre></td></tr></table></figure><h2 id="安装数据库"><a href="#安装数据库" class="headerlink" title="安装数据库"></a>安装数据库</h2><p>这里我们选择 <code>MySQL</code> 作为我们的数据库服务器：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install mysql</span><br></pre></td></tr></table></figure><p>当然，你也可以选择安装 <code>PostgreSQL</code> 或者 <code>MariaDB</code>。</p><p>安装完成后，启动 <code>MySQL</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysqld</span><br></pre></td></tr></table></figure><p>如果不执行上述操作，直接通过命令行进入 <code>MySQL</code>，一般会报一个这样的错误。<br>ERROR 2002 (HY000): Can’t connect to local MySQL server through socket ‘/tmp/mysql.sock’</p><h3 id="进入-MySQL-服务器"><a href="#进入-MySQL-服务器" class="headerlink" title="进入 MySQL 服务器"></a>进入 MySQL 服务器</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mysql -u root -p</span><br></pre></td></tr></table></figure><h2 id="开启-PHP-FPM"><a href="#开启-PHP-FPM" class="headerlink" title="开启 PHP-FPM"></a>开启 PHP-FPM</h2><p><code>nginx</code> 本身不能处理 <code>PHP</code>，它只是个 <code>HTTP</code> 服务器，当接收一个 <code>PHP</code> 请求后，<code>nginx</code> 会将其交由 <code>PHP</code> 解释器处理，并把结果返回给客户端。<code>nginx</code> 一般是把请求发 <code>FastCGI</code> 管理进程处理，<code>FastCGI</code> 管理进程选择 <code>CGI</code> 子进程处理结果并返回被 <code>nginx</code>。</p><p><code>PHP-FPM</code>是一个 <code>PHP FastCGI</code> 管理器，一开始只是 <code>PHP</code> 源代码的一个补丁，旨在将 <code>FastCGI</code> 进程管理整合进 <code>PHP</code>包中。必须将它 <code>patch</code> 到 <code>PHP</code> 源代码中，在编译安装 <code>PHP</code>后才可以使用。<code>PHP</code> 从版本 <code>5.3</code> 开始官方集成<code>PHP-FPM</code>。</p><h2 id="添加-PHP-FPM-的配置文件"><a href="#添加-PHP-FPM-的配置文件" class="headerlink" title="添加 PHP-FPM 的配置文件"></a>添加 PHP-FPM 的配置文件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cp /private/etc/php-fpm.conf.default /private/etc/php-fpm.conf</span><br><span class="line">php-fpm --fpm-config /private/etc/php-fpm.conf</span><br></pre></td></tr></table></figure><h2 id="修改-PHP-FPM-的-error-log-路径"><a href="#修改-PHP-FPM-的-error-log-路径" class="headerlink" title="修改 PHP-FPM 的 error_log 路径"></a>修改 PHP-FPM 的 error_log 路径</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vi /var/<span class="built_in">log</span>/php-fpm.log <span class="comment"># 新建文件</span></span><br><span class="line">vi /private/etc/php-fpm.conf <span class="comment"># 将 error_log=log/php-fpm.log 修改为：error_log = /var/log/php-fpm.log，保存</span></span><br></pre></td></tr></table></figure><h2 id="启动-PHP-FPM"><a href="#启动-PHP-FPM" class="headerlink" title="启动 PHP-FPM"></a>启动 PHP-FPM</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo php-fpm</span><br></pre></td></tr></table></figure><h2 id="关闭-PHP-FPM"><a href="#关闭-PHP-FPM" class="headerlink" title="关闭 PHP-FPM"></a>关闭 PHP-FPM</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep php-fpm</span><br><span class="line">sudo <span class="built_in">kill</span> php-fpm min pid <span class="comment"># 杀死 php-fpm 最小的进程id</span></span><br></pre></td></tr></table></figure><p>配置 <code>nginx.conf</code> 文件<br>通过以下命令可以查看<code>nginx.conf</code>文件的位置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nginx -h</span><br></pre></td></tr></table></figure><p>输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">nginx version: nginx/1.10.1</span><br><span class="line">Usage: nginx [-?hvVtTq] [-s signal] [-c filename] [-p prefix] [-g directives]</span><br><span class="line"></span><br><span class="line">Options:</span><br><span class="line">  -?,-h         : this <span class="built_in">help</span></span><br><span class="line">  -v            : show version and <span class="built_in">exit</span></span><br><span class="line">  -V            : show version and configure options <span class="keyword">then</span> <span class="built_in">exit</span></span><br><span class="line">  -t            : <span class="built_in">test</span> configuration and <span class="built_in">exit</span></span><br><span class="line">  -T            : <span class="built_in">test</span> configuration, dump it and <span class="built_in">exit</span></span><br><span class="line">  -q            : suppress non-error messages during configuration testing</span><br><span class="line">  -s signal     : send signal to a master process: stop, quit, reopen, reload</span><br><span class="line">  -p prefix     : <span class="built_in">set</span> prefix path (default: /usr/<span class="built_in">local</span>/Cellar/nginx/1.10.1/)</span><br><span class="line">  -c filename   : <span class="built_in">set</span> configuration file (default: /usr/<span class="built_in">local</span>/etc/nginx/nginx.conf)</span><br><span class="line">  -g directives : <span class="built_in">set</span> global directives out of configuration file</span><br></pre></td></tr></table></figure><p>打开配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi /usr/<span class="built_in">local</span>/etc/nginx/nginx.conf</span><br></pre></td></tr></table></figure><p>在文件末尾可以看到：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">include servers/*;</span><br></pre></td></tr></table></figure><p>它将同目录下的<code>servers</code>目录里的文件都包含了进来，由此，我们可以在<code>servers</code>文件里创建开发项目的配置信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> servers/</span><br><span class="line">vi test.conf</span><br></pre></td></tr></table></figure><p>将以下配置信息，写入 <code>test.conf</code>文件中：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">server &#123;</span><br><span class="line">    listen       8099;</span><br><span class="line">    server_name  localhost;</span><br><span class="line">    root /home/www/php_project;</span><br><span class="line">    rewrite . /index.php;</span><br><span class="line">    location / &#123;</span><br><span class="line">        index index.php index.html index.htm;</span><br><span class="line">        autoindex on;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    #proxy the php scripts to php-fpm</span><br><span class="line">    location ~ \.php$ &#123;</span><br><span class="line">        include /usr/local/etc/nginx/fastcgi.conf;</span><br><span class="line">        fastcgi_intercept_errors on;</span><br><span class="line">        fastcgi_pass   127.0.0.1:9000;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在上述的<code>/home/www/php_project</code>的目录下，我们创建一个 <code>index.php</code>文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /home/www/php_project</span><br><span class="line">vi test.php</span><br></pre></td></tr></table></figure><p>写入内容：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;? php</span><br><span class="line">phpinfo();</span><br></pre></td></tr></table></figure><h2 id="重启-nginx"><a href="#重启-nginx" class="headerlink" title="重启 nginx"></a>重启 nginx</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo nginx -s stop</span><br><span class="line">sudo nginx</span><br></pre></td></tr></table></figure><p>打开浏览器，访问<code>localhost:8099</code>。可以看到关于 <code>PHP</code> 配置的信息。</p><p>至此，<code>MNMP(MacOS-nginx-MySQL-PHP)</code>环境已经搭建完成。</p><h2 id="安装-PHP-扩展"><a href="#安装-PHP-扩展" class="headerlink" title="安装 PHP 扩展"></a>安装 PHP 扩展</h2><p>环境搭建完成后，你可能还需要安装一些 PHP 扩展，如 <code>MemCache</code>、<code>Redis</code>、<code>Mongo</code>、<code>Solr</code>等。</p><p>在安装<code>PHP</code>扩展之前，你需要完成一些必要的操作。</p><h2 id="关闭-SIP"><a href="#关闭-SIP" class="headerlink" title="关闭 SIP"></a>关闭 SIP</h2><p>这是安装 <code>PHP</code> 扩展前的必要操作。如果跳过这一操作，即使你用 <code>sudo</code> 命令安装扩展，依旧会报 <code>Operation not permitted</code> 的错误。这是因为 <code>OSX 10.11 El Capitan</code>（或更高）新添加了一个新的安全机制叫系统完整性保护 <code>System Integrity Protection (SIP)</code>，所以对于以下目录：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">/System</span><br><span class="line">/sbin</span><br><span class="line">/usr 不包含(/usr/<span class="built_in">local</span>/)</span><br></pre></td></tr></table></figure><p>仅仅供系统使用，其它用户或者程序无法直接使用，而我们的 <code>/usr/lib/php/extensions/</code> 则刚好在受保护范围内（误伤世界上最好的语言）。</p><p>所以解决方法就是禁掉 <code>SIP</code> 保护机制，步骤是：</p><p>重启系统<br>按住 <code>Command + R</code>（重新亮屏之后就开始按，象征地按几秒再松开，直到出现苹果标志性的 <code>Logo</code>）<br>菜单“实用工具” ==&gt;&gt; “终端” ==&gt;&gt; 输入：<code>csrutil disable</code>。执行后会输出：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Successfully disabled System Integrity Protection. Please restart the machine <span class="keyword">for</span> the changes to take effect</span><br></pre></td></tr></table></figure><p>重启系统<br>当然，<code>PHP</code> 扩展安装完成后，就可以重新打开 <code>SIP</code>，方法同上，命令改为：<code>csrutil enable</code>。</p><p>安装一些必要的依赖包<br>安装 <code>autoconf</code>，<code>PHP</code>动态编译 <code>phpize</code> 时需要：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install autoconf</span><br></pre></td></tr></table></figure><p>安装 <code>openssl</code>，安装某些 <code>php</code> 扩展如 <code>mongo</code> 时需要。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">brew install openssl</span><br></pre></td></tr></table></figure><p><code>mongo</code> 扩展安装是可能会报 <code>openssl</code> 错误，解决方法如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ln -s /usr/<span class="built_in">local</span>/Cellar/openssl/1.0.2j/include/openssl /usr/include/openssl</span><br></pre></td></tr></table></figure><h3 id="正式安装扩展"><a href="#正式安装扩展" class="headerlink" title="正式安装扩展"></a>正式安装扩展</h3><p>这里有两种方法安装 <code>php</code> 扩展：</p><p>通过 <code>pecl</code> 管理工具安装<br>通过源码包安装<br>通过 <code>pecl</code> 管理工具安装</p><h3 id="首先安装-pecl"><a href="#首先安装-pecl" class="headerlink" title="首先安装 pecl"></a>首先安装 pecl</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /usr/lib/php</span><br><span class="line">sudo php install-pear-nozlib.phar</span><br></pre></td></tr></table></figure><p><code>pecl</code> 一般就会安装成功，如果失败，换另一种方式安装 <code>pecl</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">curl -O http://pear.php.net/go-pear.phar</span><br><span class="line">sudo php -d detect_unicode=0 go-pear.phar</span><br><span class="line">输入 1，回车，输入/usr/<span class="built_in">local</span>/pear</span><br><span class="line">输入 4，回车，输入/usr/<span class="built_in">local</span>/bin</span><br><span class="line">回车</span><br></pre></td></tr></table></figure><p>安装好<code>pecl</code> 之后，我们就可以愉快地安装 <code>PHP</code> 扩展了：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pecl install solr</span><br><span class="line">sudo pecl install memcache</span><br><span class="line">sudo pecl install mongodb</span><br></pre></td></tr></table></figure><p>通过源码包安装<br>除了通过 <code>pecl</code> 安装，我们还可以通过下载源码包来进行安装扩展：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">wget http://pecl.php.net/get/redis-2.2.8.tgz</span><br><span class="line">tar -zxvf redis-2.2.8.tgz</span><br><span class="line"><span class="built_in">cd</span> redis-2.2.8</span><br><span class="line">phpize</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure><p>扩展安装完成后，我们还需最后一步，修改<code>php.ini</code>文件，并重启 <code>PHP-FPM</code>：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> /private/etc/</span><br><span class="line">cp php.ini.default php.ini</span><br><span class="line">vi php.ini</span><br></pre></td></tr></table></figure><p>追加扩展信息：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">extension=memcache.so</span><br><span class="line">extension=mongo.so</span><br><span class="line">extension=redis.so</span><br><span class="line">extension=solr.so</span><br></pre></td></tr></table></figure><p>重启 <code>PHP-FPM</code>:</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps aux|grep php-fpm</span><br><span class="line">sudo <span class="built_in">kill</span> php-fpm min pid <span class="comment"># 杀死 php-fpm 最小的进程id</span></span><br><span class="line">sudo php-fpm</span><br></pre></td></tr></table></figure><p>打开浏览器，访问<code>localhost:8099</code>。查看扩展是否安装成功。</p></div><div class="article-footer"><blockquote class="mt-2x"><ul class="post-copyright list-unstyled"><li class="post-copyright-link hidden-xs"><strong>本文链接：</strong> <a href="http://debug.cool/2018/03/31/tipsMac/" title="Mac生产力工具" target="_blank" rel="external">http://debug.cool/2018/03/31/tipsMac/</a></li><li class="post-copyright-license"><strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN协议</a> 许可协议。转载请注明出处！</li></ul></blockquote><div class="panel panel-default panel-badger"><div class="panel-body"><figure class="media"><div class="media-left"><a href="/" target="_blank" class="img-burn thumb-sm visible-lg"><img src="/avatar.png" class="img-rounded w-full" alt=""></a></div><div class="media-body"><h3 class="media-heading"><a href="/" target="_blank"><span class="text-dark">ClanceyHuang</span><small class="ml-1x">Low Level Researcher</small></a></h3><div>为人治学当有独立之精神，自由之思想。</div></div></figure></div></div></div></article><section id="comments"><div id="vcomments"></div></section></div><nav class="bar bar-footer clearfix" data-stick-bottom><div class="bar-inner"><ul class="pager pull-left"><li class="prev"><a href="/2018/09/04/noteKernelProgram/" title="如何编写一个简单内核"><i class="icon icon-angle-left" aria-hidden="true"></i><span>&nbsp;&nbsp;Newer</span></a></li><li class="next"><a href="/2017/02/16/opsLinuxSec/" title="Linux主机安全策略部署"><span>Older&nbsp;&nbsp;</span><i class="icon icon-angle-right" aria-hidden="true"></i></a></li><li class="toggle-toc"><a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false" title="Catalogue" role="button"><span>[&nbsp;</span><span>Catalogue</span> <i class="text-collapsed icon icon-anchor"></i> <i class="text-in icon icon-close"></i> <span>]</span></a></li></ul><div class="bar-right"><div class="share-component" data-sites="weibo,qq,qzone,wechat,douban,diandian,facebook,twitter,google,linkedin" data-mobile-sites="weibo,qq,qzone,wechat,douban,facebook,twitter,linkedin"></div></div></div></nav></main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter"><ul class="social-links"><li><a href="https://github.com/ClanceyHuang" target="_blank" title="Github" data-toggle="tooltip" data-placement="top"><i class="icon icon-github"></i></a></li><li><a href="/atom.xml" target="_blank" title="Rss" data-toggle="tooltip" data-placement="top"><i class="icon icon-rss"></i></a></li></ul><div class="copyright">&copy; 2021 ClanceyHuang<div class="publishby">Theme by <a href="https://github.com/cofess" target="_blank">cofess </a>base on <a href="https://github.com/cofess/hexo-theme-pure" target="_blank">pure</a>.</div></div></footer><script src="//cdn.jsdelivr.net/npm/jquery@1.12.4/dist/jquery.min.js"></script><script>window.jQuery||document.write('<script src="js/jquery.min.js"><\/script>')</script><script src="/js/plugin.min.js"></script><script src="/js/application.js"></script><script>!function(t){t(".search-form").on("submit",function(o){var n=t('.search-form-input[name="wd"]').val();return window.location="https://www.baidu.com/s?wd=site:debug.cool "+n,!1})}(jQuery)</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="//cdn.jsdelivr.net/npm/valine"></script><script type="text/javascript">var GUEST=["nick","mail","link"],meta=(meta="nick,mail,link").split(",").filter(function(e){return-1<GUEST.indexOf(e)});new Valine({el:"#vcomments",verify:!1,notify:!1,appId:"Qqm4Y42SKNlM4BvWNdr9qjwC-gzGzoHsz",appKey:"NeKHjEgYc95FxcuCX3dYtE30",placeholder:"Just go go",avatar:"mm",meta:meta,pageSize:"10",visitor:!1})</script><script defer type="text/javascript">!function(e,a,t,n,g,c){e.GoogleAnalyticsObject=n,e.ga=e.ga||function(){(e.ga.q=e.ga.q||[]).push(arguments)},e.ga.l=+new Date,g=a.createElement(t),c=a.getElementsByTagName(t)[0],g.async=1,g.src="//www.google-analytics.com/analytics.js",c.parentNode.insertBefore(g,c)}(window,document,"script","ga"),ga("create","UA-104610957-2","auto"),ga("send","pageview")</script></body></html><script type="text/javascript" src="//cdn.jsdelivr.net/gh/ygbhf/clicklove/clicklove.js"></script>